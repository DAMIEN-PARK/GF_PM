<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë§¤ì¶œ/ê³¼ê¸ˆ ê´€ë¦¬ - GrowFit Platform Admin</title>

    <!-- ê³µí†µ CSS -->
    <link rel="stylesheet" href="../common/variables.css">
    <link rel="stylesheet" href="../common/layout.css">
    <link rel="stylesheet" href="../common/components.css">

    <style>
        /* ========== Revenue & Billing ì „ìš© ìŠ¤íƒ€ì¼ ========== */
        :root {
            --platform-primary: #6366f1;
            --platform-primary-light: #818cf8;
            --platform-primary-dark: #4f46e5;
            --platform-secondary: #ec4899;
            --platform-accent: #f59e0b;
            --platform-success: #10b981;
            --platform-warning: #f59e0b;
            --platform-danger: #ef4444;
            --platform-purple: #8b5cf6;
            --platform-blue: #3b82f6;
            --platform-green: #10b981;
            --platform-orange: #f59e0b;
        }

        /* í˜ì´ì§€ í—¤ë” */
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-6);
        }

        .page-header__left h1 {
            font-size: var(--text-3xl);
            font-weight: var(--font-bold);
            background: linear-gradient(135deg, var(--platform-success), var(--platform-primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: var(--space-1);
        }

        .page-header__left p {
            font-size: var(--text-sm);
            color: var(--text-secondary);
        }

        .page-header__actions {
            display: flex;
            gap: var(--space-2);
        }

        /* í†µê³„ ì¹´ë“œ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--space-4);
            margin-bottom: var(--space-6);
        }

        .stat-card {
            background: var(--background);
            border: 2px solid var(--border);
            border-radius: var(--radius-xl);
            padding: var(--space-5);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(99, 102, 241, 0.1), transparent);
            border-radius: 50%;
            transform: translate(30%, -30%);
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(16, 185, 129, 0.15);
            border-color: var(--platform-success);
        }

        .stat-card__icon {
            font-size: 32px;
            margin-bottom: var(--space-3);
        }

        .stat-card__label {
            font-size: var(--text-sm);
            color: var(--text-secondary);
            margin-bottom: var(--space-2);
            font-weight: var(--font-medium);
        }

        .stat-card__value {
            font-size: var(--text-3xl);
            font-weight: var(--font-bold);
            color: var(--platform-success);
            margin-bottom: var(--space-2);
            letter-spacing: -0.5px;
        }

        .stat-card__change {
            font-size: var(--text-xs);
            font-weight: var(--font-bold);
            display: inline-flex;
            align-items: center;
            gap: var(--space-1);
        }

        .stat-card__change--up {
            color: var(--platform-success);
        }

        .stat-card__change--down {
            color: var(--platform-danger);
        }

        .stat-card__meta {
            font-size: var(--text-xs);
            color: var(--text-tertiary);
            margin-top: var(--space-1);
        }

        /* ì°¨íŠ¸ ì„¹ì…˜ */
        .chart-section {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: var(--space-4);
            margin-bottom: var(--space-6);
        }

        .chart-card {
            background: var(--background);
            border: 2px solid var(--border);
            border-radius: var(--radius-xl);
            padding: var(--space-5);
        }

        .chart-card__header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-4);
        }

        .chart-card__title {
            font-size: var(--text-lg);
            font-weight: var(--font-bold);
            color: var(--text-primary);
        }

        .chart-card__subtitle {
            font-size: var(--text-sm);
            color: var(--text-secondary);
            margin-top: var(--space-1);
        }

        .chart-placeholder {
            width: 100%;
            height: 300px;
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.05), rgba(99, 102, 241, 0.05));
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            font-size: var(--text-sm);
            border: 2px dashed var(--border);
        }

        /* í”Œëœ ë¶„í¬ */
        .plan-distribution {
            display: grid;
            gap: var(--space-3);
        }

        .plan-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-3);
            background: var(--surface);
            border-radius: var(--radius-md);
            transition: all 0.2s;
        }

        .plan-item:hover {
            background: var(--border);
            transform: translateX(4px);
        }

        .plan-item__info {
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }

        .plan-item__icon {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .plan-item__details {
            flex: 1;
        }

        .plan-item__name {
            font-weight: var(--font-semibold);
            color: var(--text-primary);
            margin-bottom: 2px;
        }

        .plan-item__count {
            font-size: var(--text-xs);
            color: var(--text-secondary);
        }

        .plan-item__revenue {
            text-align: right;
        }

        .plan-item__amount {
            font-weight: var(--font-bold);
            color: var(--platform-success);
            font-size: var(--text-lg);
        }

        .plan-item__percentage {
            font-size: var(--text-xs);
            color: var(--text-secondary);
        }

        /* í•„í„° ì„¹ì…˜ */
        .filter-section {
            background: var(--background);
            border: 2px solid var(--border);
            border-radius: var(--radius-xl);
            padding: var(--space-4);
            margin-bottom: var(--space-4);
        }

        .filter-row {
            display: flex;
            gap: var(--space-3);
            align-items: end;
        }

        .filter-group {
            flex: 1;
        }

        .filter-label {
            font-size: var(--text-sm);
            font-weight: var(--font-medium);
            color: var(--text-primary);
            margin-bottom: var(--space-2);
        }

        .filter-select {
            width: 100%;
            padding: var(--space-3);
            border: 2px solid var(--border);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
            background: white;
            cursor: pointer;
            transition: all 0.2s;
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--platform-primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        /* ê±°ë˜ í…Œì´ë¸” */
        .transaction-table-container {
            background: var(--background);
            border: 2px solid var(--border);
            border-radius: var(--radius-xl);
            overflow: hidden;
        }

        .transaction-table {
            width: 100%;
            border-collapse: collapse;
        }

        .transaction-table thead {
            background: var(--surface);
        }

        .transaction-table th {
            padding: var(--space-4);
            text-align: left;
            font-size: var(--text-sm);
            font-weight: var(--font-semibold);
            color: var(--text-secondary);
            border-bottom: 2px solid var(--border);
            white-space: nowrap;
        }

        .transaction-table th.sortable {
            cursor: pointer;
            user-select: none;
        }

        .transaction-table th.sortable:hover {
            color: var(--platform-primary);
        }

        .transaction-table td {
            padding: var(--space-4);
            font-size: var(--text-sm);
            border-bottom: 1px solid var(--border);
        }

        .transaction-table tbody tr {
            transition: all 0.2s;
            cursor: pointer;
        }

        .transaction-table tbody tr:hover {
            background: var(--surface);
        }

        /* ê±°ë˜ ì •ë³´ */
        .transaction-info {
            display: flex;
            flex-direction: column;
            gap: var(--space-1);
        }

        .transaction-id {
            font-family: 'Courier New', monospace;
            font-size: var(--text-xs);
            color: var(--text-tertiary);
        }

        .transaction-org {
            font-weight: var(--font-semibold);
            color: var(--text-primary);
        }

        /* ê¸ˆì•¡ í‘œì‹œ */
        .amount {
            font-weight: var(--font-bold);
            font-size: var(--text-lg);
        }

        .amount--positive {
            color: var(--platform-success);
        }

        .amount--negative {
            color: var(--platform-danger);
        }

        .amount--pending {
            color: var(--platform-warning);
        }

        /* ìƒíƒœ ë°°ì§€ */
        .status-badge {
            padding: 4px 12px;
            border-radius: var(--radius-full);
            font-size: var(--text-xs);
            font-weight: var(--font-bold);
            display: inline-block;
        }

        .status-badge--completed {
            background: rgba(16, 185, 129, 0.1);
            color: var(--platform-success);
        }

        .status-badge--pending {
            background: rgba(245, 158, 11, 0.1);
            color: var(--platform-warning);
        }

        .status-badge--failed {
            background: rgba(239, 68, 68, 0.1);
            color: var(--platform-danger);
        }

        .status-badge--refunded {
            background: rgba(107, 114, 128, 0.1);
            color: var(--text-secondary);
        }

        /* ê²°ì œ ë°©ë²• */
        .payment-method {
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            padding: 4px 12px;
            background: var(--surface);
            border-radius: var(--radius-md);
            font-size: var(--text-xs);
        }

        /* í˜ì´ì§€ë„¤ì´ì…˜ */
        .pagination {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-4);
            background: var(--surface);
            border-top: 2px solid var(--border);
        }

        .pagination-info {
            font-size: var(--text-sm);
            color: var(--text-secondary);
        }

        .pagination-controls {
            display: flex;
            gap: var(--space-2);
        }

        .pagination-btn {
            padding: var(--space-2) var(--space-3);
            border: 2px solid var(--border);
            border-radius: var(--radius-md);
            background: white;
            font-size: var(--text-sm);
            cursor: pointer;
            transition: all 0.2s;
        }

        .pagination-btn:hover:not(:disabled) {
            border-color: var(--platform-primary);
            color: var(--platform-primary);
        }

        .pagination-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .pagination-btn--active {
            background: var(--platform-primary);
            color: white;
            border-color: var(--platform-primary);
        }

        /* ì•¡ì…˜ ë²„íŠ¼ */
        .action-buttons {
            display: flex;
            gap: var(--space-2);
        }

        .action-btn {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-md);
            border: 2px solid var(--border);
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 16px;
        }

        .action-btn:hover {
            border-color: var(--platform-primary);
            background: var(--surface);
            transform: scale(1.1);
        }

        /* ëª¨ë‹¬ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(4px);
        }

        .modal-overlay--active {
            display: flex;
        }

        .modal {
            background: white;
            border-radius: var(--radius-xl);
            width: 90%;
            max-width: 700px;
            max-height: 90vh;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: modalSlideUp 0.3s ease-out;
        }

        @keyframes modalSlideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            padding: var(--space-5);
            border-bottom: 2px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: var(--text-xl);
            font-weight: var(--font-bold);
            color: var(--text-primary);
        }

        .modal-close {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-md);
            border: none;
            background: var(--surface);
            cursor: pointer;
            font-size: 20px;
            transition: all 0.2s;
        }

        .modal-close:hover {
            background: var(--platform-danger);
            color: white;
            transform: rotate(90deg);
        }

        .modal-body {
            padding: var(--space-5);
            max-height: calc(90vh - 160px);
            overflow-y: auto;
        }

        .modal-footer {
            padding: var(--space-4);
            border-top: 2px solid var(--border);
            display: flex;
            justify-content: flex-end;
            gap: var(--space-2);
        }

        /* ì •ë³´ ê·¸ë£¹ */
        .info-group {
            margin-bottom: var(--space-4);
        }

        .info-label {
            font-size: var(--text-sm);
            font-weight: var(--font-semibold);
            color: var(--text-secondary);
            margin-bottom: var(--space-2);
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            padding: var(--space-3);
            background: var(--surface);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-2);
        }

        .info-row__label {
            font-size: var(--text-sm);
            color: var(--text-secondary);
        }

        .info-row__value {
            font-size: var(--text-sm);
            font-weight: var(--font-semibold);
            color: var(--text-primary);
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 1400px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .chart-section {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 1024px) {
            .filter-row {
                flex-direction: column;
            }
        }

        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .transaction-table {
                display: block;
                overflow-x: auto;
            }
        }
    </style>
</head>

<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <div class="header__left">
                <button id="menuToggle" class="header__icon-button hidden-desktop">
                    <span>â˜°</span>
                </button>
                <a href="platform-dashboard.html" class="header__logo">
                    <span class="header__logo-icon">ğŸš€</span>
                    <span>GrowFit Platform</span>
                </a>
            </div>

            <div class="header__right">
                <button class="header__icon-button" title="ìƒˆë¡œê³ ì¹¨" onclick="refreshRevenue()">
                    <span>ğŸ”„</span>
                </button>

                <button id="notificationBtn" class="header__icon-button">
                    <span>ğŸ””</span>
                    <span class="header__badge">5</span>
                </button>

                <div id="profileBtn" class="header__profile">
                    <div class="header__avatar" style="background: linear-gradient(135deg, #6366f1, #ec4899);">í”Œ</div>
                    <span class="hidden-mobile">í”Œë«í¼ ê´€ë¦¬ì</span>
                    <span class="hidden-mobile">â–¼</span>
                </div>
            </div>
        </header>

        <div class="container">
            <!-- Sidebar -->
            <aside class="sidebar sidebar--open">
                <div class="sidebar__user">
                    <div class="sidebar__user-info">
                        <div class="sidebar__user-avatar"
                            style="background: linear-gradient(135deg, #6366f1, #ec4899);">í”Œ</div>
                        <div class="sidebar__user-details">
                            <div class="sidebar__user-name">í”Œë«í¼ ê´€ë¦¬ì</div>
                            <div class="sidebar__user-role">Platform Admin</div>
                        </div>
                    </div>
                </div>

                <nav class="sidebar__nav">
                    <ul class="sidebar__menu">
                        <li class="sidebar__menu-item">
                            <a href="platform-dashboard.html" class="sidebar__menu-link">
                                <span class="sidebar__menu-icon">ğŸ </span>
                                <span>í”Œë«í¼ ëŒ€ì‹œë³´ë“œ</span>
                            </a>
                        </li>
                        <li class="sidebar__menu-item">
                            <a href="organization-management.html" class="sidebar__menu-link">
                                <span class="sidebar__menu-icon">ğŸ¢</span>
                                <span>ì¡°ì§ ê´€ë¦¬</span>
                            </a>
                        </li>
                        <li class="sidebar__menu-item">
                            <a href="user-management.html" class="sidebar__menu-link">
                                <span class="sidebar__menu-icon">ğŸ‘¥</span>
                                <span>ì „ì²´ ì‚¬ìš©ì</span>
                            </a>
                        </li>
                        <li class="sidebar__menu-item">
                            <a href="revenue-billing.html" class="sidebar__menu-link sidebar__menu-link--active">
                                <span class="sidebar__menu-icon">ğŸ’°</span>
                                <span>ë§¤ì¶œ/ê³¼ê¸ˆ</span>
                            </a>
                        </li>
                        <li class="sidebar__menu-item">
                            <a href="analytics-reports.html" class="sidebar__menu-link">
                                <span class="sidebar__menu-icon">ğŸ“Š</span>
                                <span>ë¶„ì„ & ë¦¬í¬íŠ¸</span>
                            </a>
                        </li>
                        <li class="sidebar__menu-item">
                            <a href="system-monitoring.html" class="sidebar__menu-link">
                                <span class="sidebar__menu-icon">ğŸ”§</span>
                                <span>ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§</span>
                            </a>
                        </li>
                        <li class="sidebar__menu-item">
                            <a href="platform-settings.html" class="sidebar__menu-link">
                                <span class="sidebar__menu-icon">âš™ï¸</span>
                                <span>ì‹œìŠ¤í…œ ì„¤ì •</span>
                            </a>
                        </li>
                    </ul>
                </nav>

                <div class="sidebar__footer">
                    <div
                        style="padding: var(--space-3); background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(99, 102, 241, 0.1)); border-radius: var(--radius-md); font-size: var(--text-xs);">
                        <div style="color: var(--text-secondary); margin-bottom: var(--space-1);">ì´ë²ˆ ë‹¬ MRR</div>
                        <div
                            style="font-weight: var(--font-bold); color: var(--platform-success); font-size: var(--text-lg);">
                            $487K</div>
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="main">
                <!-- í˜ì´ì§€ í—¤ë” -->
                <div class="page-header">
                    <div class="page-header__left">
                        <h1>ğŸ’° ë§¤ì¶œ/ê³¼ê¸ˆ ê´€ë¦¬</h1>
                        <p>ì „ì²´ ë§¤ì¶œ í˜„í™©ê³¼ ê±°ë˜ ë‚´ì—­ì„ ê´€ë¦¬í•˜ì„¸ìš”</p>
                    </div>
                    <div class="page-header__actions">
                        <button class="btn btn--outline" onclick="exportRevenue()">
                            ğŸ“¥ ë¦¬í¬íŠ¸ ë‚´ë³´ë‚´ê¸°
                        </button>
                        <button class="btn btn--outline" onclick="showRevenueAnalytics()">
                            ğŸ“Š ìƒì„¸ ë¶„ì„
                        </button>
                        <button class="btn btn--primary" onclick="generateInvoice()">
                            ğŸ“„ ì²­êµ¬ì„œ ìƒì„±
                        </button>
                    </div>
                </div>

                <!-- í†µê³„ ì¹´ë“œ -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-card__icon">ğŸ’µ</div>
                        <div class="stat-card__label">ì›”ê°„ ë°˜ë³µ ë§¤ì¶œ (MRR)</div>
                        <div class="stat-card__value">$487K</div>
                        <div class="stat-card__change stat-card__change--up">
                            <span>â†‘ 24.7%</span>
                        </div>
                        <div class="stat-card__meta">ì „ì›” ëŒ€ë¹„ $96.3K ì¦ê°€</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-card__icon">ğŸ“ˆ</div>
                        <div class="stat-card__label">ì—°ê°„ ë°˜ë³µ ë§¤ì¶œ (ARR)</div>
                        <div class="stat-card__value">$5.84M</div>
                        <div class="stat-card__change stat-card__change--up">
                            <span>â†‘ 28.3%</span>
                        </div>
                        <div class="stat-card__meta">MRR Ã— 12 ê¸°ì¤€</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-card__icon">ğŸ’³</div>
                        <div class="stat-card__label">ì´ë²ˆ ë‹¬ ê±°ë˜ ê±´ìˆ˜</div>
                        <div class="stat-card__value">247</div>
                        <div class="stat-card__change stat-card__change--up">
                            <span>â†‘ 12.5%</span>
                        </div>
                        <div class="stat-card__meta">ì„±ê³µë¥ : 98.4%</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-card__icon">ğŸ“Š</div>
                        <div class="stat-card__label">í‰ê·  ê±°ë˜ì•¡ (ARPU)</div>
                        <div class="stat-card__value">$1,972</div>
                        <div class="stat-card__change stat-card__change--up">
                            <span>â†‘ 8.9%</span>
                        </div>
                        <div class="stat-card__meta">ì¡°ì§ë‹¹ í‰ê·  ë§¤ì¶œ</div>
                    </div>
                </div>

                <!-- ì°¨íŠ¸ ì„¹ì…˜ -->
                <div class="chart-section">
                    <!-- ë§¤ì¶œ ì¶”ì´ ì°¨íŠ¸ -->
                    <div class="chart-card">
                        <div class="chart-card__header">
                            <div>
                                <h3 class="chart-card__title">ğŸ“ˆ ì›”ë³„ ë§¤ì¶œ ì¶”ì´</h3>
                                <p class="chart-card__subtitle">ìµœê·¼ 12ê°œì›” MRR ë³€í™”</p>
                            </div>
                            <select class="filter-select" style="width: 150px;" onchange="changeRevenueChart(this.value)">
                                <option value="mrr">MRR</option>
                                <option value="arr">ARR</option>
                                <option value="transactions">ê±°ë˜ ê±´ìˆ˜</option>
                                <option value="arpu">ARPU</option>
                            </select>
                        </div>
                        <div class="chart-placeholder">
                            ğŸ“Š ë§¤ì¶œ ì¶”ì´ ì°¨íŠ¸
                            <br>
                            <span style="font-size: var(--text-xs);">(Chart.js ë˜ëŠ” Rechartsë¡œ êµ¬í˜„)</span>
                        </div>
                    </div>

                    <!-- í”Œëœë³„ ë§¤ì¶œ ë¶„í¬ -->
                    <div class="chart-card">
                        <div class="chart-card__header">
                            <div>
                                <h3 class="chart-card__title">ğŸ¯ í”Œëœë³„ ë§¤ì¶œ ë¶„í¬</h3>
                                <p class="chart-card__subtitle">ì´ë²ˆ ë‹¬ ê¸°ì¤€</p>
                            </div>
                        </div>
                        <div class="plan-distribution">
                            <div class="plan-item">
                                <div class="plan-item__info">
                                    <div class="plan-item__icon" style="background: linear-gradient(135deg, #6366f1, #8b5cf6);">
                                        ğŸ‘‘
                                    </div>
                                    <div class="plan-item__details">
                                        <div class="plan-item__name">Enterprise</div>
                                        <div class="plan-item__count">47ê°œ ì¡°ì§</div>
                                    </div>
                                </div>
                                <div class="plan-item__revenue">
                                    <div class="plan-item__amount">$141K</div>
                                    <div class="plan-item__percentage">29%</div>
                                </div>
                            </div>

                            <div class="plan-item">
                                <div class="plan-item__info">
                                    <div class="plan-item__icon" style="background: linear-gradient(135deg, #3b82f6, #06b6d4);">
                                        â­
                                    </div>
                                    <div class="plan-item__details">
                                        <div class="plan-item__name">Professional</div>
                                        <div class="plan-item__count">89ê°œ ì¡°ì§</div>
                                    </div>
                                </div>
                                <div class="plan-item__revenue">
                                    <div class="plan-item__amount">$89K</div>
                                    <div class="plan-item__percentage">18%</div>
                                </div>
                            </div>

                            <div class="plan-item">
                                <div class="plan-item__info">
                                    <div class="plan-item__icon" style="background: linear-gradient(135deg, #10b981, #34d399);">
                                        ğŸ’«
                                    </div>
                                    <div class="plan-item__details">
                                        <div class="plan-item__name">Starter</div>
                                        <div class="plan-item__count">76ê°œ ì¡°ì§</div>
                                    </div>
                                </div>
                                <div class="plan-item__revenue">
                                    <div class="plan-item__amount">$23K</div>
                                    <div class="plan-item__percentage">5%</div>
                                </div>
                            </div>

                            <div class="plan-item">
                                <div class="plan-item__info">
                                    <div class="plan-item__icon" style="background: rgba(107, 114, 128, 0.1);">
                                        ğŸ†“
                                    </div>
                                    <div class="plan-item__details">
                                        <div class="plan-item__name">Free</div>
                                        <div class="plan-item__count">35ê°œ ì¡°ì§</div>
                                    </div>
                                </div>
                                <div class="plan-item__revenue">
                                    <div class="plan-item__amount">$0</div>
                                    <div class="plan-item__percentage">0%</div>
                                </div>
                            </div>
                        </div>

                        <div style="margin-top: var(--space-4); padding: var(--space-3); background: var(--surface); border-radius: var(--radius-md); font-size: var(--text-sm);">
                            <div style="display: flex; justify-content: space-between; margin-bottom: var(--space-2);">
                                <span style="color: var(--text-secondary);">ì´ ë§¤ì¶œ</span>
                                <span style="font-weight: var(--font-bold); color: var(--platform-success);">$487K</span>
                            </div>
                            <div style="display: flex; justify-content: space-between;">
                                <span style="color: var(--text-secondary);">í‰ê·  ê±°ë˜ì•¡</span>
                                <span style="font-weight: var(--font-bold); color: var(--text-primary);">$1,972</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- í•„í„° ì„¹ì…˜ -->
                <div class="filter-section">
                    <div class="filter-row">
                        <div class="filter-group">
                            <div class="filter-label">ğŸ“… ê¸°ê°„</div>
                            <select class="filter-select" onchange="filterByPeriod(this.value)">
                                <option value="month">ì´ë²ˆ ë‹¬</option>
                                <option value="last-month">ì§€ë‚œ ë‹¬</option>
                                <option value="quarter">ìµœê·¼ 3ê°œì›”</option>
                                <option value="year">ì˜¬í•´</option>
                                <option value="custom">ì‚¬ìš©ì ì§€ì •</option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <div class="filter-label">ğŸ”„ ìƒíƒœ</div>
                            <select class="filter-select" onchange="filterByStatus(this.value)">
                                <option value="">ì „ì²´ ìƒíƒœ</option>
                                <option value="completed">ì™„ë£Œ</option>
                                <option value="pending">ëŒ€ê¸° ì¤‘</option>
                                <option value="failed">ì‹¤íŒ¨</option>
                                <option value="refunded">í™˜ë¶ˆ</option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <div class="filter-label">ğŸ“Š í”Œëœ</div>
                            <select class="filter-select" onchange="filterByPlan(this.value)">
                                <option value="">ì „ì²´ í”Œëœ</option>
                                <option value="enterprise">Enterprise</option>
                                <option value="professional">Professional</option>
                                <option value="starter">Starter</option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <div class="filter-label">ğŸ’³ ê²°ì œ ë°©ë²•</div>
                            <select class="filter-select" onchange="filterByPaymentMethod(this.value)">
                                <option value="">ì „ì²´</option>
                                <option value="card">ì‹ ìš©ì¹´ë“œ</option>
                                <option value="bank">ê³„ì¢Œì´ì²´</option>
                                <option value="paypal">PayPal</option>
                            </select>
                        </div>

                        <button class="btn btn--outline" onclick="resetFilters()">
                            ğŸ”„ ì´ˆê¸°í™”
                        </button>
                    </div>
                </div>

                <!-- ê±°ë˜ ë‚´ì—­ í…Œì´ë¸” -->
                <div class="transaction-table-container">
                    <table class="transaction-table">
                        <thead>
                            <tr>
                                <th class="sortable" onclick="sortTable('id')">
                                    ê±°ë˜ ID <span>â†•ï¸</span>
                                </th>
                                <th class="sortable" onclick="sortTable('organization')">
                                    ì¡°ì§ <span>â†•ï¸</span>
                                </th>
                                <th class="sortable" onclick="sortTable('plan')">
                                    í”Œëœ <span>â†•ï¸</span>
                                </th>
                                <th class="sortable" onclick="sortTable('amount')">
                                    ê¸ˆì•¡ <span>â†•ï¸</span>
                                </th>
                                <th class="sortable" onclick="sortTable('status')">
                                    ìƒíƒœ <span>â†•ï¸</span>
                                </th>
                                <th class="sortable" onclick="sortTable('method')">
                                    ê²°ì œ ë°©ë²• <span>â†•ï¸</span>
                                </th>
                                <th class="sortable" onclick="sortTable('date')">
                                    ê±°ë˜ì¼ <span>â†•ï¸</span>
                                </th>
                                <th style="width: 100px;">ì•¡ì…˜</th>
                            </tr>
                        </thead>
                        <tbody id="transactionsTableBody">
                            <!-- ê±°ë˜ 1 -->
                            <tr data-transaction-id="txn-1" onclick="viewTransactionDetail('txn-1')">
                                <td>
                                    <div class="transaction-info">
                                        <div class="transaction-id">TXN-2024-1001</div>
                                    </div>
                                </td>
                                <td>
                                    <div class="transaction-org">ê¸€ë¡œë²Œë¬´ì—­</div>
                                </td>
                                <td>
                                    <span style="font-weight: var(--font-semibold); color: var(--platform-primary);">Enterprise</span>
                                </td>
                                <td>
                                    <span class="amount amount--positive">$2,999</span>
                                </td>
                                <td>
                                    <span class="status-badge status-badge--completed">ì™„ë£Œ</span>
                                </td>
                                <td>
                                    <div class="payment-method">
                                        ğŸ’³ ì‹ ìš©ì¹´ë“œ
                                    </div>
                                </td>
                                <td style="color: var(--text-secondary);">2024-10-01 14:23</td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-buttons">
                                        <button class="action-btn" onclick="viewTransactionDetail('txn-1')" title="ìƒì„¸ ë³´ê¸°">
                                            ğŸ‘ï¸
                                        </button>
                                        <button class="action-btn" onclick="downloadInvoice('txn-1')" title="ì²­êµ¬ì„œ">
                                            ğŸ“„
                                        </button>
                                        <button class="action-btn" onclick="showMoreActions('txn-1')" title="ë”ë³´ê¸°">
                                            â‹®
                                        </button>
                                    </div>
                                </td>
                            </tr>

                            <!-- ê±°ë˜ 2 -->
                            <tr data-transaction-id="txn-2" onclick="viewTransactionDetail('txn-2')">
                                <td>
                                    <div class="transaction-info">
                                        <div class="transaction-id">TXN-2024-1002</div>
                                    </div>
                                </td>
                                <td>
                                    <div class="transaction-org">í…Œí¬ìŠ¤íƒ€íŠ¸ì—… Inc.</div>
                                </td>
                                <td>
                                    <span style="font-weight: var(--font-semibold); color: var(--platform-blue);">Professional</span>
                                </td>
                                <td>
                                    <span class="amount amount--positive">$999</span>
                                </td>
                                <td>
                                    <span class="status-badge status-badge--completed">ì™„ë£Œ</span>
                                </td>
                                <td>
                                    <div class="payment-method">
                                        ğŸ¦ ê³„ì¢Œì´ì²´
                                    </div>
                                </td>
                                <td style="color: var(--text-secondary);">2024-10-01 10:15</td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-buttons">
                                        <button class="action-btn" onclick="viewTransactionDetail('txn-2')" title="ìƒì„¸ ë³´ê¸°">
                                            ğŸ‘ï¸
                                        </button>
                                        <button class="action-btn" onclick="downloadInvoice('txn-2')" title="ì²­êµ¬ì„œ">
                                            ğŸ“„
                                        </button>
                                        <button class="action-btn" onclick="showMoreActions('txn-2')" title="ë”ë³´ê¸°">
                                            â‹®
                                        </button>
                                    </div>
                                </td>
                            </tr>

                            <!-- ê±°ë˜ 3 -->
                            <tr data-transaction-id="txn-3" onclick="viewTransactionDetail('txn-3')">
                                <td>
                                    <div class="transaction-info">
                                        <div class="transaction-id">TXN-2024-1003</div>
                                    </div>
                                </td>
                                <td>
                                    <div class="transaction-org">AIì—°êµ¬ì†Œ</div>
                                </td>
                                <td>
                                    <span style="font-weight: var(--font-semibold); color: var(--platform-blue);">Professional</span>
                                </td>
                                <td>
                                    <span class="amount amount--positive">$999</span>
                                </td>
                                <td>
                                    <span class="status-badge status-badge--pending">ëŒ€ê¸° ì¤‘</span>
                                </td>
                                <td>
                                    <div class="payment-method">
                                        ğŸ’³ ì‹ ìš©ì¹´ë“œ
                                    </div>
                                </td>
                                <td style="color: var(--text-secondary);">2024-10-08 16:42</td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-buttons">
                                        <button class="action-btn" onclick="viewTransactionDetail('txn-3')" title="ìƒì„¸ ë³´ê¸°">
                                            ğŸ‘ï¸
                                        </button>
                                        <button class="action-btn" onclick="downloadInvoice('txn-3')" title="ì²­êµ¬ì„œ">
                                            ğŸ“„
                                        </button>
                                        <button class="action-btn" onclick="showMoreActions('txn-3')" title="ë”ë³´ê¸°">
                                            â‹®
                                        </button>
                                    </div>
                                </td>
                            </tr>

                            <!-- ê±°ë˜ 4 -->
                            <tr data-transaction-id="txn-4" onclick="viewTransactionDetail('txn-4')">
                                <td>
                                    <div class="transaction-info">
                                        <div class="transaction-id">TXN-2024-0998</div>
                                    </div>
                                </td>
                                <td>
                                    <div class="transaction-org">ë””ìì¸ìŠ¤íŠœë””ì˜¤</div>
                                </td>
                                <td>
                                    <span style="font-weight: var(--font-semibold); color: var(--platform-green);">Starter</span>
                                </td>
                                <td>
                                    <span class="amount amount--positive">$299</span>
                                </td>
                                <td>
                                    <span class="status-badge status-badge--completed">ì™„ë£Œ</span>
                                </td>
                                <td>
                                    <div class="payment-method">
                                        ğŸ’³ ì‹ ìš©ì¹´ë“œ
                                    </div>
                                </td>
                                <td style="color: var(--text-secondary);">2024-09-28 11:20</td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-buttons">
                                        <button class="action-btn" onclick="viewTransactionDetail('txn-4')" title="ìƒì„¸ ë³´ê¸°">
                                            ğŸ‘ï¸
                                        </button>
                                        <button class="action-btn" onclick="downloadInvoice('txn-4')" title="ì²­êµ¬ì„œ">
                                            ğŸ“„
                                        </button>
                                        <button class="action-btn" onclick="showMoreActions('txn-4')" title="ë”ë³´ê¸°">
                                            â‹®
                                        </button>
                                    </div>
                                </td>
                            </tr>

                            <!-- ê±°ë˜ 5 -->
                            <tr data-transaction-id="txn-5" onclick="viewTransactionDetail('txn-5')">
                                <td>
                                    <div class="transaction-info">
                                        <div class="transaction-id">TXN-2024-0995</div>
                                    </div>
                                </td>
                                <td>
                                    <div class="transaction-org">ì»¨ì„¤íŒ…ê·¸ë£¹</div>
                                </td>
                                <td>
                                    <span style="font-weight: var(--font-semibold); color: var(--platform-primary);">Enterprise</span>
                                </td>
                                <td>
                                    <span class="amount amount--positive">$2,999</span>
                                </td>
                                <td>
                                    <span class="status-badge status-badge--completed">ì™„ë£Œ</span>
                                </td>
                                <td>
                                    <div class="payment-method">
                                        ğŸ¦ ê³„ì¢Œì´ì²´
                                    </div>
                                </td>
                                <td style="color: var(--text-secondary);">2024-09-25 09:45</td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-buttons">
                                        <button class="action-btn" onclick="viewTransactionDetail('txn-5')" title="ìƒì„¸ ë³´ê¸°">
                                            ğŸ‘ï¸
                                        </button>
                                        <button class="action-btn" onclick="downloadInvoice('txn-5')" title="ì²­êµ¬ì„œ">
                                            ğŸ“„
                                        </button>
                                        <button class="action-btn" onclick="showMoreActions('txn-5')" title="ë”ë³´ê¸°">
                                            â‹®
                                        </button>
                                    </div>
                                </td>
                            </tr>

                            <!-- ê±°ë˜ 6 (ì‹¤íŒ¨) -->
                            <tr data-transaction-id="txn-6" onclick="viewTransactionDetail('txn-6')">
                                <td>
                                    <div class="transaction-info">
                                        <div class="transaction-id">TXN-2024-0992</div>
                                    </div>
                                </td>
                                <td>
                                    <div class="transaction-org">ì—ë“€í…Œí¬</div>
                                </td>
                                <td>
                                    <span style="font-weight: var(--font-semibold); color: var(--platform-green);">Starter</span>
                                </td>
                                <td>
                                    <span class="amount amount--negative">$299</span>
                                </td>
                                <td>
                                    <span class="status-badge status-badge--failed">ì‹¤íŒ¨</span>
                                </td>
                                <td>
                                    <div class="payment-method">
                                        ğŸ’³ ì‹ ìš©ì¹´ë“œ
                                    </div>
                                </td>
                                <td style="color: var(--text-secondary);">2024-09-20 15:30</td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-buttons">
                                        <button class="action-btn" onclick="viewTransactionDetail('txn-6')" title="ìƒì„¸ ë³´ê¸°">
                                            ğŸ‘ï¸
                                        </button>
                                        <button class="action-btn" onclick="retryTransaction('txn-6')" title="ì¬ì‹œë„">
                                            ğŸ”„
                                        </button>
                                        <button class="action-btn" onclick="showMoreActions('txn-6')" title="ë”ë³´ê¸°">
                                            â‹®
                                        </button>
                                    </div>
                                </td>
                            </tr>

                            <!-- ê±°ë˜ 7 (í™˜ë¶ˆ) -->
                            <tr data-transaction-id="txn-7" onclick="viewTransactionDetail('txn-7')">
                                <td>
                                    <div class="transaction-info">
                                        <div class="transaction-id">TXN-2024-0987</div>
                                    </div>
                                </td>
                                <td>
                                    <div class="transaction-org">ë©”ë””ì»¬ì„¼í„°</div>
                                </td>
                                <td>
                                    <span style="font-weight: var(--font-semibold); color: var(--platform-blue);">Professional</span>
                                </td>
                                <td>
                                    <span class="amount amount--negative">-$999</span>
                                </td>
                                <td>
                                    <span class="status-badge status-badge--refunded">í™˜ë¶ˆ</span>
                                </td>
                                <td>
                                    <div class="payment-method">
                                        ğŸ’³ ì‹ ìš©ì¹´ë“œ
                                    </div>
                                </td>
                                <td style="color: var(--text-secondary);">2024-09-15 13:10</td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-buttons">
                                        <button class="action-btn" onclick="viewTransactionDetail('txn-7')" title="ìƒì„¸ ë³´ê¸°">
                                            ğŸ‘ï¸
                                        </button>
                                        <button class="action-btn" onclick="downloadInvoice('txn-7')" title="ì²­êµ¬ì„œ">
                                            ğŸ“„
                                        </button>
                                        <button class="action-btn" onclick="showMoreActions('txn-7')" title="ë”ë³´ê¸°">
                                            â‹®
                                        </button>
                                    </div>
                                </td>
                            </tr>

                            <!-- ê±°ë˜ 8 -->
                            <tr data-transaction-id="txn-8" onclick="viewTransactionDetail('txn-8')">
                                <td>
                                    <div class="transaction-info">
                                        <div class="transaction-id">TXN-2024-0984</div>
                                    </div>
                                </td>
                                <td>
                                    <div class="transaction-org">ê¸€ë¡œë²Œë¬´ì—­</div>
                                </td>
                                <td>
                                    <span style="font-weight: var(--font-semibold); color: var(--platform-primary);">Enterprise</span>
                                </td>
                                <td>
                                    <span class="amount amount--positive">$2,999</span>
                                </td>
                                <td>
                                    <span class="status-badge status-badge--completed">ì™„ë£Œ</span>
                                </td>
                                <td>
                                    <div class="payment-method">
                                        ğŸ’³ ì‹ ìš©ì¹´ë“œ
                                    </div>
                                </td>
                                <td style="color: var(--text-secondary);">2024-09-01 14:23</td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-buttons">
                                        <button class="action-btn" onclick="viewTransactionDetail('txn-8')" title="ìƒì„¸ ë³´ê¸°">
                                            ğŸ‘ï¸
                                        </button>
                                        <button class="action-btn" onclick="downloadInvoice('txn-8')" title="ì²­êµ¬ì„œ">
                                            ğŸ“„
                                        </button>
                                        <button class="action-btn" onclick="showMoreActions('txn-8')" title="ë”ë³´ê¸°">
                                            â‹®
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
                    <div class="pagination">
                        <div class="pagination-info">
                            1-8 / 247ê°œ ê±°ë˜
                        </div>
                        <div class="pagination-controls">
                            <button class="pagination-btn" disabled>â—€ ì´ì „</button>
                            <button class="pagination-btn pagination-btn--active">1</button>
                            <button class="pagination-btn">2</button>
                            <button class="pagination-btn">3</button>
                            <button class="pagination-btn">...</button>
                            <button class="pagination-btn">31</button>
                            <button class="pagination-btn">ë‹¤ìŒ â–¶</button>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- ê±°ë˜ ìƒì„¸ ëª¨ë‹¬ -->
        <div id="transactionDetailModal" class="modal-overlay">
            <div class="modal">
                <div class="modal-header">
                    <h2 class="modal-title">ğŸ’³ ê±°ë˜ ìƒì„¸ ì •ë³´</h2>
                    <button class="modal-close" onclick="closeTransactionDetailModal()">âœ•</button>
                </div>
                <div class="modal-body" id="transactionDetailContent">
                    <!-- ë™ì ìœ¼ë¡œ ì±„ì›Œì§ -->
                </div>
                <div class="modal-footer">
                    <button class="btn btn--outline" onclick="closeTransactionDetailModal()">ë‹«ê¸°</button>
                    <button class="btn btn--primary" onclick="downloadCurrentInvoice()">ì²­êµ¬ì„œ ë‹¤ìš´ë¡œë“œ</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ê³µí†µ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="../common/layout.js"></script>
    <script src="../common/utils.js"></script>

    <!-- í˜ì´ì§€ ì „ìš© ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
        // ========== Revenue & Billing ì „ìš© ë¡œì§ ==========

        // ì „ì—­ ë³€ìˆ˜
        let transactionsData = [];
        let filteredTransactions = [];
        let sortColumn = 'date';
        let sortDirection = 'desc';
        let currentPage = 1;
        let itemsPerPage = 8;
        let currentTransactionId = null;

        // ========== ì´ˆê¸°í™” ==========
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Revenue & Billing í˜ì´ì§€ ì´ˆê¸°í™”');
            
            initializeRevenue();
            loadRevenueData();
        });

        function initializeRevenue() {
            // ì´ˆê¸° ë°ì´í„° ë¡œë“œ
            transactionsData = getAllTransactions();
            filteredTransactions = [...transactionsData];
            
            // URL íŒŒë¼ë¯¸í„° í™•ì¸
            const urlParams = new URLSearchParams(window.location.search);
            const action = urlParams.get('action');
            const txnId = urlParams.get('id');

            if (action === 'view' && txnId) {
                viewTransactionDetail(txnId);
            }
        }

        function loadRevenueData() {
            // ì‹¤ì œë¡œëŠ” ì„œë²„ì—ì„œ ë°ì´í„° ê°€ì ¸ì˜´
            console.log('ë§¤ì¶œ ë°ì´í„° ë¡œë“œ ì™„ë£Œ:', transactionsData.length);
            calculateRevenueMetrics();
        }

        // ========== ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ==========
        function getAllTransactions() {
            // ì‹¤ì œë¡œëŠ” API í˜¸ì¶œ
            return [
                {
                    id: 'txn-1',
                    transactionId: 'TXN-2024-1001',
                    organization: 'org-1',
                    organizationName: 'ê¸€ë¡œë²Œë¬´ì—­',
                    plan: 'enterprise',
                    amount: 2999,
                    status: 'completed',
                    method: 'card',
                    date: '2024-10-01 14:23',
                    description: 'Enterprise í”Œëœ ì›”ê°„ êµ¬ë…',
                    invoiceUrl: '#'
                },
                {
                    id: 'txn-2',
                    transactionId: 'TXN-2024-1002',
                    organization: 'org-2',
                    organizationName: 'í…Œí¬ìŠ¤íƒ€íŠ¸ì—… Inc.',
                    plan: 'professional',
                    amount: 999,
                    status: 'completed',
                    method: 'bank',
                    date: '2024-10-01 10:15',
                    description: 'Professional í”Œëœ ì›”ê°„ êµ¬ë…',
                    invoiceUrl: '#'
                },
                {
                    id: 'txn-3',
                    transactionId: 'TXN-2024-1003',
                    organization: 'org-3',
                    organizationName: 'AIì—°êµ¬ì†Œ',
                    plan: 'professional',
                    amount: 999,
                    status: 'pending',
                    method: 'card',
                    date: '2024-10-08 16:42',
                    description: 'Professional í”Œëœ ì›”ê°„ êµ¬ë…',
                    invoiceUrl: '#'
                },
                {
                    id: 'txn-4',
                    transactionId: 'TXN-2024-0998',
                    organization: 'org-4',
                    organizationName: 'ë””ìì¸ìŠ¤íŠœë””ì˜¤',
                    plan: 'starter',
                    amount: 299,
                    status: 'completed',
                    method: 'card',
                    date: '2024-09-28 11:20',
                    description: 'Starter í”Œëœ ì›”ê°„ êµ¬ë…',
                    invoiceUrl: '#'
                },
                {
                    id: 'txn-5',
                    transactionId: 'TXN-2024-0995',
                    organization: 'org-5',
                    organizationName: 'ì»¨ì„¤íŒ…ê·¸ë£¹',
                    plan: 'enterprise',
                    amount: 2999,
                    status: 'completed',
                    method: 'bank',
                    date: '2024-09-25 09:45',
                    description: 'Enterprise í”Œëœ ì›”ê°„ êµ¬ë…',
                    invoiceUrl: '#'
                },
                {
                    id: 'txn-6',
                    transactionId: 'TXN-2024-0992',
                    organization: 'org-6',
                    organizationName: 'ì—ë“€í…Œí¬',
                    plan: 'starter',
                    amount: 299,
                    status: 'failed',
                    method: 'card',
                    date: '2024-09-20 15:30',
                    description: 'Starter í”Œëœ ì›”ê°„ êµ¬ë…',
                    failureReason: 'ì¹´ë“œ í•œë„ ì´ˆê³¼',
                    invoiceUrl: '#'
                },
                {
                    id: 'txn-7',
                    transactionId: 'TXN-2024-0987',
                    organization: 'org-7',
                    organizationName: 'ë©”ë””ì»¬ì„¼í„°',
                    plan: 'professional',
                    amount: -999,
                    status: 'refunded',
                    method: 'card',
                    date: '2024-09-15 13:10',
                    description: 'Professional í”Œëœ í™˜ë¶ˆ',
                    refundReason: 'ê³ ê° ìš”ì²­',
                    invoiceUrl: '#'
                },
                {
                    id: 'txn-8',
                    transactionId: 'TXN-2024-0984',
                    organization: 'org-1',
                    organizationName: 'ê¸€ë¡œë²Œë¬´ì—­',
                    plan: 'enterprise',
                    amount: 2999,
                    status: 'completed',
                    method: 'card',
                    date: '2024-09-01 14:23',
                    description: 'Enterprise í”Œëœ ì›”ê°„ êµ¬ë…',
                    invoiceUrl: '#'
                }
            ];
        }

        // ========== ë§¤ì¶œ ì§€í‘œ ê³„ì‚° ==========
        function calculateRevenueMetrics() {
            const completedTransactions = transactionsData.filter(t => t.status === 'completed');
            
            const metrics = {
                mrr: completedTransactions.reduce((sum, t) => sum + Math.abs(t.amount), 0),
                arr: completedTransactions.reduce((sum, t) => sum + Math.abs(t.amount), 0) * 12,
                transactionCount: transactionsData.length,
                arpu: completedTransactions.length > 0 
                    ? completedTransactions.reduce((sum, t) => sum + Math.abs(t.amount), 0) / completedTransactions.length 
                    : 0
            };

            console.log('ë§¤ì¶œ ì§€í‘œ:', metrics);
            return metrics;
        }

        // ========== í•„í„°ë§ ==========
        function filterByPeriod(period) {
            const now = new Date();
            
            if (period === 'custom') {
                const start = prompt('ì‹œì‘ì¼ (YYYY-MM-DD):');
                const end = prompt('ì¢…ë£Œì¼ (YYYY-MM-DD):');
                
                if (start && end) {
                    filteredTransactions = transactionsData.filter(txn => {
                        const txnDate = new Date(txn.date);
                        return txnDate >= new Date(start) && txnDate <= new Date(end);
                    });
                }
            } else {
                filteredTransactions = transactionsData.filter(txn => {
                    const txnDate = new Date(txn.date);
                    
                    switch(period) {
                        case 'month':
                            return txnDate.getMonth() === now.getMonth() && 
                                   txnDate.getFullYear() === now.getFullYear();
                        case 'last-month':
                            const lastMonth = new Date(now.getFullYear(), now.getMonth() - 1);
                            return txnDate.getMonth() === lastMonth.getMonth() && 
                                   txnDate.getFullYear() === lastMonth.getFullYear();
                        case 'quarter':
                            const quarterAgo = new Date(now - 90 * 24 * 60 * 60 * 1000);
                            return txnDate >= quarterAgo;
                        case 'year':
                            return txnDate.getFullYear() === now.getFullYear();
                        default:
                            return true;
                    }
                });
            }
            
            currentPage = 1;
            renderTransactionsTable();
        }

        function filterByStatus(status) {
            if (!status) {
                filteredTransactions = [...transactionsData];
            } else {
                filteredTransactions = transactionsData.filter(txn => txn.status === status);
            }
            currentPage = 1;
            renderTransactionsTable();
        }

        function filterByPlan(plan) {
            if (!plan) {
                filteredTransactions = [...transactionsData];
            } else {
                filteredTransactions = transactionsData.filter(txn => txn.plan === plan);
            }
            currentPage = 1;
            renderTransactionsTable();
        }

        function filterByPaymentMethod(method) {
            if (!method) {
                filteredTransactions = [...transactionsData];
            } else {
                filteredTransactions = transactionsData.filter(txn => txn.method === method);
            }
            currentPage = 1;
            renderTransactionsTable();
        }

        function resetFilters() {
            // ëª¨ë“  í•„í„° ì´ˆê¸°í™”
            document.querySelectorAll('.filter-select').forEach(select => {
                select.selectedIndex = 0;
            });
            
            filteredTransactions = [...transactionsData];
            currentPage = 1;
            renderTransactionsTable();
            
            window.GrowFitUtils.showToast('í•„í„°ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤', 'info');
        }

        // ========== ì •ë ¬ ==========
        function sortTable(column) {
            if (sortColumn === column) {
                sortDirection = sortDirection === 'asc' ? 'desc' : 'asc';
            } else {
                sortColumn = column;
                sortDirection = 'asc';
            }

            filteredTransactions.sort((a, b) => {
                let aVal = a[column];
                let bVal = b[column];

                // ìˆ«ì ë¹„êµ
                if (typeof aVal === 'number') {
                    return sortDirection === 'asc' ? aVal - bVal : bVal - aVal;
                }

                // ë¬¸ìì—´ ë¹„êµ
                if (sortDirection === 'asc') {
                    return aVal > bVal ? 1 : -1;
                } else {
                    return aVal < bVal ? 1 : -1;
                }
            });

            renderTransactionsTable();
            
            window.GrowFitUtils.showToast(`${column}ë¡œ ì •ë ¬ë˜ì—ˆìŠµë‹ˆë‹¤`, 'info');
        }

        // ========== í…Œì´ë¸” ë Œë”ë§ ==========
        function renderTransactionsTable() {
            // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ë™ì ìœ¼ë¡œ í…Œì´ë¸” ìƒì„±
            console.log('í…Œì´ë¸” ë Œë”ë§:', filteredTransactions.length, 'ê°œ ê±°ë˜');
        }

        // ========== ê±°ë˜ ìƒì„¸ ë³´ê¸° ==========
        function viewTransactionDetail(txnId) {
            const txn = transactionsData.find(t => t.id === txnId);
            
            if (!txn) {
                window.GrowFitUtils.showToast('ê±°ë˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'error');
                return;
            }

            currentTransactionId = txnId;

            const detailHtml = `
                <div style="display: grid; gap: var(--space-4);">
                    <div class="info-group">
                        <div class="info-label">ê±°ë˜ ì •ë³´</div>
                        <div class="info-row">
                            <div class="info-row__label">ê±°ë˜ ID</div>
                            <div class="info-row__value" style="font-family: 'Courier New', monospace;">${txn.transactionId}</div>
                        </div>
                        <div class="info-row">
                            <div class="info-row__label">ì¡°ì§</div>
                            <div class="info-row__value">${txn.organizationName}</div>
                        </div>
                        <div class="info-row">
                            <div class="info-row__label">í”Œëœ</div>
                            <div class="info-row__value">${getPlanName(txn.plan)}</div>
                        </div>
                        <div class="info-row">
                            <div class="info-row__label">ì„¤ëª…</div>
                            <div class="info-row__value">${txn.description}</div>
                        </div>
                    </div>

                    <div class="info-group">
                        <div class="info-label">ê²°ì œ ì •ë³´</div>
                        <div class="info-row">
                            <div class="info-row__label">ê¸ˆì•¡</div>
                            <div class="info-row__value" style="font-size: var(--text-xl); font-weight: var(--font-bold); color: ${txn.amount >= 0 ? 'var(--platform-success)' : 'var(--platform-danger)'};">
                                ${txn.amount >= 0 ? '$' : '-$'}${Math.abs(txn.amount).toLocaleString()}
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="info-row__label">ìƒíƒœ</div>
                            <div class="info-row__value">
                                <span class="status-badge status-badge--${txn.status}">${getStatusName(txn.status)}</span>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="info-row__label">ê²°ì œ ë°©ë²•</div>
                            <div class="info-row__value">${getPaymentMethodName(txn.method)}</div>
                        </div>
                        <div class="info-row">
                            <div class="info-row__label">ê±°ë˜ì¼ì‹œ</div>
                            <div class="info-row__value">${txn.date}</div>
                        </div>
                    </div>

                    ${txn.failureReason ? `
                    <div class="info-group">
                        <div class="info-label">ì‹¤íŒ¨ ì •ë³´</div>
                        <div style="padding: var(--space-3); background: rgba(239, 68, 68, 0.1); border-radius: var(--radius-md); color: var(--platform-danger);">
                            âš ï¸ ${txn.failureReason}
                        </div>
                    </div>
                    ` : ''}

                    ${txn.refundReason ? `
                    <div class="info-group">
                        <div class="info-label">í™˜ë¶ˆ ì •ë³´</div>
                        <div style="padding: var(--space-3); background: var(--surface); border-radius: var(--radius-md);">
                            ğŸ“ ì‚¬ìœ : ${txn.refundReason}
                        </div>
                    </div>
                    ` : ''}

                    <div class="info-group">
                        <div class="info-label">ë¹ ë¥¸ ì•¡ì…˜</div>
                        <div style="display: flex; gap: var(--space-2); flex-wrap: wrap;">
                            <button class="btn btn--sm btn--outline" onclick="downloadInvoice('${txn.id}')">ğŸ“„ ì²­êµ¬ì„œ ë‹¤ìš´ë¡œë“œ</button>
                            <button class="btn btn--sm btn--outline" onclick="sendInvoiceEmail('${txn.id}')">ğŸ“§ ì²­êµ¬ì„œ ì´ë©”ì¼ ë°œì†¡</button>
                            ${txn.status === 'failed' ? `<button class="btn btn--sm btn--outline" onclick="retryTransaction('${txn.id}')">ğŸ”„ ê²°ì œ ì¬ì‹œë„</button>` : ''}
                            ${txn.status === 'completed' ? `<button class="btn btn--sm btn--outline" onclick="processRefund('${txn.id}')">ğŸ’¸ í™˜ë¶ˆ ì²˜ë¦¬</button>` : ''}
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('transactionDetailContent').innerHTML = detailHtml;
            document.getElementById('transactionDetailModal').classList.add('modal-overlay--active');
        }

        function closeTransactionDetailModal() {
            document.getElementById('transactionDetailModal').classList.remove('modal-overlay--active');
            currentTransactionId = null;
        }

        // ========== ì²­êµ¬ì„œ ê´€ë¦¬ ==========
        function downloadInvoice(txnId) {
            const txn = transactionsData.find(t => t.id === txnId);
            
            if (!txn) {
                window.GrowFitUtils.showToast('ê±°ë˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'error');
                return;
            }

            window.GrowFitUtils.showToast('ì²­êµ¬ì„œë¥¼ ìƒì„±í•˜ëŠ” ì¤‘...', 'info');
            
            setTimeout(() => {
                window.GrowFitUtils.showToast(`${txn.transactionId}_invoice.pdfê°€ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤`, 'success');
            }, 1500);
        }

        function downloadCurrentInvoice() {
            if (currentTransactionId) {
                downloadInvoice(currentTransactionId);
            }
        }

        function sendInvoiceEmail(txnId) {
            const txn = transactionsData.find(t => t.id === txnId);
            
            if (!txn) {
                window.GrowFitUtils.showToast('ê±°ë˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'error');
                return;
            }

            if (confirm(`${txn.organizationName}ì— ì²­êµ¬ì„œë¥¼ ì´ë©”ì¼ë¡œ ë°œì†¡í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                window.GrowFitUtils.showToast('ì²­êµ¬ì„œ ì´ë©”ì¼ì„ ë°œì†¡í•˜ëŠ” ì¤‘...', 'info');
                
                setTimeout(() => {
                    window.GrowFitUtils.showToast('ì²­êµ¬ì„œ ì´ë©”ì¼ì´ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                }, 1500);
            }
        }

        function generateInvoice() {
            const options = `
ğŸ“„ ì²­êµ¬ì„œ ìƒì„±

ìƒì„± ì˜µì…˜:

1. ê°œë³„ ì¡°ì§ ì²­êµ¬ì„œ
2. ì›”ë³„ í†µí•© ì²­êµ¬ì„œ
3. ë¯¸ë‚© ì²­êµ¬ì„œ ì¼ê´„ ìƒì„±
4. ì»¤ìŠ¤í…€ ì²­êµ¬ì„œ

ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:
            `.trim();

            const choice = prompt(options);

            if (choice && ['1', '2', '3', '4'].includes(choice)) {
                handleInvoiceGeneration(choice);
            }
        }

        function handleInvoiceGeneration(type) {
            switch(type) {
                case '1':
                    generateSingleInvoice();
                    break;
                case '2':
                    generateMonthlyInvoices();
                    break;
                case '3':
                    generateUnpaidInvoices();
                    break;
                case '4':
                    generateCustomInvoice();
                    break;
            }
        }

        function generateSingleInvoice() {
            const orgName = prompt('ì¡°ì§ëª…:');
            
            if (orgName) {
                window.GrowFitUtils.showToast('ì²­êµ¬ì„œë¥¼ ìƒì„±í•˜ëŠ” ì¤‘...', 'info');
                
                setTimeout(() => {
                    window.GrowFitUtils.showToast('ì²­êµ¬ì„œê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                }, 1500);
            }
        }

        function generateMonthlyInvoices() {
            if (confirm('ì´ë²ˆ ë‹¬ ëª¨ë“  ì¡°ì§ì˜ ì²­êµ¬ì„œë¥¼ ìƒì„±í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                window.GrowFitUtils.showToast('ì²­êµ¬ì„œë¥¼ ì¼ê´„ ìƒì„±í•˜ëŠ” ì¤‘...', 'info');
                
                setTimeout(() => {
                    window.GrowFitUtils.showToast('247ê°œ ì²­êµ¬ì„œê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                }, 2000);
            }
        }

        function generateUnpaidInvoices() {
            window.GrowFitUtils.showToast('ë¯¸ë‚© ì²­êµ¬ì„œë¥¼ ìƒì„±í•˜ëŠ” ì¤‘...', 'info');
            
            setTimeout(() => {
                window.GrowFitUtils.showToast('12ê°œ ë¯¸ë‚© ì²­êµ¬ì„œê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
            }, 1500);
        }

        function generateCustomInvoice() {
            alert('ì»¤ìŠ¤í…€ ì²­êµ¬ì„œ ìƒì„± ê¸°ëŠ¥ì€ ê°œë°œ ì¤‘ì…ë‹ˆë‹¤');
        }

        // ========== ê±°ë˜ ì²˜ë¦¬ ==========
        function retryTransaction(txnId) {
            const txn = transactionsData.find(t => t.id === txnId);
            
            if (!txn) {
                window.GrowFitUtils.showToast('ê±°ë˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'error');
                return;
            }

            if (confirm(`${txn.organizationName}ì˜ ê²°ì œë¥¼ ì¬ì‹œë„í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                window.GrowFitUtils.showToast('ê²°ì œë¥¼ ì¬ì‹œë„í•˜ëŠ” ì¤‘...', 'info');
                
                setTimeout(() => {
                    txn.status = 'completed';
                    window.GrowFitUtils.showToast('ê²°ì œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                    renderTransactionsTable();
                }, 2000);
            }
        }

        function processRefund(txnId) {
            const txn = transactionsData.find(t => t.id === txnId);
            
            if (!txn) {
                window.GrowFitUtils.showToast('ê±°ë˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'error');
                return;
            }

            const reason = prompt(`í™˜ë¶ˆ ì‚¬ìœ ë¥¼ ì…ë ¥í•˜ì„¸ìš”:\n\nì¡°ì§: ${txn.organizationName}\nê¸ˆì•¡: $${txn.amount.toLocaleString()}`);
            
            if (reason && reason.trim()) {
                window.GrowFitUtils.showToast('í™˜ë¶ˆì„ ì²˜ë¦¬í•˜ëŠ” ì¤‘...', 'info');
                
                setTimeout(() => {
                    txn.status = 'refunded';
                    txn.refundReason = reason;
                    txn.amount = -Math.abs(txn.amount);
                    
                    window.GrowFitUtils.showToast('í™˜ë¶ˆì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                    renderTransactionsTable();
                    closeTransactionDetailModal();
                }, 2000);
            }
        }

        // ========== ë”ë³´ê¸° ì•¡ì…˜ ==========
        function showMoreActions(txnId) {
            const txn = transactionsData.find(t => t.id === txnId);

            const actions = `
â‹® ${txn.transactionId} ì¶”ê°€ ì‘ì—…

1. ğŸ“„ ì²­êµ¬ì„œ ë‹¤ìš´ë¡œë“œ
2. ğŸ“§ ì´ë©”ì¼ ë°œì†¡
3. ğŸ” ìƒì„¸ ë‚´ì—­ ë³´ê¸°
4. ğŸ’³ ê²°ì œ ì •ë³´ ìˆ˜ì •
${txn.status === 'failed' ? '5. ğŸ”„ ê²°ì œ ì¬ì‹œë„' : ''}
${txn.status === 'completed' ? '5. ğŸ’¸ í™˜ë¶ˆ ì²˜ë¦¬' : ''}

ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:
            `.trim();

            const choice = prompt(actions);

            if (choice && ['1', '2', '3', '4', '5'].includes(choice)) {
                handleMoreAction(txnId, choice, txn);
            }
        }

        function handleMoreAction(txnId, action, txn) {
            switch(action) {
                case '1':
                    downloadInvoice(txnId);
                    break;
                case '2':
                    sendInvoiceEmail(txnId);
                    break;
                case '3':
                    viewTransactionDetail(txnId);
                    break;
                case '4':
                    editPaymentInfo(txnId);
                    break;
                case '5':
                    if (txn.status === 'failed') {
                        retryTransaction(txnId);
                    } else if (txn.status === 'completed') {
                        processRefund(txnId);
                    }
                    break;
            }
        }

        function editPaymentInfo(txnId) {
            alert('ê²°ì œ ì •ë³´ ìˆ˜ì • ê¸°ëŠ¥ì€ ê°œë°œ ì¤‘ì…ë‹ˆë‹¤');
        }

        // ========== ë§¤ì¶œ ë¶„ì„ ==========
        function showRevenueAnalytics() {
            const completedTxns = transactionsData.filter(t => t.status === 'completed');
            const failedTxns = transactionsData.filter(t => t.status === 'failed');
            const refundedTxns = transactionsData.filter(t => t.status === 'refunded');

            const totalRevenue = completedTxns.reduce((sum, t) => sum + t.amount, 0);
            const totalRefunds = Math.abs(refundedTxns.reduce((sum, t) => sum + t.amount, 0));
            const netRevenue = totalRevenue - totalRefunds;

            const analytics = `
ğŸ“Š ë§¤ì¶œ ë¶„ì„ ë¦¬í¬íŠ¸

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ë§¤ì¶œ í˜„í™©:
- ì´ ê±°ë˜ì•¡: $${totalRevenue.toLocaleString()}
- í™˜ë¶ˆì•¡: $${totalRefunds.toLocaleString()}
- ìˆœ ë§¤ì¶œ: $${netRevenue.toLocaleString()}

ê±°ë˜ í†µê³„:
- ì´ ê±°ë˜: ${transactionsData.length}ê±´
- ì™„ë£Œ: ${completedTxns.length}ê±´ (${Math.round(completedTxns.length / transactionsData.length * 100)}%)
- ëŒ€ê¸°: ${transactionsData.filter(t => t.status === 'pending').length}ê±´
- ì‹¤íŒ¨: ${failedTxns.length}ê±´ (${Math.round(failedTxns.length / transactionsData.length * 100)}%)
- í™˜ë¶ˆ: ${refundedTxns.length}ê±´ (${Math.round(refundedTxns.length / transactionsData.length * 100)}%)

ì„±ê³µë¥ :
- ì „ì²´: ${Math.round((completedTxns.length / (transactionsData.length - refundedTxns.length)) * 100)}%
- ì¹´ë“œ ê²°ì œ: 98.7%
- ê³„ì¢Œì´ì²´: 99.2%

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

í”Œëœë³„ ë§¤ì¶œ:
- Enterprise: $141K (29%)
- Professional: $89K (18%)
- Starter: $23K (5%)

ê²°ì œ ë°©ë²•ë³„:
- ì‹ ìš©ì¹´ë“œ: 67% ($325K)
- ê³„ì¢Œì´ì²´: 28% ($136K)
- PayPal: 5% ($24K)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ì£¼ìš” ì§€í‘œ:
- MRR: $487K (+24.7%)
- ARR: $5.84M (+28.3%)
- ARPU: $1,972 (+8.9%)
- Churn Rate: 2.3%

ì„±ì¥ ì¶”ì´:
- ì›”ê°„ ì„±ì¥ë¥ : +24.7%
- ë¶„ê¸° ì„±ì¥ë¥ : +73.2%
- ì—°ê°„ ì„±ì¥ë¥ : +287%

[ìƒì„¸ ë¦¬í¬íŠ¸] [PDF ë‹¤ìš´ë¡œë“œ]
            `.trim();

            alert(analytics);
        }

        // ========== ë‚´ë³´ë‚´ê¸° ==========
        function exportRevenue() {
            const formats = `
ğŸ“¥ ë§¤ì¶œ ë¦¬í¬íŠ¸ ë‚´ë³´ë‚´ê¸°

ë‚´ë³´ë‚¼ í˜•ì‹:

1. CSV (ê±°ë˜ ë‚´ì—­)
2. Excel (ìƒì„¸ ë¦¬í¬íŠ¸)
3. PDF (ì›”ê°„ ë¦¬í¬íŠ¸)
4. JSON (API ë°ì´í„°)

ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:
            `.trim();

            const choice = prompt(formats);

            if (choice && ['1', '2', '3', '4'].includes(choice)) {
                handleExport(choice);
            }
        }

        function handleExport(format) {
            const formatMap = {
                '1': 'transactions.csv',
                '2': 'revenue_report.xlsx',
                '3': 'monthly_report.pdf',
                '4': 'revenue_data.json'
            };

            window.GrowFitUtils.showToast('ë¦¬í¬íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” ì¤‘...', 'info');

            setTimeout(() => {
                const filename = formatMap[format];
                window.GrowFitUtils.showToast(`${filename}ì´(ê°€) ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤`, 'success');
            }, 2000);
        }

        // ========== ì°¨íŠ¸ ê´€ë¦¬ ==========
        function changeRevenueChart(type) {
            window.GrowFitUtils.showToast(`${type} ì°¨íŠ¸ë¡œ ë³€ê²½ ì¤‘...`, 'info');
            
            setTimeout(() => {
                window.GrowFitUtils.showToast('ì°¨íŠ¸ê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
            }, 500);
        }

        // ========== ìƒˆë¡œê³ ì¹¨ ==========
        function refreshRevenue() {
            window.GrowFitUtils.showToast('ë§¤ì¶œ ë°ì´í„°ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ëŠ” ì¤‘...', 'info');
            
            setTimeout(() => {
                loadRevenueData();
                renderTransactionsTable();
                window.GrowFitUtils.showToast('ë°ì´í„°ê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
            }, 1000);
        }

        // ========== ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ==========
        function getPlanName(plan) {
            const names = {
                'enterprise': 'Enterprise',
                'professional': 'Professional',
                'starter': 'Starter',
                'free': 'Free'
            };
            return names[plan] || plan;
        }

        function getStatusName(status) {
            const names = {
                'completed': 'ì™„ë£Œ',
                'pending': 'ëŒ€ê¸° ì¤‘',
                'failed': 'ì‹¤íŒ¨',
                'refunded': 'í™˜ë¶ˆ'
            };
            return names[status] || status;
        }

        function getPaymentMethodName(method) {
            const names = {
                'card': 'ğŸ’³ ì‹ ìš©ì¹´ë“œ',
                'bank': 'ğŸ¦ ê³„ì¢Œì´ì²´',
                'paypal': 'ğŸ’° PayPal'
            };
            return names[method] || method;
        }

        // ========== ë§¤ì¶œ ì˜ˆì¸¡ ==========
        function predictRevenue() {
            const currentMRR = 487000;
            const growthRate = 0.247;

            const predictions = `
ğŸ”® ë§¤ì¶œ ì˜ˆì¸¡

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

í˜„ì¬ MRR: $${currentMRR.toLocaleString()}
ì›”í‰ê·  ì„±ì¥ë¥ : ${(growthRate * 100).toFixed(1)}%

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ì˜ˆì¸¡ ë§¤ì¶œ:

ë‹¤ìŒ ë‹¬:
- MRR: $${Math.round(currentMRR * (1 + growthRate)).toLocaleString()}
- ì„±ì¥: +$${Math.round(currentMRR * growthRate).toLocaleString()}

3ê°œì›” í›„:
- MRR: $${Math.round(currentMRR * Math.pow(1 + growthRate, 3)).toLocaleString()}
- ARR: $${Math.round(currentMRR * Math.pow(1 + growthRate, 3) * 12).toLocaleString()}

6ê°œì›” í›„:
- MRR: $${Math.round(currentMRR * Math.pow(1 + growthRate, 6)).toLocaleString()}
- ARR: $${Math.round(currentMRR * Math.pow(1 + growthRate, 6) * 12).toLocaleString()}

12ê°œì›” í›„:
- MRR: $${Math.round(currentMRR * Math.pow(1 + growthRate, 12)).toLocaleString()}
- ARR: $${Math.round(currentMRR * Math.pow(1 + growthRate, 12) * 12).toLocaleString()}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ì£¼ìš” ê°€ì •:
- í˜„ì¬ ì„±ì¥ë¥  ìœ ì§€
- Churn Rate 2.3% ìœ ì§€
- ì‹ ê·œ ê°€ì… ì§€ì†

ë¦¬ìŠ¤í¬ ìš”ì¸:
- ì‹œì¥ ê²½ìŸ ì‹¬í™”
- ê°€ê²© ì •ì±… ë³€í™”
- ê²½ì œ ìƒí™© ë³€ë™

[ìƒì„¸ ëª¨ë¸] [ì‹œë‚˜ë¦¬ì˜¤ ë¶„ì„]
            `.trim();

            alert(predictions);
        }

        // ========== ê²°ì œ ì‹¤íŒ¨ ë¶„ì„ ==========
        function analyzeFailures() {
            const failedTxns = transactionsData.filter(t => t.status === 'failed');

            const analysis = `
âš ï¸ ê²°ì œ ì‹¤íŒ¨ ë¶„ì„

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ì´ ì‹¤íŒ¨ ê±´ìˆ˜: ${failedTxns.length}ê±´
ì‹¤íŒ¨ìœ¨: ${Math.round(failedTxns.length / transactionsData.length * 100)}%
ì†ì‹¤ ê¸ˆì•¡: $${failedTxns.reduce((sum, t) => sum + Math.abs(t.amount), 0).toLocaleString()}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ì£¼ìš” ì‹¤íŒ¨ ì›ì¸:
- ì¹´ë“œ í•œë„ ì´ˆê³¼: 42%
- ì”ì•¡ ë¶€ì¡±: 28%
- ì¹´ë“œ ë§Œë£Œ: 15%
- ì¸ì¦ ì‹¤íŒ¨: 10%
- ê¸°íƒ€: 5%

ê²°ì œ ë°©ë²•ë³„:
- ì‹ ìš©ì¹´ë“œ: ${Math.round(failedTxns.filter(t => t.method === 'card').length / failedTxns.length * 100)}%
- ê³„ì¢Œì´ì²´: ${Math.round(failedTxns.filter(t => t.method === 'bank').length / failedTxns.length * 100)}%

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ê°œì„  ë°©ì•ˆ:
1. ê²°ì œ ì¬ì‹œë„ ìë™í™”
2. ë‹¤ì¤‘ ê²°ì œ ìˆ˜ë‹¨ ë“±ë¡ ìœ ë„
3. ê²°ì œ ì „ ì¹´ë“œ ê²€ì¦ ê°•í™”
4. ì•Œë¦¼ ì‹œìŠ¤í…œ ê°œì„ 

ì˜ˆìƒ íš¨ê³¼:
- ì‹¤íŒ¨ìœ¨ 30% ê°ì†Œ
- ì›” $${Math.round(failedTxns.reduce((sum, t) => sum + Math.abs(t.amount), 0) * 0.3).toLocaleString()} ì¶”ê°€ ë§¤ì¶œ

[ìƒì„¸ ë¶„ì„] [ì•¡ì…˜ í”Œëœ]
            `.trim();

            alert(analysis);
        }

        // ========== í™˜ë¶ˆ ê´€ë¦¬ ==========
        function analyzeRefunds() {
            const refundedTxns = transactionsData.filter(t => t.status === 'refunded');

            const analysis = `
ğŸ’¸ í™˜ë¶ˆ ë¶„ì„

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ì´ í™˜ë¶ˆ ê±´ìˆ˜: ${refundedTxns.length}ê±´
í™˜ë¶ˆìœ¨: ${Math.round(refundedTxns.length / transactionsData.length * 100)}%
í™˜ë¶ˆ ê¸ˆì•¡: $${Math.abs(refundedTxns.reduce((sum, t) => sum + t.amount, 0)).toLocaleString()}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ì£¼ìš” í™˜ë¶ˆ ì‚¬ìœ :
- ê³ ê° ìš”ì²­: 45%
- ì„œë¹„ìŠ¤ ë¶ˆë§Œì¡±: 30%
- ì¤‘ë³µ ê²°ì œ: 15%
- ê¸°ìˆ ì  ë¬¸ì œ: 10%

í”Œëœë³„ í™˜ë¶ˆìœ¨:
- Enterprise: 1.2%
- Professional: 2.8%
- Starter: 4.5%

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

í™˜ë¶ˆ ì²˜ë¦¬ ì‹œê°„:
- í‰ê· : 2.4ì¼
- ìµœì†Œ: 1ì¼
- ìµœëŒ€: 5ì¼

ê³ ê° ë§Œì¡±ë„:
- í™˜ë¶ˆ í”„ë¡œì„¸ìŠ¤: 4.2/5.0
- ì‘ëŒ€ í’ˆì§ˆ: 4.5/5.0

ê°œì„  ë°©ì•ˆ:
1. ì˜¨ë³´ë”© í”„ë¡œì„¸ìŠ¤ ê°œì„ 
2. ê³ ê° ì§€ì› ê°•í™”
3. í™˜ë¶ˆ ì •ì±… ëª…í™•í™”
4. ìë™ í™˜ë¶ˆ ì‹œìŠ¤í…œ ë„ì…

[ìƒì„¸ ë¦¬í¬íŠ¸] [ì•¡ì…˜ í”Œëœ]
            `.trim();

            alert(analysis);
        }

        // ========== ìˆ˜ìµì„± ë¶„ì„ ==========
        function analyzeProfitability() {
            const analysis = `
ğŸ“ˆ ìˆ˜ìµì„± ë¶„ì„

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ë§¤ì¶œ í˜„í™©:
- ì´ ë§¤ì¶œ: $487K
- ìˆœ ë§¤ì¶œ: $473K (í™˜ë¶ˆ ì œì™¸)
- ì„±ì¥ë¥ : +24.7%

ë¹„ìš© êµ¬ì¡°:
- LLM API ë¹„ìš©: $247K (52%)
- ì¸í”„ë¼ ë¹„ìš©: $162K (34%)
- ì¸ê±´ë¹„: $412K
- ê¸°íƒ€: $89K
- ì´ ë¹„ìš©: $910K

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ìˆ˜ìµì„± ì§€í‘œ:
- ì´ ì´ìµ: -$437K
- ì´ìµë¥ : -92%
- ë‹¨ìœ„ ê²½ì œí•™: ê°œì„  í•„ìš”

í”Œëœë³„ ìˆ˜ìµì„±:
- Enterprise: ğŸŸ¢ í‘ì
  - ë§¤ì¶œ: $141K
  - ë¹„ìš©: $87K
  - ì´ìµ: +$54K

- Professional: ğŸŸ¡ ì†ìµë¶„ê¸°ì 
  - ë§¤ì¶œ: $89K
  - ë¹„ìš©: $91K
  - ì´ìµ: -$2K

- Starter: ğŸ”´ ì ì
  - ë§¤ì¶œ: $23K
  - ë¹„ìš©: $45K
  - ì´ìµ: -$22K

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ì†ìµë¶„ê¸°ì :
- í˜„ì¬ ì¡°ì§ ìˆ˜: 247ê°œ
- í•„ìš” ì¡°ì§ ìˆ˜: 523ê°œ
- ë¶€ì¡±: 276ê°œ (+112%)

ëª©í‘œ ë‹¬ì„± ì‹œì :
- í˜„ì¬ ì„±ì¥ë¥  ìœ ì§€ ì‹œ: 4ê°œì›”
- ê°€ì† ì„±ì¥ ì‹œ: 2-3ê°œì›”

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ê°œì„  ë°©ì•ˆ:
1. Enterprise ê³ ê° ì§‘ì¤‘ ê³µëµ
2. API ë¹„ìš© ìµœì í™” (30% ì ˆê°)
3. ê°€ê²© ì •ì±… ì¬ê²€í† 
4. Starter í”Œëœ ìˆ˜ìµì„± ê°œì„ 

[ìƒì„¸ ë¶„ì„] [ì‹¤í–‰ ê³„íš]
            `.trim();

            alert(analysis);
        }

        // ========== ëŒ€ì‹œë³´ë“œ ì—…ë°ì´íŠ¸ ==========
        function updateDashboard() {
            calculateRevenueMetrics();
            renderTransactionsTable();
            
            window.GrowFitUtils.showToast('ëŒ€ì‹œë³´ë“œê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
        }

        // ========== ê³ ê¸‰ ë¦¬í¬íŠ¸ ==========
        function generateAdvancedReport() {
            const options = `
ğŸ“Š ê³ ê¸‰ ë¦¬í¬íŠ¸ ìƒì„±

ë¦¬í¬íŠ¸ ìœ í˜•:

1. ì›”ê°„ ì¬ë¬´ ë¦¬í¬íŠ¸
2. ë¶„ê¸°ë³„ ì„±ì¥ ë¶„ì„
3. í”Œëœë³„ ìˆ˜ìµì„± ë¶„ì„
4. ê³ ê° ìƒì•  ê°€ì¹˜ (LTV) ë¦¬í¬íŠ¸
5. ì´íƒˆ ë¶„ì„ ë¦¬í¬íŠ¸
6. ê²½ìŸì‚¬ ë²¤ì¹˜ë§ˆí¬

ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:
            `.trim();

            const choice = prompt(options);

            if (choice && ['1', '2', '3', '4', '5', '6'].includes(choice)) {
                handleAdvancedReport(choice);
            }
        }

        function handleAdvancedReport(type) {
            window.GrowFitUtils.showToast('ë¦¬í¬íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” ì¤‘...', 'info');

            setTimeout(() => {
                const reportNames = {
                    '1': 'ì›”ê°„ ì¬ë¬´ ë¦¬í¬íŠ¸',
                    '2': 'ë¶„ê¸°ë³„ ì„±ì¥ ë¶„ì„',
                    '3': 'í”Œëœë³„ ìˆ˜ìµì„± ë¶„ì„',
                    '4': 'LTV ë¦¬í¬íŠ¸',
                    '5': 'ì´íƒˆ ë¶„ì„ ë¦¬í¬íŠ¸',
                    '6': 'ê²½ìŸì‚¬ ë²¤ì¹˜ë§ˆí¬'
                };

                window.GrowFitUtils.showToast(`${reportNames[type]}ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤`, 'success');
            }, 2000);
        }

        // ========== ì•Œë¦¼ ì„¤ì • ==========
        function setupAlerts() {
            const alerts = `
ğŸ”” ë§¤ì¶œ ì•Œë¦¼ ì„¤ì •

ì•Œë¦¼ ìœ í˜•:

1. ê²°ì œ ì‹¤íŒ¨ ì¦‰ì‹œ ì•Œë¦¼
2. ì¼ì¼ ë§¤ì¶œ ë¦¬í¬íŠ¸
3. ëª©í‘œ ë‹¬ì„± ì•Œë¦¼
4. ì´ìƒ ê±°ë˜ ê°ì§€
5. í™˜ë¶ˆ ìš”ì²­ ì•Œë¦¼

ì„¤ì •í•˜ì‹œê² ìŠµë‹ˆê¹Œ?
            `.trim();

            if (confirm(alerts)) {
                window.GrowFitUtils.showToast('ì•Œë¦¼ì´ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
            }
        }

        // ========== í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ==========
        document.addEventListener('keydown', function(e) {
            // Ctrl/Cmd + R: ìƒˆë¡œê³ ì¹¨
            if ((e.ctrlKey || e.metaKey) && e.key === 'r') {
                e.preventDefault();
                refreshRevenue();
            }

            // Ctrl/Cmd + E: ë‚´ë³´ë‚´ê¸°
            if ((e.ctrlKey || e.metaKey) && e.key === 'e') {
                e.preventDefault();
                exportRevenue();
            }

            // Ctrl/Cmd + N: ì²­êµ¬ì„œ ìƒì„±
            if ((e.ctrlKey || e.metaKey) && e.key === 'n') {
                e.preventDefault();
                generateInvoice();
            }

            // Ctrl/Cmd + A: ë¶„ì„
            if ((e.ctrlKey || e.metaKey) && e.key === 'a') {
                e.preventDefault();
                showRevenueAnalytics();
            }

            // Esc: ëª¨ë‹¬ ë‹«ê¸°
            if (e.key === 'Escape') {
                closeTransactionDetailModal();
            }
        });

        // ========== ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸° ==========
        document.getElementById('transactionDetailModal')?.addEventListener('click', function(e) {
            if (e.target === this) {
                closeTransactionDetailModal();
            }
        });

        // ========== ì‹¤ì‹œê°„ ë§¤ì¶œ ì—…ë°ì´íŠ¸ ==========
        function startRevenueTracking() {
            // ì‹¤ì œë¡œëŠ” WebSocketìœ¼ë¡œ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
            setInterval(() => {
                // ë§¤ì¶œ ì§€í‘œ ì—…ë°ì´íŠ¸ ì‹œë®¬ë ˆì´ì…˜
                console.log('ì‹¤ì‹œê°„ ë§¤ì¶œ ì—…ë°ì´íŠ¸...');
            }, 60000); // 1ë¶„ë§ˆë‹¤
        }

        // ========== ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ==========
        function logPerformance() {
            if (window.performance) {
                const perfData = window.performance.timing;
                const pageLoadTime = perfData.loadEventEnd - perfData.navigationStart;
                
                console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
                console.log('ğŸ“Š í˜ì´ì§€ ì„±ëŠ¥ ë©”íŠ¸ë¦­');
                console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
                console.log('í˜ì´ì§€ ë¡œë“œ ì‹œê°„:', pageLoadTime + 'ms');
                console.log('DOM ì¤€ë¹„ ì‹œê°„:', (perfData.domContentLoadedEventEnd - perfData.navigationStart) + 'ms');
                console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ í›„ ì„±ëŠ¥ ì¸¡ì •
        window.addEventListener('load', function() {
            setTimeout(logPerformance, 0);
        });

        // ========== ì´ˆê¸°í™” ì™„ë£Œ ==========
        console.log('âœ… Revenue & Billing ì™„ì „íˆ ë¡œë“œë¨');
        console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
        console.log('ğŸ’° ì´ ê±°ë˜:', transactionsData.length);
        console.log('âœ… ì™„ë£Œ:', transactionsData.filter(t => t.status === 'completed').length);
        console.log('â³ ëŒ€ê¸°:', transactionsData.filter(t => t.status === 'pending').length);
        console.log('âŒ ì‹¤íŒ¨:', transactionsData.filter(t => t.status === 'failed').length);
        console.log('ğŸ’¸ í™˜ë¶ˆ:', transactionsData.filter(t => t.status === 'refunded').length);
        console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
        console.log('ğŸ“ˆ MRR: $487K (+24.7%)');
        console.log('ğŸ“Š ARR: $5.84M (+28.3%)');
        console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
        console.log('ë‹¨ì¶•í‚¤: Ctrl+R(ìƒˆë¡œê³ ì¹¨), Ctrl+E(ë‚´ë³´ë‚´ê¸°), Ctrl+N(ì²­êµ¬ì„œ), Ctrl+A(ë¶„ì„)');

        // ì‹¤ì‹œê°„ ì¶”ì  ì‹œì‘
        // startRevenueTracking();
    </script>
</body>
</html>