<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¡°ì§ ê´€ë¦¬ - GrowFit Platform Admin</title>

    <!-- ê³µí†µ CSS -->
    <link rel="stylesheet" href="../common/variables.css">
    <link rel="stylesheet" href="../common/layout.css">
    <link rel="stylesheet" href="../common/components.css">

    <style>
        /* ========== Organization Management ì „ìš© ìŠ¤íƒ€ì¼ ========== */
        :root {
            --platform-primary: #6366f1;
            --platform-primary-light: #818cf8;
            --platform-primary-dark: #4f46e5;
            --platform-secondary: #ec4899;
            --platform-accent: #f59e0b;
            --platform-success: #10b981;
            --platform-warning: #f59e0b;
            --platform-danger: #ef4444;
            --platform-purple: #8b5cf6;
            --platform-blue: #3b82f6;
        }

        /* í˜ì´ì§€ í—¤ë” */
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-6);
        }

        .page-header__left h1 {
            font-size: var(--text-3xl);
            font-weight: var(--font-bold);
            background: linear-gradient(135deg, var(--platform-primary), var(--platform-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: var(--space-1);
        }

        .page-header__left p {
            font-size: var(--text-sm);
            color: var(--text-secondary);
        }

        .page-header__actions {
            display: flex;
            gap: var(--space-2);
        }

        /* í†µê³„ ì¹´ë“œ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--space-4);
            margin-bottom: var(--space-6);
        }

        .stat-card {
            background: var(--background);
            border: 2px solid var(--border);
            border-radius: var(--radius-xl);
            padding: var(--space-4);
            transition: all 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(99, 102, 241, 0.1);
            border-color: var(--platform-primary);
        }

        .stat-card__label {
            font-size: var(--text-sm);
            color: var(--text-secondary);
            margin-bottom: var(--space-2);
        }

        .stat-card__value {
            font-size: var(--text-2xl);
            font-weight: var(--font-bold);
            color: var(--platform-primary);
            margin-bottom: var(--space-1);
        }

        .stat-card__change {
            font-size: var(--text-xs);
            font-weight: var(--font-bold);
        }

        .stat-card__change--up {
            color: var(--platform-success);
        }

        .stat-card__change--down {
            color: var(--platform-danger);
        }

        /* í•„í„° & ê²€ìƒ‰ */
        .filter-section {
            background: var(--background);
            border: 2px solid var(--border);
            border-radius: var(--radius-xl);
            padding: var(--space-4);
            margin-bottom: var(--space-4);
        }

        .filter-row {
            display: flex;
            gap: var(--space-3);
            align-items: end;
        }

        .filter-group {
            flex: 1;
        }

        .filter-label {
            font-size: var(--text-sm);
            font-weight: var(--font-medium);
            color: var(--text-primary);
            margin-bottom: var(--space-2);
        }

        .filter-input {
            width: 100%;
            padding: var(--space-3);
            border: 2px solid var(--border);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
            transition: all 0.2s;
        }

        .filter-input:focus {
            outline: none;
            border-color: var(--platform-primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .filter-select {
            width: 100%;
            padding: var(--space-3);
            border: 2px solid var(--border);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
            background: white;
            cursor: pointer;
        }

        /* ì¡°ì§ í…Œì´ë¸” */
        .org-table-container {
            background: var(--background);
            border: 2px solid var(--border);
            border-radius: var(--radius-xl);
            overflow: hidden;
        }

        .org-table {
            width: 100%;
            border-collapse: collapse;
        }

        .org-table thead {
            background: var(--surface);
        }

        .org-table th {
            padding: var(--space-4);
            text-align: left;
            font-size: var(--text-sm);
            font-weight: var(--font-semibold);
            color: var(--text-secondary);
            border-bottom: 2px solid var(--border);
            white-space: nowrap;
        }

        .org-table th.sortable {
            cursor: pointer;
            user-select: none;
        }

        .org-table th.sortable:hover {
            color: var(--platform-primary);
        }

        .org-table td {
            padding: var(--space-4);
            font-size: var(--text-sm);
            border-bottom: 1px solid var(--border);
        }

        .org-table tbody tr {
            transition: all 0.2s;
            cursor: pointer;
        }

        .org-table tbody tr:hover {
            background: var(--surface);
        }

        /* ì¡°ì§ ì •ë³´ */
        .org-info {
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }

        .org-logo {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            background: linear-gradient(135deg, var(--platform-primary), var(--platform-secondary));
            flex-shrink: 0;
        }

        .org-details {
            flex: 1;
            min-width: 0;
        }

        .org-name {
            font-weight: var(--font-semibold);
            color: var(--text-primary);
            margin-bottom: 2px;
        }

        .org-id {
            font-size: var(--text-xs);
            color: var(--text-tertiary);
            font-family: 'Courier New', monospace;
        }

        /* í”Œëœ ë°°ì§€ */
        .plan-badge {
            padding: 4px 12px;
            border-radius: var(--radius-full);
            font-size: var(--text-xs);
            font-weight: var(--font-bold);
            display: inline-block;
        }

        .plan-badge--enterprise {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
        }

        .plan-badge--professional {
            background: linear-gradient(135deg, #3b82f6, #06b6d4);
            color: white;
        }

        .plan-badge--starter {
            background: linear-gradient(135deg, #10b981, #34d399);
            color: white;
        }

        .plan-badge--free {
            background: rgba(107, 114, 128, 0.1);
            color: var(--text-secondary);
        }

        /* ìƒíƒœ ë°°ì§€ */
        .status-badge {
            padding: 4px 12px;
            border-radius: var(--radius-full);
            font-size: var(--text-xs);
            font-weight: var(--font-bold);
            display: inline-block;
        }

        .status-badge--active {
            background: rgba(16, 185, 129, 0.1);
            color: var(--platform-success);
        }

        .status-badge--trial {
            background: rgba(245, 158, 11, 0.1);
            color: var(--platform-warning);
        }

        .status-badge--inactive {
            background: rgba(107, 114, 128, 0.1);
            color: var(--text-secondary);
        }

        .status-badge--suspended {
            background: rgba(239, 68, 68, 0.1);
            color: var(--platform-danger);
        }

        /* ì‚¬ìš©ëŸ‰ ë°” */
        .usage-bar {
            width: 100%;
            max-width: 120px;
        }

        .usage-bar__label {
            font-size: var(--text-xs);
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .usage-bar__progress {
            height: 6px;
            background: var(--gray-200);
            border-radius: 3px;
            overflow: hidden;
        }

        .usage-bar__fill {
            height: 100%;
            background: linear-gradient(to right, var(--platform-primary), var(--platform-secondary));
            border-radius: 3px;
            transition: width 0.3s;
        }

        .usage-bar__fill--high {
            background: linear-gradient(to right, var(--platform-warning), var(--platform-danger));
        }

        /* ì•¡ì…˜ ë²„íŠ¼ */
        .action-buttons {
            display: flex;
            gap: var(--space-2);
        }

        .action-btn {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-md);
            border: 2px solid var(--border);
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 16px;
        }

        .action-btn:hover {
            border-color: var(--platform-primary);
            background: var(--surface);
            transform: scale(1.1);
        }

        /* í˜ì´ì§€ë„¤ì´ì…˜ */
        .pagination {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-4);
            background: var(--surface);
            border-top: 2px solid var(--border);
        }

        .pagination-info {
            font-size: var(--text-sm);
            color: var(--text-secondary);
        }

        .pagination-controls {
            display: flex;
            gap: var(--space-2);
        }

        .pagination-btn {
            padding: var(--space-2) var(--space-3);
            border: 2px solid var(--border);
            border-radius: var(--radius-md);
            background: white;
            font-size: var(--text-sm);
            cursor: pointer;
            transition: all 0.2s;
        }

        .pagination-btn:hover:not(:disabled) {
            border-color: var(--platform-primary);
            color: var(--platform-primary);
        }

        .pagination-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .pagination-btn--active {
            background: var(--platform-primary);
            color: white;
            border-color: var(--platform-primary);
        }

        /* ëª¨ë‹¬ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(4px);
        }

        .modal-overlay--active {
            display: flex;
        }

        .modal {
            background: white;
            border-radius: var(--radius-xl);
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: modalSlideUp 0.3s ease-out;
        }

        @keyframes modalSlideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            padding: var(--space-5);
            border-bottom: 2px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: var(--text-xl);
            font-weight: var(--font-bold);
            color: var(--text-primary);
        }

        .modal-close {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-md);
            border: none;
            background: var(--surface);
            cursor: pointer;
            font-size: 20px;
            transition: all 0.2s;
        }

        .modal-close:hover {
            background: var(--platform-danger);
            color: white;
            transform: rotate(90deg);
        }

        .modal-body {
            padding: var(--space-5);
            max-height: calc(90vh - 160px);
            overflow-y: auto;
        }

        .modal-footer {
            padding: var(--space-4);
            border-top: 2px solid var(--border);
            display: flex;
            justify-content: flex-end;
            gap: var(--space-2);
        }

        /* í¼ ê·¸ë£¹ */
        .form-group {
            margin-bottom: var(--space-4);
        }

        .form-label {
            display: block;
            font-size: var(--text-sm);
            font-weight: var(--font-medium);
            color: var(--text-primary);
            margin-bottom: var(--space-2);
        }

        .form-label--required::after {
            content: '*';
            color: var(--platform-danger);
            margin-left: 4px;
        }

        .form-input {
            width: 100%;
            padding: var(--space-3);
            border: 2px solid var(--border);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
            transition: all 0.2s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--platform-primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .form-select {
            width: 100%;
            padding: var(--space-3);
            border: 2px solid var(--border);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
            background: white;
            cursor: pointer;
        }

        .form-textarea {
            width: 100%;
            padding: var(--space-3);
            border: 2px solid var(--border);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
            resize: vertical;
            min-height: 100px;
        }

        .form-help {
            font-size: var(--text-xs);
            color: var(--text-secondary);
            margin-top: var(--space-1);
        }

        /* ë¹ˆ ìƒíƒœ */
        .empty-state {
            text-align: center;
            padding: var(--space-8);
            color: var(--text-secondary);
        }

        .empty-state__icon {
            font-size: 64px;
            margin-bottom: var(--space-3);
        }

        .empty-state__title {
            font-size: var(--text-lg);
            font-weight: var(--font-semibold);
            color: var(--text-primary);
            margin-bottom: var(--space-2);
        }

        .empty-state__desc {
            font-size: var(--text-sm);
            margin-bottom: var(--space-4);
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 1400px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .filter-row {
                flex-direction: column;
            }

            .org-table {
                display: block;
                overflow-x: auto;
            }

            .action-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>

<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <div class="header__left">
                <button id="menuToggle" class="header__icon-button hidden-desktop">
                    <span>â˜°</span>
                </button>
                <a href="platform-dashboard.html" class="header__logo">
                    <span class="header__logo-icon">ğŸš€</span>
                    <span>GrowFit Platform</span>
                </a>
            </div>

            <div class="header__right">
                <button class="header__icon-button" title="ìƒˆë¡œê³ ì¹¨" onclick="refreshOrganizations()">
                    <span>ğŸ”„</span>
                </button>

                <button id="notificationBtn" class="header__icon-button">
                    <span>ğŸ””</span>
                    <span class="header__badge">5</span>
                </button>

                <div id="profileBtn" class="header__profile">
                    <div class="header__avatar" style="background: linear-gradient(135deg, #6366f1, #ec4899);">í”Œ</div>
                    <span class="hidden-mobile">í”Œë«í¼ ê´€ë¦¬ì</span>
                    <span class="hidden-mobile">â–¼</span>
                </div>
            </div>
        </header>

        <div class="container">
            <!-- Sidebar -->
            <aside class="sidebar sidebar--open">
                <div class="sidebar__user">
                    <div class="sidebar__user-info">
                        <div class="sidebar__user-avatar"
                            style="background: linear-gradient(135deg, #6366f1, #ec4899);">í”Œ</div>
                        <div class="sidebar__user-details">
                            <div class="sidebar__user-name">í”Œë«í¼ ê´€ë¦¬ì</div>
                            <div class="sidebar__user-role">Platform Admin</div>
                        </div>
                    </div>
                </div>

                <nav class="sidebar__nav">
                    <ul class="sidebar__menu">
                        <li class="sidebar__menu-item">
                            <a href="platform-dashboard.html" class="sidebar__menu-link">
                                <span class="sidebar__menu-icon">ğŸ </span>
                                <span>í”Œë«í¼ ëŒ€ì‹œë³´ë“œ</span>
                            </a>
                        </li>
                        <li class="sidebar__menu-item">
                            <a href="organization-management.html"
                                class="sidebar__menu-link sidebar__menu-link--active">
                                <span class="sidebar__menu-icon">ğŸ¢</span>
                                <span>ì¡°ì§ ê´€ë¦¬</span>
                            </a>
                        </li>
                        <li class="sidebar__menu-item">
                            <a href="user-management.html" class="sidebar__menu-link">
                                <span class="sidebar__menu-icon">ğŸ‘¥</span>
                                <span>ì „ì²´ ì‚¬ìš©ì</span>
                            </a>
                        </li>
                        <li class="sidebar__menu-item">
                            <a href="revenue-billing.html" class="sidebar__menu-link">
                                <span class="sidebar__menu-icon">ğŸ’°</span>
                                <span>ë§¤ì¶œ/ê³¼ê¸ˆ</span>
                            </a>
                        </li>
                        <li class="sidebar__menu-item">
                            <a href="analytics-reports.html" class="sidebar__menu-link">
                                <span class="sidebar__menu-icon">ğŸ“Š</span>
                                <span>ë¶„ì„ & ë¦¬í¬íŠ¸</span>
                            </a>
                        </li>
                        <li class="sidebar__menu-item">
                            <a href="system-monitoring.html" class="sidebar__menu-link">
                                <span class="sidebar__menu-icon">ğŸ”§</span>
                                <span>ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§</span>
                            </a>
                        </li>
                        <li class="sidebar__menu-item">
                            <a href="platform-settings.html" class="sidebar__menu-link">
                                <span class="sidebar__menu-icon">âš™ï¸</span>
                                <span>ì‹œìŠ¤í…œ ì„¤ì •</span>
                            </a>
                        </li>
                    </ul>
                </nav>

                <div class="sidebar__footer">
                    <div
                        style="padding: var(--space-3); background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(236, 72, 153, 0.1)); border-radius: var(--radius-md); font-size: var(--text-xs);">
                        <div style="color: var(--text-secondary); margin-bottom: var(--space-1);">ì´ ì¡°ì§</div>
                        <div
                            style="font-weight: var(--font-bold); color: var(--platform-primary); font-size: var(--text-lg);">
                            247ê°œ</div>
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="main">
                <!-- í˜ì´ì§€ í—¤ë” -->
                <div class="page-header">
                    <div class="page-header__left">
                        <h1>ğŸ¢ ì¡°ì§ ê´€ë¦¬</h1>
                        <p>ì „ì²´ ì¡°ì§ì„ ê´€ë¦¬í•˜ê³  ëª¨ë‹ˆí„°ë§í•˜ì„¸ìš”</p>
                    </div>
                    <div class="page-header__actions">
                        <button class="btn btn--outline" onclick="exportOrganizations()">
                            ğŸ“¥ ë‚´ë³´ë‚´ê¸°
                        </button>
                        <button class="btn btn--outline" onclick="bulkActions()">
                            âš™ï¸ ëŒ€ëŸ‰ ì‘ì—…
                        </button>
                        <button class="btn btn--primary" onclick="openAddOrganizationModal()">
                            â• ìƒˆ ì¡°ì§ ì¶”ê°€
                        </button>
                    </div>
                </div>

                <!-- í†µê³„ ì¹´ë“œ -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-card__label">ì´ ì¡°ì§</div>
                        <div class="stat-card__value">247</div>
                        <div class="stat-card__change stat-card__change--up">â†‘ 12.5% (ì´ë²ˆ ë‹¬)</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-card__label">í™œì„± ì¡°ì§</div>
                        <div class="stat-card__value">212</div>
                        <div class="stat-card__change stat-card__change--up">â†‘ 8.2%</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-card__label">Trial ì¡°ì§</div>
                        <div class="stat-card__value">23</div>
                        <div class="stat-card__change stat-card__change--up">â†‘ 15.0%</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-card__label">í‰ê·  ì‚¬ìš©ì ìˆ˜</div>
                        <div class="stat-card__value">36</div>
                        <div class="stat-card__change stat-card__change--up">â†‘ 5.9%</div>
                    </div>
                </div>

                <!-- í•„í„° & ê²€ìƒ‰ -->
                <div class="filter-section">
                    <div class="filter-row">
                        <div class="filter-group">
                            <div class="filter-label">ğŸ” ê²€ìƒ‰</div>
                            <input 
                                type="text" 
                                id="searchInput"
                                class="filter-input" 
                                placeholder="ì¡°ì§ëª…, ì´ë©”ì¼, ID ê²€ìƒ‰..."
                                oninput="searchOrganizations(this.value)"
                            >
                        </div>

                        <div class="filter-group">
                            <div class="filter-label">ğŸ“Š í”Œëœ</div>
                            <select class="filter-select" onchange="filterByPlan(this.value)">
                                <option value="">ì „ì²´ í”Œëœ</option>
                                <option value="enterprise">Enterprise</option>
                                <option value="professional">Professional</option>
                                <option value="starter">Starter</option>
                                <option value="free">Free</option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <div class="filter-label">ğŸ”„ ìƒíƒœ</div>
                            <select class="filter-select" onchange="filterByStatus(this.value)">
                                <option value="">ì „ì²´ ìƒíƒœ</option>
                                <option value="active">Active</option>
                                <option value="trial">Trial</option>
                                <option value="inactive">Inactive</option>
                                <option value="suspended">Suspended</option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <div class="filter-label">ğŸ“… ê°€ì…ì¼</div>
                            <select class="filter-select" onchange="filterByDate(this.value)">
                                <option value="">ì „ì²´ ê¸°ê°„</option>
                                <option value="today">ì˜¤ëŠ˜</option>
                                <option value="week">ìµœê·¼ 7ì¼</option>
                                <option value="month">ìµœê·¼ 30ì¼</option>
                                <option value="quarter">ìµœê·¼ 90ì¼</option>
                            </select>
                        </div>

                        <button class="btn btn--outline" onclick="resetFilters()">
                            ğŸ”„ ì´ˆê¸°í™”
                        </button>
                    </div>
                </div>

                <!-- ì¡°ì§ í…Œì´ë¸” -->
                <div class="org-table-container">
                    <table class="org-table">
                        <thead>
                            <tr>
                                <th style="width: 40px;">
                                    <input type="checkbox" onclick="toggleSelectAll(this)">
                                </th>
                                <th class="sortable" onclick="sortTable('name')">
                                    ì¡°ì§ëª… <span>â†•ï¸</span>
                                </th>
                                <th class="sortable" onclick="sortTable('plan')">
                                    í”Œëœ <span>â†•ï¸</span>
                                </th>
                                <th class="sortable" onclick="sortTable('users')">
                                    ì‚¬ìš©ì ìˆ˜ <span>â†•ï¸</span>
                                </th>
                                <th class="sortable" onclick="sortTable('usage')">
                                    ì‚¬ìš©ëŸ‰ <span>â†•ï¸</span>
                                </th>
                                <th class="sortable" onclick="sortTable('mrr')">
                                    MRR <span>â†•ï¸</span>
                                </th>
                                <th class="sortable" onclick="sortTable('status')">
                                    ìƒíƒœ <span>â†•ï¸</span>
                                </th>
                                <th class="sortable" onclick="sortTable('created')">
                                    ê°€ì…ì¼ <span>â†•ï¸</span>
                                </th>
                                <th style="width: 120px;">ì•¡ì…˜</th>
                            </tr>
                        </thead>
                        <tbody id="organizationsTableBody">
                            <!-- ì¡°ì§ 1 -->
                            <tr data-org-id="org-1" onclick="viewOrganizationDetail('org-1')">
                                <td onclick="event.stopPropagation();">
                                    <input type="checkbox" class="org-checkbox" value="org-1">
                                </td>
                                <td>
                                    <div class="org-info">
                                        <div class="org-logo">ğŸ¢</div>
                                        <div class="org-details">
                                            <div class="org-name">ê¸€ë¡œë²Œë¬´ì—­</div>
                                            <div class="org-id">org-1a2b3c4d</div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <span class="plan-badge plan-badge--enterprise">Enterprise</span>
                                </td>
                                <td>
                                    <strong style="color: var(--text-primary);">67</strong>
                                    <span style="font-size: var(--text-xs); color: var(--text-secondary);">ëª…</span>
                                </td>
                                <td>
                                    <div class="usage-bar">
                                        <div class="usage-bar__label">78%</div>
                                        <div class="usage-bar__progress">
                                            <div class="usage-bar__fill" style="width: 78%;"></div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <strong style="color: var(--platform-primary);">$2,999</strong>
                                </td>
                                <td>
                                    <span class="status-badge status-badge--active">Active</span>
                                </td>
                                <td style="color: var(--text-secondary);">2024-03-15</td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-buttons">
                                        <button class="action-btn" onclick="viewOrganizationDetail('org-1')" title="ìƒì„¸ ë³´ê¸°">
                                            ğŸ‘ï¸
                                        </button>
                                        <button class="action-btn" onclick="editOrganization('org-1')" title="í¸ì§‘">
                                            âœï¸
                                        </button>
                                        <button class="action-btn" onclick="showMoreActions('org-1')" title="ë”ë³´ê¸°">
                                            â‹®
                                        </button>
                                    </div>
                                </td>
                            </tr>

                            <!-- ì¡°ì§ 2 -->
                            <tr data-org-id="org-2" onclick="viewOrganizationDetail('org-2')">
                                <td onclick="event.stopPropagation();">
                                    <input type="checkbox" class="org-checkbox" value="org-2">
                                </td>
                                <td>
                                    <div class="org-info">
                                        <div class="org-logo">ğŸš€</div>
                                        <div class="org-details">
                                            <div class="org-name">í…Œí¬ìŠ¤íƒ€íŠ¸ì—… Inc.</div>
                                            <div class="org-id">org-2b3c4d5e</div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <span class="plan-badge plan-badge--professional">Professional</span>
                                </td>
                                <td>
                                    <strong style="color: var(--text-primary);">23</strong>
                                    <span style="font-size: var(--text-xs); color: var(--text-secondary);">ëª…</span>
                                </td>
                                <td>
                                    <div class="usage-bar">
                                        <div class="usage-bar__label">45%</div>
                                        <div class="usage-bar__progress">
                                            <div class="usage-bar__fill" style="width: 45%;"></div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <strong style="color: var(--platform-primary);">$999</strong>
                                </td>
                                <td>
                                    <span class="status-badge status-badge--trial">Trial</span>
                                </td>
                                <td style="color: var(--text-secondary);">2024-10-08</td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-buttons">
                                        <button class="action-btn" onclick="viewOrganizationDetail('org-2')" title="ìƒì„¸ ë³´ê¸°">
                                            ğŸ‘ï¸
                                        </button>
                                        <button class="action-btn" onclick="editOrganization('org-2')" title="í¸ì§‘">
                                            âœï¸
                                        </button>
                                        <button class="action-btn" onclick="showMoreActions('org-2')" title="ë”ë³´ê¸°">
                                            â‹®
                                        </button>
                                    </div>
                                </td>
                            </tr>

                            <!-- ì¡°ì§ 3 -->
                            <tr data-org-id="org-3" onclick="viewOrganizationDetail('org-3')">
                                <td onclick="event.stopPropagation();">
                                    <input type="checkbox" class="org-checkbox" value="org-3">
                                </td>
                                <td>
                                    <div class="org-info">
                                        <div class="org-logo">ğŸ¤–</div>
                                        <div class="org-details">
                                            <div class="org-name">AIì—°êµ¬ì†Œ</div>
                                            <div class="org-id">org-3c4d5e6f</div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <span class="plan-badge plan-badge--professional">Professional</span>
                                </td>
                                <td>
                                    <strong style="color: var(--text-primary);">45</strong>
                                    <span style="font-size: var(--text-xs); color: var(--text-secondary);">ëª…</span>
                                </td>
                                <td>
                                    <div class="usage-bar">
                                        <div class="usage-bar__label">92%</div>
                                        <div class="usage-bar__progress">
                                            <div class="usage-bar__fill usage-bar__fill--high" style="width: 92%;"></div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <strong style="color: var(--platform-primary);">$999</strong>
                                </td>
                                <td>
                                    <span class="status-badge status-badge--active">Active</span>
                                </td>
                                <td style="color: var(--text-secondary);">2024-05-22</td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-buttons">
                                        <button class="action-btn" onclick="viewOrganizationDetail('org-3')" title="ìƒì„¸ ë³´ê¸°">
                                            ğŸ‘ï¸
                                        </button>
                                        <button class="action-btn" onclick="editOrganization('org-3')" title="í¸ì§‘">
                                            âœï¸
                                        </button>
                                        <button class="action-btn" onclick="showMoreActions('org-3')" title="ë”ë³´ê¸°">
                                            â‹®
                                        </button>
                                    </div>
                                </td>
                            </tr>

                            <!-- ì¡°ì§ 4 -->
                            <tr data-org-id="org-4" onclick="viewOrganizationDetail('org-4')">
                                <td onclick="event.stopPropagation();">
                                    <input type="checkbox" class="org-checkbox" value="org-4">
                                </td>
                                <td>
                                    <div class="org-info">
                                        <div class="org-logo">ğŸ¨</div>
                                        <div class="org-details">
                                            <div class="org-name">ë””ìì¸ìŠ¤íŠœë””ì˜¤</div>
                                            <div class="org-id">org-4d5e6f7g</div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <span class="plan-badge plan-badge--starter">Starter</span>
                                </td>
                                <td>
                                    <strong style="color: var(--text-primary);">12</strong>
                                    <span style="font-size: var(--text-xs); color: var(--text-secondary);">ëª…</span>
                                </td>
                                <td>
                                    <div class="usage-bar">
                                        <div class="usage-bar__label">34%</div>
                                        <div class="usage-bar__progress">
                                            <div class="usage-bar__fill" style="width: 34%;"></div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <strong style="color: var(--platform-primary);">$299</strong>
                                </td>
                                <td>
                                    <span class="status-badge status-badge--active">Active</span>
                                </td>
                                <td style="color: var(--text-secondary);">2024-07-10</td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-buttons">
                                        <button class="action-btn" onclick="viewOrganizationDetail('org-4')" title="ìƒì„¸ ë³´ê¸°">
                                            ğŸ‘ï¸
                                        </button>
                                        <button class="action-btn" onclick="editOrganization('org-4')" title="í¸ì§‘">
                                            âœï¸
                                        </button>
                                        <button class="action-btn" onclick="showMoreActions('org-4')" title="ë”ë³´ê¸°">
                                            â‹®
                                        </button>
                                    </div>
                                </td>
                            </tr>

                            <!-- ì¡°ì§ 5 -->
                            <tr data-org-id="org-5" onclick="viewOrganizationDetail('org-5')">
                                <td onclick="event.stopPropagation();">
                                    <input type="checkbox" class="org-checkbox" value="org-5">
                                </td>
                                <td>
                                    <div class="org-info">
                                        <div class="org-logo">ğŸ’¼</div>
                                        <div class="org-details">
                                            <div class="org-name">ì»¨ì„¤íŒ…ê·¸ë£¹</div>
                                            <div class="org-id">org-5e6f7g8h</div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <span class="plan-badge plan-badge--enterprise">Enterprise</span>
                                </td>
                                <td>
                                    <strong style="color: var(--text-primary);">89</strong>
                                    <span style="font-size: var(--text-xs); color: var(--text-secondary);">ëª…</span>
                                </td>
                                <td>
                                    <div class="usage-bar">
                                        <div class="usage-bar__label">56%</div>
                                        <div class="usage-bar__progress">
                                            <div class="usage-bar__fill" style="width: 56%;"></div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <strong style="color: var(--platform-primary);">$2,999</strong>
                                </td>
                                <td>
                                    <span class="status-badge status-badge--active">Active</span>
                                </td>
                                <td style="color: var(--text-secondary);">2024-02-08</td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-buttons">
                                        <button class="action-btn" onclick="viewOrganizationDetail('org-5')" title="ìƒì„¸ ë³´ê¸°">
                                            ğŸ‘ï¸
                                        </button>
                                        <button class="action-btn" onclick="editOrganization('org-5')" title="í¸ì§‘">
                                            âœï¸
                                        </button>
                                        <button class="action-btn" onclick="showMoreActions('org-5')" title="ë”ë³´ê¸°">
                                            â‹®
                                        </button>
                                    </div>
                                </td>
                            </tr>

                            <!-- ì¡°ì§ 6 -->
                            <tr data-org-id="org-6" onclick="viewOrganizationDetail('org-6')">
                                <td onclick="event.stopPropagation();">
                                    <input type="checkbox" class="org-checkbox" value="org-6">
                                </td>
                                <td>
                                    <div class="org-info">
                                        <div class="org-logo">ğŸ“š</div>
                                        <div class="org-details">
                                            <div class="org-name">ì—ë“€í…Œí¬</div>
                                            <div class="org-id">org-6f7g8h9i</div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <span class="plan-badge plan-badge--starter">Starter</span>
                                </td>
                                <td>
                                    <strong style="color: var(--text-primary);">8</strong>
                                    <span style="font-size: var(--text-xs); color: var(--text-secondary);">ëª…</span>
                                </td>
                                <td>
                                    <div class="usage-bar">
                                        <div class="usage-bar__label">23%</div>
                                        <div class="usage-bar__progress">
                                            <div class="usage-bar__fill" style="width: 23%;"></div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <strong style="color: var(--platform-primary);">$299</strong>
                                </td>
                                <td>
                                    <span class="status-badge status-badge--trial">Trial</span>
                                </td>
                                <td style="color: var(--text-secondary);">2024-10-04</td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-buttons">
                                        <button class="action-btn" onclick="viewOrganizationDetail('org-6')" title="ìƒì„¸ ë³´ê¸°">
                                            ğŸ‘ï¸
                                        </button>
                                        <button class="action-btn" onclick="editOrganization('org-6')" title="í¸ì§‘">
                                            âœï¸
                                        </button>
                                        <button class="action-btn" onclick="showMoreActions('org-6')" title="ë”ë³´ê¸°">
                                            â‹®
                                        </button>
                                    </div>
                                </td>
                            </tr>

                            <!-- ì¡°ì§ 7 -->
                            <tr data-org-id="org-7" onclick="viewOrganizationDetail('org-7')">
                                <td onclick="event.stopPropagation();">
                                    <input type="checkbox" class="org-checkbox" value="org-7">
                                </td>
                                <td>
                                    <div class="org-info">
                                        <div class="org-logo">ğŸ¥</div>
                                        <div class="org-details">
                                            <div class="org-name">ë©”ë””ì»¬ì„¼í„°</div>
                                            <div class="org-id">org-7g8h9i0j</div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <span class="plan-badge plan-badge--professional">Professional</span>
                                </td>
                                <td>
                                    <strong style="color: var(--text-primary);">34</strong>
                                    <span style="font-size: var(--text-xs); color: var(--text-secondary);">ëª…</span>
                                </td>
                                <td>
                                    <div class="usage-bar">
                                        <div class="usage-bar__label">67%</div>
                                        <div class="usage-bar__progress">
                                            <div class="usage-bar__fill" style="width: 67%;"></div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <strong style="color: var(--platform-primary);">$999</strong>
                                </td>
                                <td>
                                    <span class="status-badge status-badge--active">Active</span>
                                </td>
                                <td style="color: var(--text-secondary);">2024-06-18</td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-buttons">
                                        <button class="action-btn" onclick="viewOrganizationDetail('org-7')" title="ìƒì„¸ ë³´ê¸°">
                                            ğŸ‘ï¸
                                        </button>
                                        <button class="action-btn" onclick="editOrganization('org-7')" title="í¸ì§‘">
                                            âœï¸
                                        </button>
                                        <button class="action-btn" onclick="showMoreActions('org-7')" title="ë”ë³´ê¸°">
                                            â‹®
                                        </button>
                                    </div>
                                </td>
                            </tr>

                            <!-- ì¡°ì§ 8 -->
                            <tr data-org-id="org-8" onclick="viewOrganizationDetail('org-8')">
                                <td onclick="event.stopPropagation();">
                                    <input type="checkbox" class="org-checkbox" value="org-8">
                                </td>
                                <td>
                                    <div class="org-info">
                                        <div class="org-logo">ğŸ®</div>
                                        <div class="org-details">
                                            <div class="org-name">ê²Œì„ê°œë°œì‚¬</div>
                                            <div class="org-id">org-8h9i0j1k</div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <span class="plan-badge plan-badge--free">Free</span>
                                </td>
                                <td>
                                    <strong style="color: var(--text-primary);">5</strong>
                                    <span style="font-size: var(--text-xs); color: var(--text-secondary);">ëª…</span>
                                </td>
                                <td>
                                    <div class="usage-bar">
                                        <div class="usage-bar__label">12%</div>
                                        <div class="usage-bar__progress">
                                            <div class="usage-bar__fill" style="width: 12%;"></div>
                                        </div>
                                    </div>
                                </td>
                                <td>
                                    <strong style="color: var(--text-secondary);">$0</strong>
                                </td>
                                <td>
                                    <span class="status-badge status-badge--active">Active</span>
                                </td>
                                <td style="color: var(--text-secondary);">2024-09-25</td>
                                <td onclick="event.stopPropagation();">
                                    <div class="action-buttons">
                                        <button class="action-btn" onclick="viewOrganizationDetail('org-8')" title="ìƒì„¸ ë³´ê¸°">
                                            ğŸ‘ï¸
                                        </button>
                                        <button class="action-btn" onclick="editOrganization('org-8')" title="í¸ì§‘">
                                            âœï¸
                                        </button>
                                        <button class="action-btn" onclick="showMoreActions('org-8')" title="ë”ë³´ê¸°">
                                            â‹®
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
                    <div class="pagination">
                        <div class="pagination-info">
                            1-8 / 247ê°œ ì¡°ì§
                        </div>
                        <div class="pagination-controls">
                            <button class="pagination-btn" disabled>â—€ ì´ì „</button>
                            <button class="pagination-btn pagination-btn--active">1</button>
                            <button class="pagination-btn">2</button>
                            <button class="pagination-btn">3</button>
                            <button class="pagination-btn">...</button>
                            <button class="pagination-btn">31</button>
                            <button class="pagination-btn">ë‹¤ìŒ â–¶</button>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- ì¡°ì§ ì¶”ê°€ ëª¨ë‹¬ -->
        <div id="addOrganizationModal" class="modal-overlay">
            <div class="modal">
                <div class="modal-header">
                    <h2 class="modal-title">â• ìƒˆ ì¡°ì§ ì¶”ê°€</h2>
                    <button class="modal-close" onclick="closeAddOrganizationModal()">âœ•</button>
                </div>
                <div class="modal-body">
                    <form id="addOrganizationForm">
                        <div class="form-group">
                            <label class="form-label form-label--required">ì¡°ì§ëª…</label>
                            <input type="text" class="form-input" placeholder="ì¡°ì§ëª… ì…ë ¥" required>
                            <div class="form-help">ì¡°ì§ì˜ ê³µì‹ ëª…ì¹­ì„ ì…ë ¥í•˜ì„¸ìš”</div>
                        </div>

                        <div class="form-group">
                            <label class="form-label form-label--required">ê´€ë¦¬ì ì´ë©”ì¼</label>
                            <input type="email" class="form-input" placeholder="admin@company.com" required>
                            <div class="form-help">ì¡°ì§ ê´€ë¦¬ìì˜ ì´ë©”ì¼ ì£¼ì†Œ</div>
                        </div>

                        <div class="form-group">
                            <label class="form-label form-label--required">í”Œëœ ì„ íƒ</label>
                            <select class="form-select" required>
                                <option value="">í”Œëœ ì„ íƒ</option>
                                <option value="free">Free - $0/ì›”</option>
                                <option value="starter">Starter - $299/ì›”</option>
                                <option value="professional">Professional - $999/ì›”</option>
                                <option value="enterprise">Enterprise - $2,999/ì›”</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">ì‚°ì—… ë¶„ì•¼</label>
                            <select class="form-select">
                                <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                                <option value="tech">Technology</option>
                                <option value="finance">Finance</option>
                                <option value="healthcare">Healthcare</option>
                                <option value="education">Education</option>
                                <option value="retail">Retail</option>
                                <option value="manufacturing">Manufacturing</option>
                                <option value="other">ê¸°íƒ€</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">íšŒì‚¬ ê·œëª¨</label>
                            <select class="form-select">
                                <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                                <option value="1-10">1-10ëª…</option>
                                <option value="11-50">11-50ëª…</option>
                                <option value="51-200">51-200ëª…</option>
                                <option value="201-500">201-500ëª…</option>
                                <option value="500+">500ëª…+</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">ë©”ëª¨</label>
                            <textarea class="form-textarea" placeholder="ì¡°ì§ì— ëŒ€í•œ ë©”ëª¨ë‚˜ íŠ¹ì´ì‚¬í•­"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn--outline" onclick="closeAddOrganizationModal()">ì·¨ì†Œ</button>
                    <button class="btn btn--primary" onclick="submitAddOrganization()">ì¡°ì§ ì¶”ê°€</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ê³µí†µ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="../common/layout.js"></script>
    <script src="../common/utils.js"></script>

    <!-- í˜ì´ì§€ ì „ìš© ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
        // ========== Organization Management ì „ìš© ë¡œì§ ==========

        // ì „ì—­ ë³€ìˆ˜
        let organizationsData = [];
        let filteredOrganizations = [];
        let sortColumn = 'created';
        let sortDirection = 'desc';
        let currentPage = 1;
        let itemsPerPage = 8;

        // ========== ì´ˆê¸°í™” ==========
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Organization Management í˜ì´ì§€ ì´ˆê¸°í™”');
            
            initializeOrganizations();
            loadOrganizationsData();
        });

        function initializeOrganizations() {
            // ì´ˆê¸° ë°ì´í„° ë¡œë“œ
            organizationsData = getAllOrganizations();
            filteredOrganizations = [...organizationsData];
            
            // URL íŒŒë¼ë¯¸í„° í™•ì¸
            const urlParams = new URLSearchParams(window.location.search);
            const action = urlParams.get('action');
            const orgId = urlParams.get('id');

            if (action === 'add') {
                openAddOrganizationModal();
            } else if (action === 'view' && orgId) {
                viewOrganizationDetail(orgId);
            }
        }

        function loadOrganizationsData() {
            // ì‹¤ì œë¡œëŠ” ì„œë²„ì—ì„œ ë°ì´í„° ê°€ì ¸ì˜´
            console.log('ì¡°ì§ ë°ì´í„° ë¡œë“œ ì™„ë£Œ:', organizationsData.length);
        }

        // ========== ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ==========
        function getAllOrganizations() {
            // ì‹¤ì œë¡œëŠ” API í˜¸ì¶œ
            return [
                {
                    id: 'org-1',
                    name: 'ê¸€ë¡œë²Œë¬´ì—­',
                    email: 'admin@globaltrade.com',
                    plan: 'enterprise',
                    users: 67,
                    usage: 78,
                    mrr: 2999,
                    status: 'active',
                    created: '2024-03-15',
                    industry: 'finance',
                    size: '51-200'
                },
                {
                    id: 'org-2',
                    name: 'í…Œí¬ìŠ¤íƒ€íŠ¸ì—… Inc.',
                    email: 'admin@techstartup.com',
                    plan: 'professional',
                    users: 23,
                    usage: 45,
                    mrr: 999,
                    status: 'trial',
                    created: '2024-10-08',
                    industry: 'tech',
                    size: '11-50'
                },
                {
                    id: 'org-3',
                    name: 'AIì—°êµ¬ì†Œ',
                    email: 'admin@ailab.com',
                    plan: 'professional',
                    users: 45,
                    usage: 92,
                    mrr: 999,
                    status: 'active',
                    created: '2024-05-22',
                    industry: 'tech',
                    size: '11-50'
                },
                {
                    id: 'org-4',
                    name: 'ë””ìì¸ìŠ¤íŠœë””ì˜¤',
                    email: 'admin@designstudio.com',
                    plan: 'starter',
                    users: 12,
                    usage: 34,
                    mrr: 299,
                    status: 'active',
                    created: '2024-07-10',
                    industry: 'other',
                    size: '1-10'
                },
                {
                    id: 'org-5',
                    name: 'ì»¨ì„¤íŒ…ê·¸ë£¹',
                    email: 'admin@consulting.com',
                    plan: 'enterprise',
                    users: 89,
                    usage: 56,
                    mrr: 2999,
                    status: 'active',
                    created: '2024-02-08',
                    industry: 'finance',
                    size: '51-200'
                },
                {
                    id: 'org-6',
                    name: 'ì—ë“€í…Œí¬',
                    email: 'admin@edutech.com',
                    plan: 'starter',
                    users: 8,
                    usage: 23,
                    mrr: 299,
                    status: 'trial',
                    created: '2024-10-04',
                    industry: 'education',
                    size: '1-10'
                },
                {
                    id: 'org-7',
                    name: 'ë©”ë””ì»¬ì„¼í„°',
                    email: 'admin@medical.com',
                    plan: 'professional',
                    users: 34,
                    usage: 67,
                    mrr: 999,
                    status: 'active',
                    created: '2024-06-18',
                    industry: 'healthcare',
                    size: '11-50'
                },
                {
                    id: 'org-8',
                    name: 'ê²Œì„ê°œë°œì‚¬',
                    email: 'admin@gamedev.com',
                    plan: 'free',
                    users: 5,
                    usage: 12,
                    mrr: 0,
                    status: 'active',
                    created: '2024-09-25',
                    industry: 'tech',
                    size: '1-10'
                }
            ];
        }

        // ========== ê²€ìƒ‰ ==========
        function searchOrganizations(query) {
            const lowerQuery = query.toLowerCase();
            
            filteredOrganizations = organizationsData.filter(org => {
                return org.name.toLowerCase().includes(lowerQuery) ||
                       org.email.toLowerCase().includes(lowerQuery) ||
                       org.id.toLowerCase().includes(lowerQuery);
            });

            currentPage = 1;
            renderOrganizationsTable();
        }

        // ========== í•„í„°ë§ ==========
        function filterByPlan(plan) {
            if (!plan) {
                filteredOrganizations = [...organizationsData];
            } else {
                filteredOrganizations = organizationsData.filter(org => org.plan === plan);
            }
            currentPage = 1;
            renderOrganizationsTable();
        }

        function filterByStatus(status) {
            if (!status) {
                filteredOrganizations = [...organizationsData];
            } else {
                filteredOrganizations = organizationsData.filter(org => org.status === status);
            }
            currentPage = 1;
            renderOrganizationsTable();
        }

        function filterByDate(period) {
            const now = new Date();
            
            if (!period) {
                filteredOrganizations = [...organizationsData];
            } else {
                filteredOrganizations = organizationsData.filter(org => {
                    const orgDate = new Date(org.created);
                    
                    switch(period) {
                        case 'today':
                            return orgDate.toDateString() === now.toDateString();
                        case 'week':
                            const weekAgo = new Date(now - 7 * 24 * 60 * 60 * 1000);
                            return orgDate >= weekAgo;
                        case 'month':
                            const monthAgo = new Date(now - 30 * 24 * 60 * 60 * 1000);
                            return orgDate >= monthAgo;
                        case 'quarter':
                            const quarterAgo = new Date(now - 90 * 24 * 60 * 60 * 1000);
                            return orgDate >= quarterAgo;
                        default:
                            return true;
                    }
                });
            }
            currentPage = 1;
            renderOrganizationsTable();
        }

        function resetFilters() {
            // ëª¨ë“  í•„í„° ì´ˆê¸°í™”
            document.getElementById('searchInput').value = '';
            document.querySelectorAll('.filter-select').forEach(select => {
                select.selectedIndex = 0;
            });
            
            filteredOrganizations = [...organizationsData];
            currentPage = 1;
            renderOrganizationsTable();
            
            window.GrowFitUtils.showToast('í•„í„°ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤', 'info');
        }

        // ========== ì •ë ¬ ==========
        function sortTable(column) {
            if (sortColumn === column) {
                sortDirection = sortDirection === 'asc' ? 'desc' : 'asc';
            } else {
                sortColumn = column;
                sortDirection = 'asc';
            }

            filteredOrganizations.sort((a, b) => {
                let aVal = a[column];
                let bVal = b[column];

                // ìˆ«ì ë¹„êµ
                if (typeof aVal === 'number') {
                    return sortDirection === 'asc' ? aVal - bVal : bVal - aVal;
                }

                // ë¬¸ìì—´ ë¹„êµ
                if (sortDirection === 'asc') {
                    return aVal > bVal ? 1 : -1;
                } else {
                    return aVal < bVal ? 1 : -1;
                }
            });

            renderOrganizationsTable();
            
            window.GrowFitUtils.showToast(`${column}ë¡œ ì •ë ¬ë˜ì—ˆìŠµë‹ˆë‹¤`, 'info');
        }

        // ========== í…Œì´ë¸” ë Œë”ë§ ==========
        function renderOrganizationsTable() {
            // ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” ë™ì ìœ¼ë¡œ í…Œì´ë¸” ìƒì„±
            console.log('í…Œì´ë¸” ë Œë”ë§:', filteredOrganizations.length, 'ê°œ ì¡°ì§');
        }

        // ========== ì„ íƒ ê´€ë¦¬ ==========
        function toggleSelectAll(checkbox) {
            const checkboxes = document.querySelectorAll('.org-checkbox');
            checkboxes.forEach(cb => {
                cb.checked = checkbox.checked;
            });

            updateBulkActionButton();
        }

        function updateBulkActionButton() {
            const selectedCount = document.querySelectorAll('.org-checkbox:checked').length;
            
            if (selectedCount > 0) {
                console.log(`${selectedCount}ê°œ ì¡°ì§ ì„ íƒë¨`);
            }
        }

        // ========== ì¡°ì§ ìƒì„¸ ë³´ê¸° ==========
        function viewOrganizationDetail(orgId) {
            const org = organizationsData.find(o => o.id === orgId);
            
            if (!org) {
                window.GrowFitUtils.showToast('ì¡°ì§ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'error');
                return;
            }

            const detail = `
ğŸ¢ ì¡°ì§ ìƒì„¸ ì •ë³´

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ê¸°ë³¸ ì •ë³´:
- ì¡°ì§ëª…: ${org.name}
- ID: ${org.id}
- ì´ë©”ì¼: ${org.email}
- ê°€ì…ì¼: ${org.created}

í”Œëœ & ê²°ì œ:
- í”Œëœ: ${getPlanName(org.plan)}
- MRR: $${org.mrr.toLocaleString()}
- ìƒíƒœ: ${getStatusName(org.status)}

ì‚¬ìš© í˜„í™©:
- ì‚¬ìš©ì ìˆ˜: ${org.users}ëª…
- ì‚¬ìš©ëŸ‰: ${org.usage}%
- ì‚°ì—…: ${org.industry}
- ê·œëª¨: ${org.size}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ìµœê·¼ í™œë™:
- API í˜¸ì¶œ: 847K (ì˜¤ëŠ˜)
- ë§ˆì§€ë§‰ ë¡œê·¸ì¸: 2ì‹œê°„ ì „
- ì‹ ê·œ ì‚¬ìš©ì: 3ëª… (ì´ë²ˆ ì£¼)

[ìƒì„¸ í˜ì´ì§€] [í¸ì§‘] [ì´ë©”ì¼ ë°œì†¡]
            `.trim();

            alert(detail);
        }

        // ========== ì¡°ì§ í¸ì§‘ ==========
        function editOrganization(orgId) {
            const org = organizationsData.find(o => o.id === orgId);
            
            if (!org) {
                window.GrowFitUtils.showToast('ì¡°ì§ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤', 'error');
                return;
            }

            const options = `
âœï¸ ì¡°ì§ í¸ì§‘: ${org.name}

ìˆ˜ì •í•  í•­ëª©:

1. ê¸°ë³¸ ì •ë³´ (ì´ë¦„, ì´ë©”ì¼)
2. í”Œëœ ë³€ê²½
3. ìƒíƒœ ë³€ê²½
4. ì‚¬ìš©ëŸ‰ ì œí•œ
5. ê²°ì œ ì •ë³´

ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:
            `.trim();

            const choice = prompt(options);

            if (choice && ['1', '2', '3', '4', '5'].includes(choice)) {
                handleEditAction(orgId, choice);
            }
        }

        function handleEditAction(orgId, action) {
            switch(action) {
                case '1':
                    editBasicInfo(orgId);
                    break;
                case '2':
                    changePlan(orgId);
                    break;
                case '3':
                    changeStatus(orgId);
                    break;
                case '4':
                    setUsageLimit(orgId);
                    break;
                case '5':
                    editBillingInfo(orgId);
                    break;
            }
        }

        function editBasicInfo(orgId) {
            const org = organizationsData.find(o => o.id === orgId);
            const newName = prompt('ìƒˆ ì¡°ì§ëª…:', org.name);
            
            if (newName && newName.trim()) {
                org.name = newName;
                window.GrowFitUtils.showToast('ì¡°ì§ëª…ì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                renderOrganizationsTable();
            }
        }

        function changePlan(orgId) {
            const plans = `
í”Œëœ ë³€ê²½

í˜„ì¬ í”Œëœ ì„ íƒ:

1. Free ($0/ì›”)
2. Starter ($299/ì›”)
3. Professional ($999/ì›”)
4. Enterprise ($2,999/ì›”)

ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:
            `.trim();

            const choice = prompt(plans);

            if (choice && ['1', '2', '3', '4'].includes(choice)) {
                const planMap = {
                    '1': 'free',
                    '2': 'starter',
                    '3': 'professional',
                    '4': 'enterprise'
                };

                const org = organizationsData.find(o => o.id === orgId);
                org.plan = planMap[choice];
                
                window.GrowFitUtils.showToast('í”Œëœì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                renderOrganizationsTable();
            }
        }

        function changeStatus(orgId) {
            const statuses = `
ìƒíƒœ ë³€ê²½

1. Active (í™œì„±)
2. Trial (ì²´í—˜)
3. Inactive (ë¹„í™œì„±)
4. Suspended (ì •ì§€)

ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:
            `.trim();

            const choice = prompt(statuses);

            if (choice && ['1', '2', '3', '4'].includes(choice)) {
                const statusMap = {
                    '1': 'active',
                    '2': 'trial',
                    '3': 'inactive',
                    '4': 'suspended'
                };

                const org = organizationsData.find(o => o.id === orgId);
                org.status = statusMap[choice];
                
                window.GrowFitUtils.showToast('ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                renderOrganizationsTable();
            }
        }

        function setUsageLimit(orgId) {
            const limit = prompt('ì›” ì‚¬ìš©ëŸ‰ ì œí•œ (USD):');
            
            if (limit && !isNaN(limit)) {
                window.GrowFitUtils.showToast('ì‚¬ìš©ëŸ‰ ì œí•œì´ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
            }
        }

        function editBillingInfo(orgId) {
            alert('ê²°ì œ ì •ë³´ í¸ì§‘ ê¸°ëŠ¥ì€ ê°œë°œ ì¤‘ì…ë‹ˆë‹¤');
        }

        // ========== ë”ë³´ê¸° ì•¡ì…˜ ==========
        function showMoreActions(orgId) {
            const org = organizationsData.find(o => o.id === orgId);

            const actions = `
â‹® ${org.name} ì¶”ê°€ ì‘ì—…

1. ğŸ“Š ì‚¬ìš© í†µê³„ ë³´ê¸°
2. ğŸ’° ê²°ì œ ë‚´ì—­
3. ğŸ‘¥ ì‚¬ìš©ì ê´€ë¦¬
4. ğŸ“§ ì´ë©”ì¼ ë°œì†¡
5. ğŸ”„ í”Œëœ ì—…ê·¸ë ˆì´ë“œ
6. â¸ï¸ ì¼ì‹œ ì •ì§€
7. ğŸ—‘ï¸ ì¡°ì§ ì‚­ì œ

ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:
            `.trim();

            const choice = prompt(actions);

            if (choice && ['1', '2', '3', '4', '5', '6', '7'].includes(choice)) {
                handleMoreAction(orgId, choice);
            }
        }

        function handleMoreAction(orgId, action) {
            const org = organizationsData.find(o => o.id === orgId);

            switch(action) {
                case '1':
                    viewUsageStats(orgId);
                    break;
                case '2':
                    viewBillingHistory(orgId);
                    break;
                case '3':
                    window.location.href = `user-management.html?org=${orgId}`;
                    break;
                case '4':
                    sendEmail(orgId);
                    break;
                case '5':
                    upgradePlan(orgId);
                    break;
                case '6':
                    suspendOrganization(orgId);
                    break;
                case '7':
                    deleteOrganization(orgId);
                    break;
            }
        }

        function viewUsageStats(orgId) {
            const org = organizationsData.find(o => o.id === orgId);

            const stats = `
ğŸ“Š ${org.name} ì‚¬ìš© í†µê³„

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ì´ë²ˆ ë‹¬:
- API í˜¸ì¶œ: 847K
- ë¹„ìš©: $${org.mrr}
- ì‚¬ìš©ë¥ : ${org.usage}%

ì˜¤ëŠ˜:
- API í˜¸ì¶œ: 34.2K
- í™œì„± ì‚¬ìš©ì: ${Math.floor(org.users * 0.7)}ëª…
- í‰ê·  ì‘ë‹µ: 0.12ì´ˆ

ì§€ë‚œ 7ì¼:
- ì´ API í˜¸ì¶œ: 234K
- ì¼í‰ê· : 33.4K
- í”¼í¬ ì‹œê°„: 14:00-16:00

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

LLM ì‚¬ìš© ë¶„í¬:
- OpenAI: 42%
- Claude: 38%
- Gemini: 20%

[ìƒì„¸ ë¦¬í¬íŠ¸] [ë‚´ë³´ë‚´ê¸°]
            `.trim();

            alert(stats);
        }

        function viewBillingHistory(orgId) {
            const org = organizationsData.find(o => o.id === orgId);

            const billing = `
ğŸ’° ${org.name} ê²°ì œ ë‚´ì—­

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ìµœê·¼ ê²°ì œ:

2024-10-01
- ê¸ˆì•¡: $${org.mrr}
- í”Œëœ: ${getPlanName(org.plan)}
- ìƒíƒœ: âœ… ì™„ë£Œ

2024-09-01
- ê¸ˆì•¡: $${org.mrr}
- í”Œëœ: ${getPlanName(org.plan)}
- ìƒíƒœ: âœ… ì™„ë£Œ

2024-08-01
- ê¸ˆì•¡: $${org.mrr}
- í”Œëœ: ${getPlanName(org.plan)}
- ìƒíƒœ: âœ… ì™„ë£Œ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ì´ ê²°ì œì•¡: $${org.mrr * 12}
í‰ê·  ì›” ê²°ì œ: $${org.mrr}
ë‹¤ìŒ ê²°ì œì¼: 2024-11-01

[ì „ì²´ ë‚´ì—­] [ì˜ìˆ˜ì¦ ë°œì†¡]
            `.trim();

            alert(billing);
        }

        function sendEmail(orgId) {
            const org = organizationsData.find(o => o.id === orgId);

            const templates = `
ğŸ“§ ì´ë©”ì¼ ë°œì†¡

ë°›ëŠ” ì‚¬ëŒ: ${org.email}

í…œí”Œë¦¿ ì„ íƒ:

1. í™˜ì˜ ì´ë©”ì¼
2. í”Œëœ ì—…ê·¸ë ˆì´ë“œ ì•ˆë‚´
3. ì‚¬ìš©ëŸ‰ ì•Œë¦¼
4. ê²°ì œ ì™„ë£Œ í™•ì¸
5. ì»¤ìŠ¤í…€ ì´ë©”ì¼

ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:
            `.trim();

            const choice = prompt(templates);

            if (choice) {
                window.GrowFitUtils.showToast('ì´ë©”ì¼ì´ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
            }
        }

        function upgradePlan(orgId) {
            const org = organizationsData.find(o => o.id === orgId);

            const upgrade = `
ğŸ”„ í”Œëœ ì—…ê·¸ë ˆì´ë“œ

í˜„ì¬ í”Œëœ: ${getPlanName(org.plan)}

ì—…ê·¸ë ˆì´ë“œ ì˜µì…˜:

${org.plan === 'free' ? 'âœ“ Starter ($299/ì›”)' : ''}
${['free', 'starter'].includes(org.plan) ? 'âœ“ Professional ($999/ì›”)' : ''}
${org.plan !== 'enterprise' ? 'âœ“ Enterprise ($2,999/ì›”)' : ''}

ì—…ê·¸ë ˆì´ë“œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?
            `.trim();

            if (confirm(upgrade)) {
                window.GrowFitUtils.showToast('í”Œëœ ì—…ê·¸ë ˆì´ë“œê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
            }
        }

        function suspendOrganization(orgId) {
            const org = organizationsData.find(o => o.id === orgId);

            if (confirm(`"${org.name}"ì„(ë¥¼) ì¼ì‹œ ì •ì§€í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nì‚¬ìš©ìë“¤ì˜ ì ‘ê·¼ì´ ì°¨ë‹¨ë©ë‹ˆë‹¤.`)) {
                org.status = 'suspended';
                window.GrowFitUtils.showToast('ì¡°ì§ì´ ì¼ì‹œ ì •ì§€ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                renderOrganizationsTable();
            }
        }

        function deleteOrganization(orgId) {
            const org = organizationsData.find(o => o.id === orgId);

            const confirmText = prompt(`
âš ï¸ ì¡°ì§ ì‚­ì œ

ì •ë§ë¡œ "${org.name}"ì„(ë¥¼) ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?

ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìœ¼ë©°:
- ëª¨ë“  ì‚¬ìš©ì ê³„ì • ì‚­ì œ
- ëª¨ë“  ë°ì´í„° ì˜êµ¬ ì‚­ì œ
- ê²°ì œ êµ¬ë… ì·¨ì†Œ

ì‚­ì œí•˜ë ¤ë©´ ì¡°ì§ëª…ì„ ì…ë ¥í•˜ì„¸ìš”:
            `.trim());

            if (confirmText === org.name) {
                window.GrowFitUtils.showToast('ì¡°ì§ì„ ì‚­ì œí•˜ëŠ” ì¤‘...', 'info');

                setTimeout(() => {
                    const index = organizationsData.findIndex(o => o.id === orgId);
                    if (index > -1) {
                        organizationsData.splice(index, 1);
                        filteredOrganizations = [...organizationsData];
                    }

                    window.GrowFitUtils.showToast('ì¡°ì§ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                    renderOrganizationsTable();
                }, 2000);
            } else if (confirmText) {
                window.GrowFitUtils.showToast('ì¡°ì§ëª…ì´ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤', 'error');
            }
        }

        // ========== ëª¨ë‹¬ ê´€ë¦¬ ==========
        function openAddOrganizationModal() {
            document.getElementById('addOrganizationModal').classList.add('modal-overlay--active');
        }

        function closeAddOrganizationModal() {
            document.getElementById('addOrganizationModal').classList.remove('modal-overlay--active');
            document.getElementById('addOrganizationForm').reset();
        }

        function submitAddOrganization() {
            const form = document.getElementById('addOrganizationForm');
            
            if (!form.checkValidity()) {
                window.GrowFitUtils.showToast('í•„ìˆ˜ í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”', 'error');
                return;
            }

            window.GrowFitUtils.showToast('ìƒˆ ì¡°ì§ì„ ìƒì„±í•˜ëŠ” ì¤‘...', 'info');

            setTimeout(() => {
                // í¼ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
                const formData = new FormData(form);
                const newOrg = {
                    id: 'org-' + Math.random().toString(36).substring(2, 9),
                    name: form.elements[0].value,
                    email: form.elements[1].value,
                    plan: form.elements[2].value,
                    users: 1,
                    usage: 0,
                    mrr: getPlanPrice(form.elements[2].value),
                    status: 'trial',
                    created: new Date().toISOString().split('T')[0]
                };

                organizationsData.unshift(newOrg);
                filteredOrganizations = [...organizationsData];

                window.GrowFitUtils.showToast('ìƒˆ ì¡°ì§ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                closeAddOrganizationModal();
                renderOrganizationsTable();
            }, 1500);
        }

        // ========== ëŒ€ëŸ‰ ì‘ì—… ==========
        function bulkActions() {
            const selectedOrgs = Array.from(document.querySelectorAll('.org-checkbox:checked'));
            
            if (selectedOrgs.length === 0) {
                window.GrowFitUtils.showToast('ì¡°ì§ì„ ì„ íƒí•´ì£¼ì„¸ìš”', 'warning');
                return;
            }

            const actions = `
âš™ï¸ ëŒ€ëŸ‰ ì‘ì—…

ì„ íƒëœ ì¡°ì§: ${selectedOrgs.length}ê°œ

ì‘ì—… ì„ íƒ:

1. í”Œëœ ì¼ê´„ ë³€ê²½
2. ìƒíƒœ ì¼ê´„ ë³€ê²½
3. ì´ë©”ì¼ ì¼ê´„ ë°œì†¡
4. ì‚¬ìš©ëŸ‰ ì œí•œ ì„¤ì •
5. íƒœê·¸ ì¶”ê°€
6. ë‚´ë³´ë‚´ê¸°
7. ì‚­ì œ

ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:
            `.trim();

            const choice = prompt(actions);

            if (choice && ['1', '2', '3', '4', '5', '6', '7'].includes(choice)) {
                handleBulkAction(selectedOrgs, choice);
            }
        }

        function handleBulkAction(selectedOrgs, action) {
            const count = selectedOrgs.length;

            switch(action) {
                case '1':
                    bulkChangePlan(selectedOrgs);
                    break;
                case '2':
                    bulkChangeStatus(selectedOrgs);
                    break;
                case '3':
                    bulkSendEmail(selectedOrgs);
                    break;
                case '4':
                    bulkSetLimit(selectedOrgs);
                    break;
                case '5':
                    bulkAddTags(selectedOrgs);
                    break;
                case '6':
                    bulkExport(selectedOrgs);
                    break;
                case '7':
                    bulkDelete(selectedOrgs);
                    break;
            }
        }

        function bulkChangePlan(selectedOrgs) {
            const plans = `
í”Œëœ ì¼ê´„ ë³€ê²½

ëŒ€ìƒ: ${selectedOrgs.length}ê°œ ì¡°ì§

1. Free ($0/ì›”)
2. Starter ($299/ì›”)
3. Professional ($999/ì›”)
4. Enterprise ($2,999/ì›”)

ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:
            `.trim();

            const choice = prompt(plans);

            if (choice && ['1', '2', '3', '4'].includes(choice)) {
                window.GrowFitUtils.showToast(`${selectedOrgs.length}ê°œ ì¡°ì§ì˜ í”Œëœì„ ë³€ê²½í•˜ëŠ” ì¤‘...`, 'info');
                
                setTimeout(() => {
                    window.GrowFitUtils.showToast('í”Œëœì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                }, 1500);
            }
        }

        function bulkChangeStatus(selectedOrgs) {
            const statuses = `
ìƒíƒœ ì¼ê´„ ë³€ê²½

ëŒ€ìƒ: ${selectedOrgs.length}ê°œ ì¡°ì§

1. Active (í™œì„±)
2. Trial (ì²´í—˜)
3. Inactive (ë¹„í™œì„±)
4. Suspended (ì •ì§€)

ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:
            `.trim();

            const choice = prompt(statuses);

            if (choice && ['1', '2', '3', '4'].includes(choice)) {
                window.GrowFitUtils.showToast(`${selectedOrgs.length}ê°œ ì¡°ì§ì˜ ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” ì¤‘...`, 'info');
                
                setTimeout(() => {
                    window.GrowFitUtils.showToast('ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                }, 1500);
            }
        }

        function bulkSendEmail(selectedOrgs) {
            window.GrowFitUtils.showToast(`${selectedOrgs.length}ê°œ ì¡°ì§ì— ì´ë©”ì¼ ë°œì†¡ ì¤‘...`, 'info');
            
            setTimeout(() => {
                window.GrowFitUtils.showToast('ì´ë©”ì¼ ë°œì†¡ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
            }, 2000);
        }

        function bulkSetLimit(selectedOrgs) {
            const limit = prompt('ì›” ì‚¬ìš©ëŸ‰ ì œí•œ (USD):');
            
            if (limit && !isNaN(limit)) {
                window.GrowFitUtils.showToast(`${selectedOrgs.length}ê°œ ì¡°ì§ì— ì œí•œì„ ì„¤ì •í•˜ëŠ” ì¤‘...`, 'info');
                
                setTimeout(() => {
                    window.GrowFitUtils.showToast('ì‚¬ìš©ëŸ‰ ì œí•œì´ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                }, 1500);
            }
        }

        function bulkAddTags(selectedOrgs) {
            const tags = prompt('ì¶”ê°€í•  íƒœê·¸ (ì‰¼í‘œë¡œ êµ¬ë¶„):');
            
            if (tags && tags.trim()) {
                window.GrowFitUtils.showToast(`${selectedOrgs.length}ê°œ ì¡°ì§ì— íƒœê·¸ë¥¼ ì¶”ê°€í•˜ëŠ” ì¤‘...`, 'info');
                
                setTimeout(() => {
                    window.GrowFitUtils.showToast('íƒœê·¸ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                }, 1500);
            }
        }

        function bulkExport(selectedOrgs) {
            window.GrowFitUtils.showToast(`${selectedOrgs.length}ê°œ ì¡°ì§ì„ ë‚´ë³´ë‚´ëŠ” ì¤‘...`, 'info');
            
            setTimeout(() => {
                window.GrowFitUtils.showToast('organizations_export.csvê°€ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
            }, 2000);
        }

        function bulkDelete(selectedOrgs) {
            if (confirm(`ì •ë§ë¡œ ${selectedOrgs.length}ê°œ ì¡°ì§ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`)) {
                window.GrowFitUtils.showToast(`${selectedOrgs.length}ê°œ ì¡°ì§ì„ ì‚­ì œí•˜ëŠ” ì¤‘...`, 'info');
                
                setTimeout(() => {
                    window.GrowFitUtils.showToast('ì¡°ì§ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                }, 2000);
            }
        }

        // ========== ë‚´ë³´ë‚´ê¸° ==========
        function exportOrganizations() {
            const formats = `
ğŸ“¥ ì¡°ì§ ë°ì´í„° ë‚´ë³´ë‚´ê¸°

ë‚´ë³´ë‚¼ í˜•ì‹:

1. CSV (ì „ì²´ ë°ì´í„°)
2. Excel (ì „ì²´ ë°ì´í„°)
3. JSON (API í˜•ì‹)
4. PDF (ë¦¬í¬íŠ¸)

ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:
            `.trim();

            const choice = prompt(formats);

            if (choice && ['1', '2', '3', '4'].includes(choice)) {
                handleExport(choice);
            }
        }

        function handleExport(format) {
            const formatMap = {
                '1': 'organizations.csv',
                '2': 'organizations.xlsx',
                '3': 'organizations.json',
                '4': 'organizations_report.pdf'
            };

            window.GrowFitUtils.showToast('ë°ì´í„°ë¥¼ ë‚´ë³´ë‚´ëŠ” ì¤‘...', 'info');

            setTimeout(() => {
                const filename = formatMap[format];
                window.GrowFitUtils.showToast(`${filename}ì´(ê°€) ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤`, 'success');
            }, 2000);
        }

        // ========== ìƒˆë¡œê³ ì¹¨ ==========
        function refreshOrganizations() {
            window.GrowFitUtils.showToast('ì¡°ì§ ëª©ë¡ì„ ìƒˆë¡œê³ ì¹¨í•˜ëŠ” ì¤‘...', 'info');
            
            setTimeout(() => {
                loadOrganizationsData();
                renderOrganizationsTable();
                window.GrowFitUtils.showToast('ëª©ë¡ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
            }, 1000);
        }

        // ========== ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ==========
        function getPlanName(plan) {
            const names = {
                'free': 'Free',
                'starter': 'Starter',
                'professional': 'Professional',
                'enterprise': 'Enterprise'
            };
            return names[plan] || plan;
        }

        function getStatusName(status) {
            const names = {
                'active': 'Active',
                'trial': 'Trial',
                'inactive': 'Inactive',
                'suspended': 'Suspended'
            };
            return names[status] || status;
        }

        function getPlanPrice(plan) {
            const prices = {
                'free': 0,
                'starter': 299,
                'professional': 999,
                'enterprise': 2999
            };
            return prices[plan] || 0;
        }

        // ========== í†µê³„ ì—…ë°ì´íŠ¸ ==========
        function updateStatistics() {
            const stats = {
                total: organizationsData.length,
                active: organizationsData.filter(o => o.status === 'active').length,
                trial: organizationsData.filter(o => o.status === 'trial').length,
                avgUsers: Math.round(organizationsData.reduce((sum, o) => sum + o.users, 0) / organizationsData.length)
            };

            console.log('í†µê³„ ì—…ë°ì´íŠ¸:', stats);
        }

        // ========== ê³ ê¸‰ ê²€ìƒ‰ ==========
        function advancedSearch() {
            const criteria = `
ğŸ” ê³ ê¸‰ ê²€ìƒ‰

ê²€ìƒ‰ ì¡°ê±´:

1. í”Œëœë³„ ê²€ìƒ‰
2. ì‚¬ìš©ëŸ‰ë³„ ê²€ìƒ‰
3. ê°€ì…ì¼ ë²”ìœ„
4. MRR ë²”ìœ„
5. ì‚°ì—…ë³„ ê²€ìƒ‰
6. íƒœê·¸ ê²€ìƒ‰

ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:
            `.trim();

            const choice = prompt(criteria);

            if (choice && ['1', '2', '3', '4', '5', '6'].includes(choice)) {
                handleAdvancedSearch(choice);
            }
        }

        function handleAdvancedSearch(type) {
            switch(type) {
                case '1':
                    // í”Œëœë³„ ê²€ìƒ‰ì€ ì´ë¯¸ í•„í„°ì— ìˆìŒ
                    break;
                case '2':
                    searchByUsage();
                    break;
                case '3':
                    searchByDateRange();
                    break;
                case '4':
                    searchByMRRRange();
                    break;
                case '5':
                    searchByIndustry();
                    break;
                case '6':
                    searchByTags();
                    break;
            }
        }

        function searchByUsage() {
            const threshold = prompt('ì‚¬ìš©ëŸ‰ ì„ê³„ê°’ (%):', '80');
            
            if (threshold && !isNaN(threshold)) {
                filteredOrganizations = organizationsData.filter(org => org.usage >= parseInt(threshold));
                currentPage = 1;
                renderOrganizationsTable();
                
                window.GrowFitUtils.showToast(`ì‚¬ìš©ëŸ‰ ${threshold}% ì´ìƒ: ${filteredOrganizations.length}ê°œ`, 'info');
            }
        }

        function searchByDateRange() {
            const start = prompt('ì‹œì‘ì¼ (YYYY-MM-DD):');
            const end = prompt('ì¢…ë£Œì¼ (YYYY-MM-DD):');
            
            if (start && end) {
                filteredOrganizations = organizationsData.filter(org => {
                    return org.created >= start && org.created <= end;
                });
                currentPage = 1;
                renderOrganizationsTable();
                
                window.GrowFitUtils.showToast(`ê¸°ê°„ ë‚´ ì¡°ì§: ${filteredOrganizations.length}ê°œ`, 'info');
            }
        }

        function searchByMRRRange() {
            const min = prompt('ìµœì†Œ MRR ($):');
            const max = prompt('ìµœëŒ€ MRR ($):');
            
            if (min && max && !isNaN(min) && !isNaN(max)) {
                filteredOrganizations = organizationsData.filter(org => {
                    return org.mrr >= parseInt(min) && org.mrr <= parseInt(max);
                });
                currentPage = 1;
                renderOrganizationsTable();
                
                window.GrowFitUtils.showToast(`MRR ë²”ìœ„ ë‚´ ì¡°ì§: ${filteredOrganizations.length}ê°œ`, 'info');
            }
        }

        function searchByIndustry() {
            const industry = prompt('ì‚°ì—… (tech/finance/healthcare/education/retail/other):');
            
            if (industry) {
                filteredOrganizations = organizationsData.filter(org => org.industry === industry);
                currentPage = 1;
                renderOrganizationsTable();
                
                window.GrowFitUtils.showToast(`${industry} ì‚°ì—…: ${filteredOrganizations.length}ê°œ`, 'info');
            }
        }

        function searchByTags() {
            alert('íƒœê·¸ ê²€ìƒ‰ ê¸°ëŠ¥ì€ ê°œë°œ ì¤‘ì…ë‹ˆë‹¤');
        }

        // ========== ë¶„ì„ & ë¦¬í¬íŠ¸ ==========
        function generateReport() {
            const report = `
ğŸ“Š ì¡°ì§ ë¶„ì„ ë¦¬í¬íŠ¸

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ì „ì²´ ì¡°ì§: ${organizationsData.length}ê°œ

í”Œëœë³„ ë¶„í¬:
- Enterprise: ${organizationsData.filter(o => o.plan === 'enterprise').length}ê°œ
- Professional: ${organizationsData.filter(o => o.plan === 'professional').length}ê°œ
- Starter: ${organizationsData.filter(o => o.plan === 'starter').length}ê°œ
- Free: ${organizationsData.filter(o => o.plan === 'free').length}ê°œ

ìƒíƒœë³„ ë¶„í¬:
- Active: ${organizationsData.filter(o => o.status === 'active').length}ê°œ
- Trial: ${organizationsData.filter(o => o.status === 'trial').length}ê°œ
- Inactive: ${organizationsData.filter(o => o.status === 'inactive').length}ê°œ
- Suspended: ${organizationsData.filter(o => o.status === 'suspended').length}ê°œ

ì‚¬ìš© í˜„í™©:
- í‰ê·  ì‚¬ìš©ì: ${Math.round(organizationsData.reduce((s, o) => s + o.users, 0) / organizationsData.length)}ëª…
- í‰ê·  ì‚¬ìš©ëŸ‰: ${Math.round(organizationsData.reduce((s, o) => s + o.usage, 0) / organizationsData.length)}%
- ì´ MRR: $${organizationsData.reduce((s, o) => s + o.mrr, 0).toLocaleString()}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

[ìƒì„¸ ë¦¬í¬íŠ¸] [PDF ë‹¤ìš´ë¡œë“œ]
            `.trim();

            alert(report);
        }

        // ========== í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ==========
        document.addEventListener('keydown', function(e) {
            // Ctrl/Cmd + N: ìƒˆ ì¡°ì§ ì¶”ê°€
            if ((e.ctrlKey || e.metaKey) && e.key === 'n') {
                e.preventDefault();
                openAddOrganizationModal();
            }

            // Ctrl/Cmd + F: ê²€ìƒ‰ í¬ì»¤ìŠ¤
            if ((e.ctrlKey || e.metaKey) && e.key === 'f') {
                e.preventDefault();
                document.getElementById('searchInput').focus();
            }

            // Ctrl/Cmd + R: ìƒˆë¡œê³ ì¹¨
            if ((e.ctrlKey || e.metaKey) && e.key === 'r') {
                e.preventDefault();
                refreshOrganizations();
            }

            // Ctrl/Cmd + E: ë‚´ë³´ë‚´ê¸°
            if ((e.ctrlKey || e.metaKey) && e.key === 'e') {
                e.preventDefault();
                exportOrganizations();
            }

            // Esc: ëª¨ë‹¬ ë‹«ê¸°
            if (e.key === 'Escape') {
                closeAddOrganizationModal();
            }
        });

        // ========== ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸° ==========
        document.getElementById('addOrganizationModal')?.addEventListener('click', function(e) {
            if (e.target === this) {
                closeAddOrganizationModal();
            }
        });

        // ========== ì´ˆê¸°í™” ì™„ë£Œ ==========
        console.log('âœ… Organization Management ì™„ì „íˆ ë¡œë“œë¨');
        console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
        console.log('ğŸ¢ ì´ ì¡°ì§:', organizationsData.length);
        console.log('ğŸ“Š í™œì„± ì¡°ì§:', organizationsData.filter(o => o.status === 'active').length);
        console.log('ğŸ’° ì´ MRR:', '$' + organizationsData.reduce((s, o) => s + o.mrr, 0).toLocaleString());
        console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
        console.log('ë‹¨ì¶•í‚¤: Ctrl+N(ì¶”ê°€), Ctrl+F(ê²€ìƒ‰), Ctrl+R(ìƒˆë¡œê³ ì¹¨), Ctrl+E(ë‚´ë³´ë‚´ê¸°)');
    </script>
</body>
</html>