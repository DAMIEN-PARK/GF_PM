<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚´ ì—ì´ì „íŠ¸ - GrowFit Employee</title>

    <!-- ê³µí†µ CSS -->
    <link rel="stylesheet" href="../common/variables.css">
    <link rel="stylesheet" href="../common/layout.css">
    <link rel="stylesheet" href="../common/components.css">

    <style>
        /* ========== Agents ì „ìš© ìŠ¤íƒ€ì¼ ========== */
        :root {
            --employee-primary: #10b981;
            --employee-primary-light: #34d399;
            --employee-primary-dark: #059669;
            --employee-secondary: #06b6d4;
            --employee-accent: #f59e0b;
        }

        /* ë ˆì´ì•„ì›ƒ */
        .agents-layout {
            display: grid;
            grid-template-columns: 320px 1fr;
            gap: var(--space-6);
            height: calc(100vh - var(--header-height) - 100px);
        }

        /* ì™¼ìª½: ì—ì´ì „íŠ¸ ë¦¬ìŠ¤íŠ¸ */
        .agents-sidebar {
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: var(--space-4);
            overflow-y: auto;
        }

        .agents-sidebar__header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-4);
        }

        .agents-sidebar__title {
            font-size: var(--text-lg);
            font-weight: var(--font-bold);
            color: var(--text-primary);
        }

        .agents-tabs {
            display: flex;
            gap: var(--space-1);
            margin-bottom: var(--space-4);
            background: var(--surface);
            border-radius: var(--radius-md);
            padding: 2px;
        }

        .agent-tab {
            flex: 1;
            padding: var(--space-2);
            border: none;
            background: transparent;
            border-radius: var(--radius-sm);
            font-size: var(--text-sm);
            font-weight: var(--font-semibold);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
        }

        .agent-tab:hover {
            background: white;
        }

        .agent-tab--active {
            background: var(--employee-primary);
            color: white;
        }

        .agents-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-2);
        }

        .agent-item {
            padding: var(--space-3);
            background: var(--surface);
            border: 2px solid var(--border);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.2s;
        }

        .agent-item:hover {
            border-color: var(--employee-primary);
            background: white;
        }

        .agent-item--active {
            border-color: var(--employee-primary);
            background: rgba(16, 185, 129, 0.05);
        }

        .agent-item__header {
            display: flex;
            gap: var(--space-2);
            margin-bottom: var(--space-2);
        }

        .agent-item__icon {
            font-size: 24px;
        }

        .agent-item__info {
            flex: 1;
        }

        .agent-item__name {
            font-size: var(--text-sm);
            font-weight: var(--font-semibold);
            color: var(--text-primary);
            margin-bottom: var(--space-1);
        }

        .agent-item__role {
            font-size: var(--text-xs);
            color: var(--text-secondary);
        }

        .agent-item__meta {
            display: flex;
            justify-content: space-between;
            font-size: var(--text-xs);
            color: var(--text-secondary);
        }

        .agent-badge {
            padding: 2px 6px;
            background: var(--employee-primary);
            color: white;
            border-radius: var(--radius-sm);
            font-size: 10px;
            font-weight: var(--font-bold);
        }

        /* ì˜¤ë¥¸ìª½: ì—ì´ì „íŠ¸ ë¹Œë”/ìƒì„¸ */
        .agent-builder {
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .builder-header {
            padding: var(--space-5);
            border-bottom: 1px solid var(--border);
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.05), rgba(6, 182, 212, 0.05));
        }

        .builder-title {
            font-size: var(--text-2xl);
            font-weight: var(--font-bold);
            color: var(--text-primary);
            margin-bottom: var(--space-2);
        }

        .builder-subtitle {
            font-size: var(--text-sm);
            color: var(--text-secondary);
        }

        .builder-content {
            flex: 1;
            overflow-y: auto;
            padding: var(--space-5);
        }

        .builder-section {
            margin-bottom: var(--space-6);
        }

        .builder-section__title {
            font-size: var(--text-lg);
            font-weight: var(--font-bold);
            color: var(--text-primary);
            margin-bottom: var(--space-1);
        }

        .builder-section__description {
            font-size: var(--text-sm);
            color: var(--text-secondary);
            margin-bottom: var(--space-3);
        }

        /* ì…ë ¥ í•„ë“œ */
        .form-group {
            margin-bottom: var(--space-4);
        }

        .form-label {
            display: block;
            font-size: var(--text-sm);
            font-weight: var(--font-semibold);
            color: var(--text-primary);
            margin-bottom: var(--space-2);
        }

        .form-label__required {
            color: var(--error);
            margin-left: var(--space-1);
        }

        .form-input {
            width: 100%;
            padding: var(--space-3);
            border: 2px solid var(--border);
            border-radius: var(--radius-md);
            font-size: var(--text-sm);
            color: var(--text-primary);
            transition: all 0.2s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--employee-primary);
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            line-height: 1.6;
        }

        .form-textarea--large {
            min-height: 200px;
        }

        .form-hint {
            font-size: var(--text-xs);
            color: var(--text-secondary);
            margin-top: var(--space-1);
        }

        /* ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ì—ë””í„° */
        .prompt-editor {
            background: #1e1e1e;
            border-radius: var(--radius-md);
            padding: var(--space-4);
            color: #d4d4d4;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: var(--text-sm);
        }

        .prompt-editor textarea {
            width: 100%;
            min-height: 250px;
            background: transparent;
            border: none;
            color: #d4d4d4;
            font-family: inherit;
            font-size: inherit;
            resize: vertical;
        }

        .prompt-editor textarea:focus {
            outline: none;
        }

        .prompt-editor__toolbar {
            display: flex;
            gap: var(--space-2);
            margin-bottom: var(--space-3);
            padding-bottom: var(--space-3);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .prompt-toolbar-btn {
            padding: 4px 8px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: var(--radius-sm);
            color: #d4d4d4;
            font-size: var(--text-xs);
            cursor: pointer;
            transition: all 0.2s;
        }

        .prompt-toolbar-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿ */
        .template-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-3);
            margin-bottom: var(--space-4);
        }

        .template-card {
            padding: var(--space-3);
            background: var(--surface);
            border: 2px solid var(--border);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.2s;
        }

        .template-card:hover {
            border-color: var(--employee-primary);
            background: white;
        }

        .template-card__icon {
            font-size: 28px;
            margin-bottom: var(--space-2);
        }

        .template-card__name {
            font-size: var(--text-sm);
            font-weight: var(--font-semibold);
            color: var(--text-primary);
            margin-bottom: var(--space-1);
        }

        .template-card__desc {
            font-size: var(--text-xs);
            color: var(--text-secondary);
        }

        /* ì˜ˆì‹œ ì¶”ê°€ */
        .examples-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
        }

        .example-item {
            padding: var(--space-3);
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            position: relative;
        }

        .example-item__remove {
            position: absolute;
            top: var(--space-2);
            right: var(--space-2);
            width: 24px;
            height: 24px;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            background: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: var(--text-secondary);
            transition: all 0.2s;
        }

        .example-item__remove:hover {
            border-color: var(--error);
            color: var(--error);
            background: var(--error-light);
        }

        .example-item__label {
            font-size: var(--text-xs);
            font-weight: var(--font-semibold);
            color: var(--text-secondary);
            margin-bottom: var(--space-2);
        }

        .example-input {
            width: 100%;
            padding: var(--space-2);
            background: white;
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            font-size: var(--text-sm);
        }

        /* í…ŒìŠ¤íŠ¸ ì„¹ì…˜ */
        .test-section {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: var(--space-4);
            margin-top: var(--space-6);
        }

        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-4);
        }

        .test-title {
            font-size: var(--text-lg);
            font-weight: var(--font-bold);
            color: var(--text-primary);
        }

        .test-input-group {
            display: flex;
            gap: var(--space-2);
            margin-bottom: var(--space-4);
        }

        .test-output {
            background: white;
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            padding: var(--space-4);
            min-height: 150px;
            font-size: var(--text-sm);
            line-height: 1.6;
            color: var(--text-primary);
        }

        .test-output--loading {
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
        }

        /* í•˜ë‹¨ ì•¡ì…˜ ë°” */
        .builder-footer {
            padding: var(--space-4);
            border-top: 1px solid var(--border);
            background: var(--surface);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .builder-status {
            font-size: var(--text-sm);
            color: var(--text-secondary);
        }

        .builder-actions {
            display: flex;
            gap: var(--space-2);
        }

        /* ë¹ˆ ìƒíƒœ */
        .empty-state {
            text-align: center;
            padding: var(--space-8);
        }

        .empty-state__icon {
            font-size: 64px;
            margin-bottom: var(--space-3);
            opacity: 0.5;
        }

        .empty-state__title {
            font-size: var(--text-xl);
            font-weight: var(--font-bold);
            color: var(--text-primary);
            margin-bottom: var(--space-2);
        }

        .empty-state__desc {
            font-size: var(--text-sm);
            color: var(--text-secondary);
            margin-bottom: var(--space-4);
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 1024px) {
            .agents-layout {
                grid-template-columns: 1fr;
            }

            .agents-sidebar {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .template-selector {
                grid-template-columns: 1fr;
            }

            .test-input-group {
                flex-direction: column;
            }
        }
    </style>
</head>

<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <div class="header__left">
                <button id="menuToggle" class="header__icon-button hidden-desktop">
                    <span>â˜°</span>
                </button>
                <a href="dashboard.html" class="header__logo">
                    <span class="header__logo-icon">ğŸŒ±</span>
                    <span>GrowFit</span>
                </a>
            </div>

            <div class="header__right">
                <button id="notificationBtn" class="header__icon-button">
                    <span>ğŸ””</span>
                    <span class="header__badge">3</span>
                </button>

                <div id="profileBtn" class="header__profile">
                    <div class="header__avatar" style="background: linear-gradient(135deg, #10b981, #06b6d4);">ê¹€</div>
                    <span class="hidden-mobile">ê¹€ì§ì›</span>
                    <span class="hidden-mobile">â–¼</span>
                </div>
            </div>
        </header>

        <div class="container">
            <!-- Sidebar -->
            <aside class="sidebar sidebar--open">
                <div class="sidebar__user">
                    <div class="sidebar__user-info">
                        <div class="sidebar__user-avatar"
                            style="background: linear-gradient(135deg, #10b981, #06b6d4);">ê¹€</div>
                        <div class="sidebar__user-details">
                            <div class="sidebar__user-name">ê¹€ì§ì›</div>
                            <div class="sidebar__user-role">AI ì‹¤ìŠµìƒ</div>
                        </div>
                    </div>
                </div>

                <nav class="sidebar__nav">
                    <ul class="sidebar__menu">
                        <li class="sidebar__menu-item">
                            <a href="dashboard.html" class="sidebar__menu-link">
                                <span class="sidebar__menu-icon">ğŸ </span>
                                <span>ëŒ€ì‹œë³´ë“œ</span>
                            </a>
                        </li>
                        <li class="sidebar__menu-item">
                            <a href="practice.html" class="sidebar__menu-link">
                                <span class="sidebar__menu-icon">ğŸ’¬</span>
                                <span>AI ì‹¤ìŠµ</span>
                            </a>
                        </li>
                        <li class="sidebar__menu-item">
                            <a href="my-projects.html" class="sidebar__menu-link">
                                <span class="sidebar__menu-icon">ğŸ“</span>
                                <span>ë‚´ í”„ë¡œì íŠ¸</span>
                            </a>
                        </li>
                        <li class="sidebar__menu-item">
                            <a href="my-agents.html" class="sidebar__menu-link sidebar__menu-link--active">
                                <span class="sidebar__menu-icon">ğŸ¤–</span>
                                <span>ë‚´ ì—ì´ì „íŠ¸</span>
                            </a>
                        </li>
                        <li class="sidebar__menu-item">
                            <a href="my-documents.html" class="sidebar__menu-link">
                                <span class="sidebar__menu-icon">ğŸ“š</span>
                                <span>ë‚´ ë¬¸ì„œ</span>
                            </a>
                        </li>
                        <li class="sidebar__menu-item">
                            <a href="history.html" class="sidebar__menu-link">
                                <span class="sidebar__menu-icon">ğŸ“Š</span>
                                <span>ë‚´ ê¸°ë¡</span>
                            </a>
                        </li>
                        <li class="sidebar__menu-item">
                            <a href="profile.html" class="sidebar__menu-link">
                                <span class="sidebar__menu-icon">âš™ï¸</span>
                                <span>ì„¤ì •</span>
                            </a>
                        </li>
                    </ul>
                </nav>

                <div class="sidebar__footer">
                    <div
                        style="padding: var(--space-3); background: var(--surface); border-radius: var(--radius-md); font-size: var(--text-xs);">
                        <div style="color: var(--text-secondary); margin-bottom: var(--space-1);">ì´ë²ˆ ì£¼ ì‹¤ìŠµ</div>
                        <div style="font-weight: var(--font-bold); color: var(--employee-primary);">3ì‹œê°„ 24ë¶„</div>
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="main">
                <div class="agents-layout">
                    <!-- ì™¼ìª½: ì—ì´ì „íŠ¸ ë¦¬ìŠ¤íŠ¸ -->
                    <div class="agents-sidebar">
                        <div class="agents-sidebar__header">
                            <h2 class="agents-sidebar__title">ğŸ¤– ë‚´ ì—ì´ì „íŠ¸</h2>
                            <button class="btn btn--sm btn--primary" style="background: var(--employee-primary);" onclick="createNewAgent()">
                                â•
                            </button>
                        </div>

                        <!-- íƒ­ -->
                        <div class="agents-tabs">
                            <button class="agent-tab agent-tab--active" onclick="switchAgentTab('my')">
                                ë‚´ ì—ì´ì „íŠ¸
                            </button>
                            <button class="agent-tab" onclick="switchAgentTab('library')">
                                ë¼ì´ë¸ŒëŸ¬ë¦¬
                            </button>
                        </div>

                        <!-- ë‚´ ì—ì´ì „íŠ¸ ë¦¬ìŠ¤íŠ¸ -->
                        <div id="myAgentsList" class="agents-list">
                            <div class="agent-item agent-item--active" onclick="selectAgent('coding-tutor')">
                                <div class="agent-item__header">
                                    <span class="agent-item__icon">ğŸ’»</span>
                                    <div class="agent-item__info">
                                        <div class="agent-item__name">ì½”ë”© íŠœí„°</div>
                                        <div class="agent-item__role">ì‹œë‹ˆì–´ ê°œë°œì</div>
                                    </div>
                                </div>
                                <div class="agent-item__meta">
                                    <span>ì‚¬ìš© 23íšŒ</span>
                                    <span class="agent-badge">í™œì„±</span>
                                </div>
                            </div>

                            <div class="agent-item" onclick="selectAgent('content-writer')">
                                <div class="agent-item__header">
                                    <span class="agent-item__icon">âœï¸</span>
                                    <div class="agent-item__info">
                                        <div class="agent-item__name">ì½˜í…ì¸  ì‘ê°€</div>
                                        <div class="agent-item__role">ì¹´í”¼ë¼ì´í„°</div>
                                    </div>
                                </div>
                                <div class="agent-item__meta">
                                    <span>ì‚¬ìš© 45íšŒ</span>
                                    <span>2ì‹œê°„ ì „</span>
                                </div>
                            </div>

                            <div class="agent-item" onclick="selectAgent('data-analyst')">
                                <div class="agent-item__header">
                                    <span class="agent-item__icon">ğŸ“Š</span>
                                    <div class="agent-item__info">
                                        <div class="agent-item__name">ë°ì´í„° ë¶„ì„ê°€</div>
                                        <div class="agent-item__role">ë°ì´í„° ì‚¬ì´ì–¸í‹°ìŠ¤íŠ¸</div>
                                    </div>
                                </div>
                                <div class="agent-item__meta">
                                    <span>ì‚¬ìš© 12íšŒ</span>
                                    <span>ì–´ì œ</span>
                                </div>
                            </div>

                            <div class="agent-item" onclick="selectAgent('translator')">
                                <div class="agent-item__header">
                                    <span class="agent-item__icon">ğŸŒ</span>
                                    <div class="agent-item__info">
                                        <div class="agent-item__name">ì „ë¬¸ ë²ˆì—­ê°€</div>
                                        <div class="agent-item__role">ë‹¤êµ­ì–´ ì „ë¬¸ê°€</div>
                                    </div>
                                </div>
                                <div class="agent-item__meta">
                                    <span>ì‚¬ìš© 8íšŒ</span>
                                    <span>3ì¼ ì „</span>
                                </div>
                            </div>

                            <div class="agent-item" onclick="selectAgent('meeting-summarizer')">
                                <div class="agent-item__header">
                                    <span class="agent-item__icon">ğŸ“</span>
                                    <div class="agent-item__info">
                                        <div class="agent-item__name">íšŒì˜ë¡ ì‘ì„±ì</div>
                                        <div class="agent-item__role">ë¹„ì¦ˆë‹ˆìŠ¤ ì–´ì‹œìŠ¤í„´íŠ¸</div>
                                    </div>
                                </div>
                                <div class="agent-item__meta">
                                    <span>ì‚¬ìš© 31íšŒ</span>
                                    <span>1ì‹œê°„ ì „</span>
                                </div>
                            </div>
                        </div>

                        <!-- ë¼ì´ë¸ŒëŸ¬ë¦¬ (ìˆ¨ê¹€) -->
                        <div id="libraryAgentsList" class="agents-list" style="display: none;">
                            <div class="agent-item" onclick="selectAgent('lib-seo-expert')">
                                <div class="agent-item__header">
                                    <span class="agent-item__icon">ğŸ”</span>
                                    <div class="agent-item__info">
                                        <div class="agent-item__name">SEO ì „ë¬¸ê°€</div>
                                        <div class="agent-item__role">ë§ˆì¼€íŒ… ì „ë¬¸ê°€</div>
                                    </div>
                                </div>
                                <div class="agent-item__meta">
                                    <span>â­ 4.8 (234)</span>
                                </div>
                            </div>

                            <div class="agent-item" onclick="selectAgent('lib-customer-support')">
                                <div class="agent-item__header">
                                    <span class="agent-item__icon">ğŸ’¬</span>
                                    <div class="agent-item__info">
                                        <div class="agent-item__name">ê³ ê° ì§€ì›</div>
                                        <div class="agent-item__role">CS ì „ë¬¸ê°€</div>
                                    </div>
                                </div>
                                <div class="agent-item__meta">
                                    <span>â­ 4.9 (567)</span>
                                </div>
                            </div>

                            <div class="agent-item" onclick="selectAgent('lib-recruiter')">
                                <div class="agent-item__header">
                                    <span class="agent-item__icon">ğŸ‘¥</span>
                                    <div class="agent-item__info">
                                        <div class="agent-item__name">ì±„ìš© ë‹´ë‹¹ì</div>
                                        <div class="agent-item__role">HR ì „ë¬¸ê°€</div>
                                    </div>
                                </div>
                                <div class="agent-item__meta">
                                    <span>â­ 4.7 (189)</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ì˜¤ë¥¸ìª½: ì—ì´ì „íŠ¸ ë¹Œë” -->
                    <div class="agent-builder">
                        <div class="builder-header">
                            <h1 class="builder-title">ğŸ¤– AI ì—ì´ì „íŠ¸ ë¹Œë”</h1>
                            <p class="builder-subtitle">ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¥¼ ì„¤ê³„í•˜ì—¬ ì—…ë¬´ ìë™í™” AIë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”</p>
                        </div>

                        <div class="builder-content">
                            <!-- 1. ê¸°ë³¸ ì •ë³´ -->
                            <div class="builder-section">
                                <h3 class="builder-section__title">1ï¸âƒ£ ê¸°ë³¸ ì •ë³´</h3>
                                <p class="builder-section__description">ì—ì´ì „íŠ¸ì˜ ì´ë¦„ê³¼ ì—­í• ì„ ì„¤ì •í•˜ì„¸ìš”</p>

                                <div class="form-group">
                                    <label class="form-label">
                                        ì—ì´ì „íŠ¸ ì´ë¦„
                                        <span class="form-label__required">*</span>
                                    </label>
                                    <input 
                                        type="text" 
                                        class="form-input" 
                                        id="agentName"
                                        placeholder="ì˜ˆ: ì½”ë”© íŠœí„°, ë§ˆì¼€íŒ… ì „ë¬¸ê°€, ë°ì´í„° ë¶„ì„ê°€"
                                        value="ì½”ë”© íŠœí„°"
                                    >
                                    <div class="form-hint">ëª…í™•í•˜ê³  ì§ê´€ì ì¸ ì´ë¦„ì„ ì‚¬ìš©í•˜ì„¸ìš”</div>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">ì•„ì´ì½˜</label>
                                    <div style="display: flex; gap: var(--space-2);">
                                        <input 
                                            type="text" 
                                            class="form-input" 
                                            id="agentIcon"
                                            placeholder="ì´ëª¨ì§€ ì„ íƒ"
                                            value="ğŸ’»"
                                            style="width: 80px; text-align: center; font-size: 24px;"
                                        >
                                        <button class="btn btn--outline" onclick="openEmojiPicker()">
                                            ì„ íƒ
                                        </button>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">ê°„ë‹¨í•œ ì„¤ëª…</label>
                                    <textarea 
                                        class="form-input form-textarea"
                                        id="agentDescription"
                                        placeholder="ì´ ì—ì´ì „íŠ¸ê°€ ì–´ë–¤ ì¼ì„ í•˜ëŠ”ì§€ ê°„ë‹¨íˆ ì„¤ëª…í•˜ì„¸ìš”"
                                    >Python, JavaScript ë“± í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¥¼ ê°€ë¥´ì¹˜ëŠ” ì¹œì ˆí•œ íŠœí„°ì…ë‹ˆë‹¤.</textarea>
                                </div>
                            </div>

                            <!-- 2. ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ -->
                            <div class="builder-section">
                                <h3 class="builder-section__title">2ï¸âƒ£ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ (System Prompt)</h3>
                                <p class="builder-section__description">ì—ì´ì „íŠ¸ì˜ ì—­í• , ì „ë¬¸ì„±, í†¤&ë§¤ë„ˆë¥¼ ì •ì˜í•˜ì„¸ìš”</p>

                                <!-- í…œí”Œë¦¿ ì„ íƒ -->
                                <div class="form-group">
                                    <label class="form-label">í…œí”Œë¦¿ ì„ íƒ (ì„ íƒì‚¬í•­)</label>
                                    <div class="template-selector">
                                        <div class="template-card" onclick="loadTemplate('teacher')">
                                            <div class="template-card__icon">ğŸ‘¨â€ğŸ«</div>
                                            <div class="template-card__name">êµìœ¡ì</div>
                                            <div class="template-card__desc">ì¹œì ˆí•˜ê²Œ ê°€ë¥´ì¹˜ëŠ” íŠœí„°</div>
                                        </div>
                                        <div class="template-card" onclick="loadTemplate('expert')">
                                            <div class="template-card__icon">ğŸ‘”</div>
                                            <div class="template-card__name">ì „ë¬¸ê°€</div>
                                            <div class="template-card__desc">ì „ë¬¸ì ì´ê³  ì •í™•í•œ ë‹µë³€</div>
                                        </div>
                                        <div class="template-card" onclick="loadTemplate('creative')">
                                            <div class="template-card__icon">ğŸ¨</div>
                                            <div class="template-card__name">í¬ë¦¬ì—ì´í„°</div>
                                            <div class="template-card__desc">ì°½ì˜ì ì´ê³  ë…ì°½ì </div>
                                        </div>
                                        <div class="template-card" onclick="loadTemplate('analyst')">
                                            <div class="template-card__icon">ğŸ“Š</div>
                                            <div class="template-card__name">ë¶„ì„ê°€</div>
                                            <div class="template-card__desc">ë°ì´í„° ì¤‘ì‹¬ ë¶„ì„</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- í”„ë¡¬í”„íŠ¸ ì—ë””í„° -->
                                <div class="form-group">
                                    <label class="form-label">
                                        ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸
                                        <span class="form-label__required">*</span>
                                    </label>
                                    <div class="prompt-editor">
                                        <div class="prompt-editor__toolbar">
                                            <button class="prompt-toolbar-btn" onclick="insertPromptSection('role')">
                                                ì—­í•  ì¶”ê°€
                                            </button>
                                            <button class="prompt-toolbar-btn" onclick="insertPromptSection('expertise')">
                                                ì „ë¬¸ì„± ì¶”ê°€
                                            </button>
                                            <button class="prompt-toolbar-btn" onclick="insertPromptSection('tone')">
                                                í†¤ ì¶”ê°€
                                            </button>
                                            <button class="prompt-toolbar-btn" onclick="insertPromptSection('constraints')">
                                                ì œì•½ì‚¬í•­ ì¶”ê°€
                                            </button>
                                        </div>
                                        <textarea id="systemPrompt" placeholder="ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¥¼ ì‘ì„±í•˜ì„¸ìš”...">ë‹¹ì‹ ì€ 10ë…„ ê²½ë ¥ì˜ ì‹œë‹ˆì–´ ê°œë°œìì´ì í”„ë¡œê·¸ë˜ë° êµìœ¡ ì „ë¬¸ê°€ì…ë‹ˆë‹¤.

[ì—­í•  (Role)]
ë‹¹ì‹ ì˜ ì—­í• ì€ í”„ë¡œê·¸ë˜ë°ì„ ë°°ìš°ëŠ” í•™ìƒë“¤ì—ê²Œ ê°œë…ì„ ëª…í™•í•˜ê³  ì´í•´í•˜ê¸° ì‰½ê²Œ ì„¤ëª…í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

[ì „ë¬¸ì„± (Expertise)]
- Python, JavaScript, Java ë“± ì£¼ìš” í”„ë¡œê·¸ë˜ë° ì–¸ì–´
- ì•Œê³ ë¦¬ì¦˜ê³¼ ìë£Œêµ¬ì¡°
- ì½”ë“œ ë””ë²„ê¹… ë° ìµœì í™”
- ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ ë° ì„¤ê³„ íŒ¨í„´

[í†¤ & ìŠ¤íƒ€ì¼ (Tone)]
- ì¹œê·¼í•˜ê³  ê²©ë ¤í•˜ëŠ” í†¤
- ë³µì¡í•œ ê°œë…ì„ ë‹¨ìˆœí•˜ê²Œ ì„¤ëª…
- ë¹„ìœ ì™€ ì˜ˆì‹œë¥¼ ì ê·¹ í™œìš©
- í•™ìƒì˜ ì´í•´ë„ë¥¼ í™•ì¸í•˜ë©° ì§„í–‰

[ì œì•½ ì¡°ê±´ (Constraints)]
- ì½”ë“œ ì˜ˆì œëŠ” í•­ëª© ì£¼ì„ê³¼ í•¨ê»˜ ì œê³µ
- ë‹¨ê³„ë³„ë¡œ ì„¤ëª…í•˜ì—¬ ì´í•´ë¥¼ ë•ê¸°
- í•™ìƒì´ ìŠ¤ìŠ¤ë¡œ ìƒê°í•  ìˆ˜ ìˆë„ë¡ íŒíŠ¸ ì œê³µ
- ì˜¤ë¥˜ê°€ ìˆì„ ë•ŒëŠ” ì§ì ‘ ë‹µì„ ì£¼ê¸°ë³´ë‹¤ ë””ë²„ê¹… ë°©ë²• ì•ˆë‚´</textarea>
                                    </div>
                                    <div class="form-hint">
                                        ğŸ’¡ íŒ: êµ¬ì²´ì ì´ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í• ìˆ˜ë¡ ì—ì´ì „íŠ¸ê°€ ë” ì¼ê´€ì„± ìˆê²Œ ë™ì‘í•©ë‹ˆë‹¤
                                    </div>
                                </div>
                            </div>

                            <!-- 3. ì˜ˆì‹œ (Few-shot Examples) -->
                            <div class="builder-section">
                                <h3 class="builder-section__title">3ï¸âƒ£ ì˜ˆì‹œ (Few-shot Examples)</h3>
                                <p class="builder-section__description">ì—ì´ì „íŠ¸ê°€ ì–´ë–»ê²Œ ë‹µë³€í•´ì•¼ í•˜ëŠ”ì§€ ì˜ˆì‹œë¥¼ ì œê³µí•˜ì„¸ìš” (ì„ íƒì‚¬í•­)</p>

                                <div id="examplesList" class="examples-list">
                                    <div class="example-item">
                                        <button class="example-item__remove" onclick="removeExample(this)">Ã—</button>
                                        <div class="example-item__label">ì‚¬ìš©ì ì…ë ¥:</div>
                                        <textarea class="example-input" rows="2" placeholder="ì˜ˆ: Pythonìœ¼ë¡œ ë¦¬ìŠ¤íŠ¸ë¥¼ ì •ë ¬í•˜ëŠ” ë°©ë²•ì„ ì•Œë ¤ì¤˜">Pythonìœ¼ë¡œ ë¦¬ìŠ¤íŠ¸ë¥¼ ì •ë ¬í•˜ëŠ” ë°©ë²•ì„ ì•Œë ¤ì¤˜</textarea>
                                        
                                        <div class="example-item__label" style="margin-top: var(--space-2);">ì—ì´ì „íŠ¸ ì‘ë‹µ:</div>
                                        <textarea class="example-input" rows="4" placeholder="ì´ìƒì ì¸ ì‘ë‹µ ì˜ˆì‹œë¥¼ ì‘ì„±í•˜ì„¸ìš”">ì¢‹ì€ ì§ˆë¬¸ì´ë„¤ìš”! Pythonì—ì„œ ë¦¬ìŠ¤íŠ¸ ì •ë ¬ì€ ì•„ì£¼ ê°„ë‹¨í•©ë‹ˆë‹¤.

ë‘ ê°€ì§€ ë°©ë²•ì´ ìˆì–´ìš”:

1. sort() ë©”ì„œë“œ - ì›ë³¸ ìˆ˜ì •
2. sorted() í•¨ìˆ˜ - ìƒˆ ë¦¬ìŠ¤íŠ¸ ìƒì„±

ì–´ë–¤ ë°©ë²•ì´ ê¶ê¸ˆí•˜ì‹ ê°€ìš”? ë‘˜ ë‹¤ ì˜ˆì œ ì½”ë“œì™€ í•¨ê»˜ ì„¤ëª…í•´ë“œë¦´ê²Œìš”! ğŸ˜Š</textarea>
                                    </div>
                                </div>

                                <button class="btn btn--outline" style="width: 100%;" onclick="addExample()">
                                    â• ì˜ˆì‹œ ì¶”ê°€
                                </button>
                            </div>

                            <!-- 4. í…ŒìŠ¤íŠ¸ -->
                            <div class="test-section">
                                <div class="test-header">
                                    <h3 class="test-title">ğŸ§ª ì—ì´ì „íŠ¸ í…ŒìŠ¤íŠ¸</h3>
                                    <button class="btn btn--sm btn--outline" onclick="clearTest()">
                                        ì´ˆê¸°í™”
                                    </button>
                                </div>

                                <div class="test-input-group">
                                    <input 
                                        type="text" 
                                        class="form-input" 
                                        id="testInput"
                                        placeholder="í…ŒìŠ¤íŠ¸ ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”..."
                                        style="flex: 1;"
                                    >
                                    <button class="btn btn--primary" style="background: var(--employee-primary);" onclick="runTest()">
                                        í…ŒìŠ¤íŠ¸ ì‹¤í–‰
                                    </button>
                                </div>

                                <div id="testOutput" class="test-output">
                                    <div style="color: var(--text-secondary); text-align: center;">
                                        í…ŒìŠ¤íŠ¸ ì§ˆë¬¸ì„ ì…ë ¥í•˜ê³  "í…ŒìŠ¤íŠ¸ ì‹¤í–‰"ì„ í´ë¦­í•˜ì„¸ìš”
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- í•˜ë‹¨ ì•¡ì…˜ ë°” -->
                        <div class="builder-footer">
                            <div class="builder-status">
                                <span id="saveStatus" style="color: var(--text-secondary);">
                                    ë§ˆì§€ë§‰ ì €ì¥: 2ë¶„ ì „
                                </span>
                            </div>
                            <div class="builder-actions">
                                <button class="btn btn--outline" onclick="cancelAgent()">
                                    ì·¨ì†Œ
                                </button>
                                <button class="btn btn--outline" onclick="saveAsDraft()">
                                    ğŸ’¾ ì„ì‹œì €ì¥
                                </button>
                                <button class="btn btn--primary" style="background: var(--employee-primary);" onclick="saveAgent()">
                                    âœ“ ì €ì¥ ë° í™œì„±í™”
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- ê³µí†µ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="../common/layout.js"></script>
    <script src="../common/utils.js"></script>
    
    <!-- í˜ì´ì§€ ì „ìš© ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
        // ========== Agents ì „ìš© ë¡œì§ ==========

        // ì „ì—­ ë³€ìˆ˜
        let currentAgent = null;
        let currentTab = 'my';
        let isDirty = false; // ìˆ˜ì • ì—¬ë¶€

        // ì—ì´ì „íŠ¸ ë°ì´í„° (ì‹œë®¬ë ˆì´ì…˜)
        const agentsData = {
            'coding-tutor': {
                id: 'coding-tutor',
                name: 'ì½”ë”© íŠœí„°',
                icon: 'ğŸ’»',
                role: 'ì‹œë‹ˆì–´ ê°œë°œì',
                description: 'Python, JavaScript ë“± í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¥¼ ê°€ë¥´ì¹˜ëŠ” ì¹œì ˆí•œ íŠœí„°ì…ë‹ˆë‹¤.',
                systemPrompt: `ë‹¹ì‹ ì€ 10ë…„ ê²½ë ¥ì˜ ì‹œë‹ˆì–´ ê°œë°œìì´ì í”„ë¡œê·¸ë˜ë° êµìœ¡ ì „ë¬¸ê°€ì…ë‹ˆë‹¤.
    
    [ì—­í•  (Role)]
    ë‹¹ì‹ ì˜ ì—­í• ì€ í”„ë¡œê·¸ë˜ë°ì„ ë°°ìš°ëŠ” í•™ìƒë“¤ì—ê²Œ ê°œë…ì„ ëª…í™•í•˜ê³  ì´í•´í•˜ê¸° ì‰½ê²Œ ì„¤ëª…í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.
    
    [ì „ë¬¸ì„± (Expertise)]
    - Python, JavaScript, Java ë“± ì£¼ìš” í”„ë¡œê·¸ë˜ë° ì–¸ì–´
    - ì•Œê³ ë¦¬ì¦˜ê³¼ ìë£Œêµ¬ì¡°
    - ì½”ë“œ ë””ë²„ê¹… ë° ìµœì í™”
    - ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤ ë° ì„¤ê³„ íŒ¨í„´
    
    [í†¤ & ìŠ¤íƒ€ì¼ (Tone)]
    - ì¹œê·¼í•˜ê³  ê²©ë ¤í•˜ëŠ” í†¤
    - ë³µì¡í•œ ê°œë…ì„ ë‹¨ìˆœí•˜ê²Œ ì„¤ëª…
    - ë¹„ìœ ì™€ ì˜ˆì‹œë¥¼ ì ê·¹ í™œìš©
    - í•™ìƒì˜ ì´í•´ë„ë¥¼ í™•ì¸í•˜ë©° ì§„í–‰
    
    [ì œì•½ ì¡°ê±´ (Constraints)]
    - ì½”ë“œ ì˜ˆì œëŠ” í•­ìƒ ì£¼ì„ê³¼ í•¨ê»˜ ì œê³µ
    - ë‹¨ê³„ë³„ë¡œ ì„¤ëª…í•˜ì—¬ ì´í•´ë¥¼ ë•ê¸°
    - í•™ìƒì´ ìŠ¤ìŠ¤ë¡œ ìƒê°í•  ìˆ˜ ìˆë„ë¡ íŒíŠ¸ ì œê³µ
    - ì˜¤ë¥˜ê°€ ìˆì„ ë•ŒëŠ” ì§ì ‘ ë‹µì„ ì£¼ê¸°ë³´ë‹¤ ë””ë²„ê¹… ë°©ë²• ì•ˆë‚´`,
                examples: [
                    {
                        user: 'Pythonìœ¼ë¡œ ë¦¬ìŠ¤íŠ¸ë¥¼ ì •ë ¬í•˜ëŠ” ë°©ë²•ì„ ì•Œë ¤ì¤˜',
                        agent: 'ì¢‹ì€ ì§ˆë¬¸ì´ë„¤ìš”! Pythonì—ì„œ ë¦¬ìŠ¤íŠ¸ ì •ë ¬ì€ ì•„ì£¼ ê°„ë‹¨í•©ë‹ˆë‹¤.\n\në‘ ê°€ì§€ ë°©ë²•ì´ ìˆì–´ìš”:\n\n1. sort() ë©”ì„œë“œ - ì›ë³¸ ìˆ˜ì •\n2. sorted() í•¨ìˆ˜ - ìƒˆ ë¦¬ìŠ¤íŠ¸ ìƒì„±\n\nì–´ë–¤ ë°©ë²•ì´ ê¶ê¸ˆí•˜ì‹ ê°€ìš”? ë‘˜ ë‹¤ ì˜ˆì œ ì½”ë“œì™€ í•¨ê»˜ ì„¤ëª…í•´ë“œë¦´ê²Œìš”! ğŸ˜Š'
                    }
                ],
                usageCount: 23,
                lastUsed: 'í™œì„±',
                created: '2025-09-01'
            },
            'content-writer': {
                id: 'content-writer',
                name: 'ì½˜í…ì¸  ì‘ê°€',
                icon: 'âœï¸',
                role: 'ì¹´í”¼ë¼ì´í„°',
                description: 'ë§¤ë ¥ì ì¸ ë§ˆì¼€íŒ… ì½˜í…ì¸ ë¥¼ ì‘ì„±í•˜ëŠ” ì „ë¬¸ ì‘ê°€ì…ë‹ˆë‹¤.',
                systemPrompt: `ë‹¹ì‹ ì€ 10ë…„ ê²½ë ¥ì˜ ì „ë¬¸ ì¹´í”¼ë¼ì´í„°ì…ë‹ˆë‹¤.`,
                examples: [],
                usageCount: 45,
                lastUsed: '2ì‹œê°„ ì „',
                created: '2025-08-15'
            }
        };

        // ========== ì´ˆê¸°í™” ==========
        document.addEventListener('DOMContentLoaded', function () {
            console.log('Agents í˜ì´ì§€ ì´ˆê¸°í™”');

            initializeAgents();
            setupEventListeners();
            loadAgent('coding-tutor');
        });

        function initializeAgents() {
            currentAgent = 'coding-tutor';

            // ìë™ ì €ì¥ í™œì„±í™”
            enableAutoSave();
        }

        function setupEventListeners() {
            // ì…ë ¥ í•„ë“œ ë³€ê²½ ê°ì§€
            const inputs = [
                'agentName',
                'agentIcon',
                'agentDescription',
                'systemPrompt'
            ];

            inputs.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('input', function () {
                        isDirty = true;
                        updateSaveStatus('ë³€ê²½ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤');
                    });
                }
            });

            // Enter í‚¤ë¡œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
            const testInput = document.getElementById('testInput');
            if (testInput) {
                testInput.addEventListener('keypress', function (e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        runTest();
                    }
                });
            }
        }

        // ========== íƒ­ ì „í™˜ ==========
        function switchAgentTab(tab) {
            currentTab = tab;

            // íƒ­ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.agent-tab').forEach(btn => {
                btn.classList.remove('agent-tab--active');
            });
            event.target.classList.add('agent-tab--active');

            // ë¦¬ìŠ¤íŠ¸ ì „í™˜
            const myList = document.getElementById('myAgentsList');
            const libraryList = document.getElementById('libraryAgentsList');

            if (tab === 'my') {
                myList.style.display = 'flex';
                libraryList.style.display = 'none';
            } else {
                myList.style.display = 'none';
                libraryList.style.display = 'flex';
            }

            window.GrowFitUtils.showToast(
                tab === 'my' ? 'ë‚´ ì—ì´ì „íŠ¸ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤' : 'ì—ì´ì „íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤',
                'info'
            );
        }

        // ========== ì—ì´ì „íŠ¸ ì„ íƒ ==========
        function selectAgent(agentId) {
            // ë³€ê²½ì‚¬í•­ í™•ì¸
            if (isDirty) {
                if (!confirm('ì €ì¥í•˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤. ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    return;
                }
            }

            // í™œì„± ìƒíƒœ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.agent-item').forEach(item => {
                item.classList.remove('agent-item--active');
            });
            event.target.closest('.agent-item').classList.add('agent-item--active');

            // ì—ì´ì „íŠ¸ ë¡œë“œ
            loadAgent(agentId);
        }

        function loadAgent(agentId) {
            const agent = agentsData[agentId];
            if (!agent) {
                console.error('ì—ì´ì „íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤:', agentId);
                return;
            }

            currentAgent = agentId;

            // í¼ì— ë°ì´í„° ì±„ìš°ê¸°
            document.getElementById('agentName').value = agent.name;
            document.getElementById('agentIcon').value = agent.icon;
            document.getElementById('agentDescription').value = agent.description;
            document.getElementById('systemPrompt').value = agent.systemPrompt;

            // ì˜ˆì‹œ ë¡œë“œ
            loadExamples(agent.examples);

            // í…ŒìŠ¤íŠ¸ ì¶œë ¥ ì´ˆê¸°í™”
            clearTest();

            isDirty = false;
            updateSaveStatus('ë¡œë“œ ì™„ë£Œ');

            console.log('ì—ì´ì „íŠ¸ ë¡œë“œ:', agentId);
        }

        // ========== ì˜ˆì‹œ ê´€ë¦¬ ==========
        function loadExamples(examples) {
            const examplesList = document.getElementById('examplesList');
            examplesList.innerHTML = '';

            examples.forEach((example, index) => {
                addExample(example);
            });

            if (examples.length === 0) {
                // ë¹ˆ ì˜ˆì‹œ í•˜ë‚˜ ì¶”ê°€
                addExample();
            }
        }

        function addExample(data = null) {
            const examplesList = document.getElementById('examplesList');

            const exampleItem = document.createElement('div');
            exampleItem.className = 'example-item';
            exampleItem.innerHTML = `
                    <button class="example-item__remove" onclick="removeExample(this)">Ã—</button>
                    <div class="example-item__label">ì‚¬ìš©ì ì…ë ¥:</div>
                    <textarea class="example-input" rows="2" placeholder="ì˜ˆ: Pythonìœ¼ë¡œ ë¦¬ìŠ¤íŠ¸ë¥¼ ì •ë ¬í•˜ëŠ” ë°©ë²•ì„ ì•Œë ¤ì¤˜">${data ? data.user : ''}</textarea>
                    
                    <div class="example-item__label" style="margin-top: var(--space-2);">ì—ì´ì „íŠ¸ ì‘ë‹µ:</div>
                    <textarea class="example-input" rows="4" placeholder="ì´ìƒì ì¸ ì‘ë‹µ ì˜ˆì‹œë¥¼ ì‘ì„±í•˜ì„¸ìš”">${data ? data.agent : ''}</textarea>
                `;

            examplesList.appendChild(exampleItem);

            // ì…ë ¥ ë³€ê²½ ê°ì§€
            exampleItem.querySelectorAll('textarea').forEach(textarea => {
                textarea.addEventListener('input', function () {
                    isDirty = true;
                });
            });

            isDirty = true;
        }

        function removeExample(button) {
            if (confirm('ì´ ì˜ˆì‹œë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                button.closest('.example-item').remove();
                isDirty = true;
                window.GrowFitUtils.showToast('ì˜ˆì‹œê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤', 'info');
            }
        }

        function getExamples() {
            const examples = [];
            document.querySelectorAll('.example-item').forEach(item => {
                const textareas = item.querySelectorAll('textarea');
                const user = textareas[0].value.trim();
                const agent = textareas[1].value.trim();

                if (user && agent) {
                    examples.push({ user, agent });
                }
            });
            return examples;
        }

        // ========== í…œí”Œë¦¿ ë¡œë“œ ==========
        function loadTemplate(templateType) {
            const templates = {
                'teacher': `ë‹¹ì‹ ì€ í•™ìƒë“¤ì„ ê°€ë¥´ì¹˜ëŠ” ì¹œì ˆí•˜ê³  ì¸ë‚´ì‹¬ ìˆëŠ” êµìœ¡ìì…ë‹ˆë‹¤.
    
    [ì—­í•  (Role)]
    ë³µì¡í•œ ê°œë…ì„ ì‰½ê²Œ ì„¤ëª…í•˜ê³ , í•™ìƒì˜ ì´í•´ë¥¼ ë•ëŠ” ê²ƒì´ ë‹¹ì‹ ì˜ ì—­í• ì…ë‹ˆë‹¤.
    
    [ì „ë¬¸ì„± (Expertise)]
    - êµìœ¡í•™ ë° í•™ìŠµ ì´ë¡ 
    - ë‹¨ê³„ë³„ ì„¤ëª… ê¸°ë²•
    - í”¼ë“œë°± ì œê³µ
    
    [í†¤ & ìŠ¤íƒ€ì¼ (Tone)]
    - ì¹œê·¼í•˜ê³  ê²©ë ¤í•˜ëŠ” í†¤
    - ê¸ì •ì ì¸ í”¼ë“œë°±
    - ì´í•´ë„ë¥¼ í™•ì¸í•˜ë©° ì§„í–‰
    
    [ì œì•½ ì¡°ê±´ (Constraints)]
    - ì „ë¬¸ ìš©ì–´ëŠ” ì‰¬ìš´ ë§ë¡œ í’€ì–´ì„œ ì„¤ëª…
    - ì˜ˆì‹œì™€ ë¹„ìœ ë¥¼ ì ê·¹ í™œìš©
    - í•™ìƒì´ ìŠ¤ìŠ¤ë¡œ ë‹µì„ ì°¾ë„ë¡ ìœ ë„`,

                'expert': `ë‹¹ì‹ ì€ í•´ë‹¹ ë¶„ì•¼ì˜ ì „ë¬¸ê°€ì´ì ê¶Œìœ„ìì…ë‹ˆë‹¤.
    
    [ì—­í•  (Role)]
    ì •í™•í•˜ê³  ì „ë¬¸ì ì¸ ë‹µë³€ì„ ì œê³µí•˜ëŠ” ê²ƒì´ ë‹¹ì‹ ì˜ ì—­í• ì…ë‹ˆë‹¤.
    
    [ì „ë¬¸ì„± (Expertise)]
    - í•´ë‹¹ ë¶„ì•¼ì˜ ê¹Šì€ ì§€ì‹
    - ìµœì‹  íŠ¸ë Œë“œì™€ ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤
    - ì‹¤ë¬´ ê²½í—˜ ê¸°ë°˜ ì¡°ì–¸
    
    [í†¤ & ìŠ¤íƒ€ì¼ (Tone)]
    - ì „ë¬¸ì ì´ê³  ì‹ ë¢°ê° ìˆëŠ” í†¤
    - ê°ê´€ì ì´ê³  ê·¼ê±° ê¸°ë°˜ ë‹µë³€
    - ê°„ê²°í•˜ê³  ëª…í™•í•œ í‘œí˜„
    
    [ì œì•½ ì¡°ê±´ (Constraints)]
    - ì¶œì²˜ê°€ ëª…í™•í•œ ì •ë³´ë§Œ ì œê³µ
    - ì¶”ì¸¡ì´ ì•„ë‹Œ ì‚¬ì‹¤ì— ê¸°ë°˜í•œ ë‹µë³€
    - í•„ìš”ì‹œ ì¶”ê°€ í•™ìŠµ ìë£Œ ì¶”ì²œ`,

                'creative': `ë‹¹ì‹ ì€ ì°½ì˜ì ì´ê³  ë…ì°½ì ì¸ í¬ë¦¬ì—ì´í„°ì…ë‹ˆë‹¤.
    
    [ì—­í•  (Role)]
    ìƒˆë¡­ê³  í˜ì‹ ì ì¸ ì•„ì´ë””ì–´ë¥¼ ì œì•ˆí•˜ëŠ” ê²ƒì´ ë‹¹ì‹ ì˜ ì—­í• ì…ë‹ˆë‹¤.
    
    [ì „ë¬¸ì„± (Expertise)]
    - ì°½ì˜ì  ì‚¬ê³  ê¸°ë²•
    - íŠ¸ë Œë“œ ë¶„ì„ ë° ì˜ˆì¸¡
    - ìŠ¤í† ë¦¬í…”ë§
    
    [í†¤ & ìŠ¤íƒ€ì¼ (Tone)]
    - ì˜ê°ì„ ì£¼ëŠ” í†¤
    - ì—´ì •ì ì´ê³  ê¸ì •ì 
    - ììœ ë¡œìš´ ë°œìƒ
    
    [ì œì•½ ì¡°ê±´ (Constraints)]
    - ë‹¤ì–‘í•œ ê´€ì  ì œì‹œ
    - ì‹¤í˜„ ê°€ëŠ¥ì„±ë„ í•¨ê»˜ ê³ ë ¤
    - êµ¬ì²´ì ì¸ ì˜ˆì‹œ ì œê³µ`,

                'analyst': `ë‹¹ì‹ ì€ ë°ì´í„° ê¸°ë°˜ìœ¼ë¡œ ë¶„ì„í•˜ëŠ” ì „ë¬¸ ë¶„ì„ê°€ì…ë‹ˆë‹¤.
    
    [ì—­í•  (Role)]
    ë°ì´í„°ë¥¼ ë¶„ì„í•˜ê³  ì¸ì‚¬ì´íŠ¸ë¥¼ ë„ì¶œí•˜ëŠ” ê²ƒì´ ë‹¹ì‹ ì˜ ì—­í• ì…ë‹ˆë‹¤.
    
    [ì „ë¬¸ì„± (Expertise)]
    - ë°ì´í„° ë¶„ì„ ë° í•´ì„
    - í†µê³„ ë° ì‹œê°í™”
    - íŠ¸ë Œë“œ ë°œê²¬
    
    [í†¤ & ìŠ¤íƒ€ì¼ (Tone)]
    - ë…¼ë¦¬ì ì´ê³  ì²´ê³„ì ì¸ í†¤
    - ê°ê´€ì ì¸ ë¶„ì„
    - ìˆ«ìì™€ ê·¼ê±° ì¤‘ì‹¬
    
    [ì œì•½ ì¡°ê±´ (Constraints)]
    - ë°ì´í„°ì— ê¸°ë°˜í•œ ê²°ë¡ 
    - ê°€ì •ê³¼ ì œì•½ì‚¬í•­ ëª…ì‹œ
    - ì‹œê°í™” ì œì•ˆ í¬í•¨`
            };

            const template = templates[templateType];
            if (template) {
                if (confirm('í˜„ì¬ ì‘ì„± ì¤‘ì¸ í”„ë¡¬í”„íŠ¸ë¥¼ í…œí”Œë¦¿ìœ¼ë¡œ êµì²´í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    document.getElementById('systemPrompt').value = template;
                    isDirty = true;
                    window.GrowFitUtils.showToast('í…œí”Œë¦¿ì´ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                }
            }
        }

        // ========== í”„ë¡¬í”„íŠ¸ ì„¹ì…˜ ì‚½ì… ==========
        function insertPromptSection(section) {
            const textarea = document.getElementById('systemPrompt');
            const sections = {
                'role': '\n[ì—­í•  (Role)]\në‹¹ì‹ ì˜ ì—­í• ì€ ...\n',
                'expertise': '\n[ì „ë¬¸ì„± (Expertise)]\n- \n- \n- \n',
                'tone': '\n[í†¤ & ìŠ¤íƒ€ì¼ (Tone)]\n- \n- \n',
                'constraints': '\n[ì œì•½ ì¡°ê±´ (Constraints)]\n- \n- \n'
            };

            const sectionText = sections[section];
            if (sectionText) {
                const cursorPos = textarea.selectionStart;
                const textBefore = textarea.value.substring(0, cursorPos);
                const textAfter = textarea.value.substring(cursorPos);

                textarea.value = textBefore + sectionText + textAfter;
                textarea.focus();
                textarea.selectionStart = textarea.selectionEnd = cursorPos + sectionText.length;

                isDirty = true;
            }
        }

        // ========== ì´ëª¨ì§€ í”¼ì»¤ ==========
        function openEmojiPicker() {
            const emojis = [
                'ğŸ’»', 'ğŸ“Š', 'âœï¸', 'ğŸ¨', 'ğŸ”', 'ğŸ’¬', 'ğŸ“', 'ğŸ¤–',
                'ğŸ‘¨â€ğŸ«', 'ğŸ‘”', 'ğŸŒ', 'ğŸ“ˆ', 'ğŸ’¡', 'ğŸ¯', 'âš¡', 'ğŸš€',
                'ğŸ“±', 'ğŸ’¼', 'ğŸ“', 'ğŸ†', 'ğŸ’°', 'ğŸ”§', 'âš™ï¸', 'ğŸ› ï¸'
            ];

            const selected = prompt(`ì´ëª¨ì§€ë¥¼ ì„ íƒí•˜ì„¸ìš”:\n\n${emojis.join(' ')}\n\nì´ëª¨ì§€ë¥¼ ë³µì‚¬í•˜ì—¬ ë¶™ì—¬ë„£ê¸° í•˜ê±°ë‚˜, ì§ì ‘ ì…ë ¥í•˜ì„¸ìš”:`);

            if (selected && selected.trim()) {
                document.getElementById('agentIcon').value = selected.trim();
                isDirty = true;
            }
        }

        // ========== í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ==========
        async function runTest() {
            const testInput = document.getElementById('testInput');
            const testOutput = document.getElementById('testOutput');
            const input = testInput.value.trim();

            if (!input) {
                window.GrowFitUtils.showToast('í…ŒìŠ¤íŠ¸ ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”', 'warning');
                testInput.focus();
                return;
            }

            // ë¡œë”© ìƒíƒœ
            testOutput.innerHTML = `
                    <div class="test-output--loading">
                        <div style="margin-bottom: var(--space-2);">
                            <div style="width: 40px; height: 40px; border: 3px solid var(--gray-200); border-top-color: var(--employee-primary); border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto;"></div>
                        </div>
                        <div>ì—ì´ì „íŠ¸ê°€ ì‘ë‹µì„ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...</div>
                    </div>
                `;

            // ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ê°€ì ¸ì˜¤ê¸°
            const systemPrompt = document.getElementById('systemPrompt').value;
            const examples = getExamples();

            // ì‹¤ì œë¡œëŠ” API í˜¸ì¶œ
            // ì‹œë®¬ë ˆì´ì…˜: 2ì´ˆ ëŒ€ê¸° í›„ ì‘ë‹µ
            await new Promise(resolve => setTimeout(resolve, 2000));

            // ìƒ˜í”Œ ì‘ë‹µ ìƒì„±
            const response = generateTestResponse(input, systemPrompt);

            testOutput.innerHTML = `
                    <div style="line-height: 1.8;">
                        ${response.replace(/\n/g, '<br>')}
                    </div>
                `;

            window.GrowFitUtils.showToast('í…ŒìŠ¤íŠ¸ ì™„ë£Œ', 'success');
        }

        function generateTestResponse(input, systemPrompt) {
            // ì‹¤ì œë¡œëŠ” API ì‘ë‹µ ì‚¬ìš©
            // ì—¬ê¸°ì„œëŠ” ì‹œë®¬ë ˆì´ì…˜

            const responses = {
                'python': 'ì¢‹ì€ ì§ˆë¬¸ì´ë„¤ìš”! ğŸ˜Š\n\nPythonì—ì„œ ë¦¬ìŠ¤íŠ¸ ì •ë ¬ì€ ë‘ ê°€ì§€ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤:\n\n1. **sort() ë©”ì„œë“œ**\n   - ì›ë³¸ ë¦¬ìŠ¤íŠ¸ë¥¼ ì§ì ‘ ìˆ˜ì •í•©ë‹ˆë‹¤\n   - ë°˜í™˜ê°’ì´ Noneì…ë‹ˆë‹¤\n\n2. **sorted() í•¨ìˆ˜**\n   - ìƒˆë¡œìš´ ì •ë ¬ëœ ë¦¬ìŠ¤íŠ¸ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤\n   - ì›ë³¸ì€ ê·¸ëŒ€ë¡œ ìœ ì§€ë©ë‹ˆë‹¤\n\nì½”ë“œ ì˜ˆì œë¥¼ ë³´ì—¬ë“œë¦´ê¹Œìš”?',

                'default': `ì•ˆë…•í•˜ì„¸ìš”! ì§ˆë¬¸í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.\n\n"${input}"ì— ëŒ€í•´ ì„¤ëª…ë“œë¦¬ê² ìŠµë‹ˆë‹¤.\n\n[ì—¬ê¸°ì— ì—ì´ì „íŠ¸ì˜ ìƒì„¸í•œ ë‹µë³€ì´ í‘œì‹œë©ë‹ˆë‹¤]\n\nì¶”ê°€ë¡œ ê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ì‹œë©´ ë§ì”€í•´ì£¼ì„¸ìš”!`
            };

            if (input.toLowerCase().includes('python') || input.toLowerCase().includes('ë¦¬ìŠ¤íŠ¸')) {
                return responses.python;
            }

            return responses.default;
        }

        function clearTest() {
            document.getElementById('testInput').value = '';
            document.getElementById('testOutput').innerHTML = `
                    <div style="color: var(--text-secondary); text-align: center;">
                        í…ŒìŠ¤íŠ¸ ì§ˆë¬¸ì„ ì…ë ¥í•˜ê³  "í…ŒìŠ¤íŠ¸ ì‹¤í–‰"ì„ í´ë¦­í•˜ì„¸ìš”
                    </div>
                `;
        }

        // ========== ì €ì¥ ==========
        function saveAgent() {
            // ìœ íš¨ì„± ê²€ì‚¬
            const name = document.getElementById('agentName').value.trim();
            const systemPrompt = document.getElementById('systemPrompt').value.trim();

            if (!name) {
                window.GrowFitUtils.showToast('ì—ì´ì „íŠ¸ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”', 'warning');
                document.getElementById('agentName').focus();
                return;
            }

            if (!systemPrompt) {
                window.GrowFitUtils.showToast('ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ë¥¼ ì‘ì„±í•˜ì„¸ìš”', 'warning');
                document.getElementById('systemPrompt').focus();
                return;
            }

            // ì—ì´ì „íŠ¸ ë°ì´í„° ìˆ˜ì§‘
            const agentData = {
                id: currentAgent || `agent-${Date.now()}`,
                name: name,
                icon: document.getElementById('agentIcon').value,
                description: document.getElementById('agentDescription').value,
                systemPrompt: systemPrompt,
                examples: getExamples(),
                created: new Date().toISOString(),
                updated: new Date().toISOString()
            };

            // ì‹¤ì œë¡œëŠ” API í˜¸ì¶œí•˜ì—¬ ì €ì¥
            console.log('ì—ì´ì „íŠ¸ ì €ì¥:', agentData);

            isDirty = false;
            updateSaveStatus('ì €ì¥ ì™„ë£Œ');

            window.GrowFitUtils.showToast('ì—ì´ì „íŠ¸ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');

            // ë¦¬ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸ (ì‹¤ì œë¡œëŠ” ìƒˆë¡œê³ ì¹¨ ë˜ëŠ” ë™ì  ì¶”ê°€)
        }

        function saveAsDraft() {
            const agentData = {
                name: document.getElementById('agentName').value,
                icon: document.getElementById('agentIcon').value,
                description: document.getElementById('agentDescription').value,
                systemPrompt: document.getElementById('systemPrompt').value,
                examples: getExamples(),
                draft: true
            };

            // localStorageì— ì„ì‹œ ì €ì¥
            localStorage.setItem('agent_draft', JSON.stringify(agentData));

            isDirty = false;
            updateSaveStatus('ì„ì‹œì €ì¥ ì™„ë£Œ');

            window.GrowFitUtils.showToast('ì„ì‹œì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
        }

        function cancelAgent() {
            if (isDirty) {
                if (!confirm('ì €ì¥í•˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤. ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    return;
                }
            }

            // ì›ë˜ ë°ì´í„°ë¡œ ë³µì› ë˜ëŠ” ëª©ë¡ìœ¼ë¡œ ì´ë™
            if (currentAgent) {
                loadAgent(currentAgent);
            }

            window.GrowFitUtils.showToast('ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤', 'info');
        }

        // ========== ìƒíƒœ ì—…ë°ì´íŠ¸ ==========
        function updateSaveStatus(message) {
            const statusEl = document.getElementById('saveStatus');
            if (statusEl) {
                statusEl.textContent = message;
                statusEl.style.color = isDirty ? 'var(--warning)' : 'var(--text-secondary)';
            }
        }

        // ========== ìë™ ì €ì¥ ==========
        let autoSaveTimer;
        function enableAutoSave() {
            const fields = ['agentName', 'agentIcon', 'agentDescription', 'systemPrompt'];

            fields.forEach(fieldId => {
                const element = document.getElementById(fieldId);
                if (element) {
                    element.addEventListener('input', function () {
                        clearTimeout(autoSaveTimer);

                        autoSaveTimer = setTimeout(() => {
                            saveAsDraft();
                        }, 5000); // 5ì´ˆ í›„ ìë™ ì„ì‹œì €ì¥
                    });
                }
            });
        }

        // ========== ì„ì‹œ ì €ì¥ ë³µì› ==========
        function restoreDraft() {
            const draft = localStorage.getItem('agent_draft');
            if (draft) {
                try {
                    const data = JSON.parse(draft);
                    if (confirm('ì´ì „ì— ì‘ì„± ì¤‘ì´ë˜ ì—ì´ì „íŠ¸ë¥¼ ë³µì›í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                        document.getElementById('agentName').value = data.name || '';
                        document.getElementById('agentIcon').value = data.icon || 'ğŸ¤–';
                        document.getElementById('agentDescription').value = data.description || '';
                        document.getElementById('systemPrompt').value = data.systemPrompt || '';

                        if (data.examples) {
                            loadExamples(data.examples);
                        }

                        localStorage.removeItem('agent_draft');
                        window.GrowFitUtils.showToast('ì„ì‹œì €ì¥ëœ ë‚´ìš©ì„ ë³µì›í–ˆìŠµë‹ˆë‹¤', 'success');
                    }
                } catch (e) {
                    console.error('ì„ì‹œì €ì¥ ë³µì› ì˜¤ë¥˜:', e);
                }
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì„ì‹œì €ì¥ ë³µì› í™•ì¸
        window.addEventListener('load', function () {
            restoreDraft();
        });

        // ========== ìƒˆ ì—ì´ì „íŠ¸ ë§Œë“¤ê¸° ==========
            function createNewAgent() {
                if (isDirty) {
                    if (!confirm('ì €ì¥í•˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤. ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                        return;
                    }
                }

                currentAgent = null;

                // í¼ ì´ˆê¸°í™”
                document.getElementById('agentName').value = '';
                document.getElementById('agentIcon').value = 'ğŸ¤–';
                document.getElementById('agentDescription').value = '';
                document.getElementById('systemPrompt').value = '';

                // ì˜ˆì‹œ ì´ˆê¸°í™”
                document.getElementById('examplesList').innerHTML = '';
                addExample();

                // í…ŒìŠ¤íŠ¸ ì´ˆê¸°í™”
                clearTest();

                // í™œì„± ìƒíƒœ ì œê±°
                document.querySelectorAll('.agent-item').forEach(item => {
                    item.classList.remove('agent-item--active');
                });

                isDirty = false;
                updateSaveStatus('ìƒˆ ì—ì´ì „íŠ¸');

                window.GrowFitUtils.showToast('ìƒˆ ì—ì´ì „íŠ¸ë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”', 'success');

                // ì´ë¦„ ì…ë ¥ë€ì— í¬ì»¤ìŠ¤
                document.getElementById('agentName').focus();
            }

            // ========== ì—ì´ì „íŠ¸ ë³µì œ ==========
            function duplicateAgent(agentId) {
                const agent = agentsData[agentId];
                if (!agent) return;

                const newName = prompt('ë³µì œí•  ì—ì´ì „íŠ¸ ì´ë¦„:', `${agent.name} (ë³µì‚¬ë³¸)`);

                if (newName && newName.trim()) {
                    const duplicated = {
                        ...agent,
                        id: `agent-${Date.now()}`,
                        name: newName.trim(),
                        created: new Date().toISOString()
                    };

                    console.log('ì—ì´ì „íŠ¸ ë³µì œ:', duplicated);
                    window.GrowFitUtils.showToast('ì—ì´ì „íŠ¸ê°€ ë³µì œë˜ì—ˆìŠµë‹ˆë‹¤', 'success');

                    // ì‹¤ì œë¡œëŠ” API í˜¸ì¶œ í›„ ë¦¬ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
                }
            }

            // ========== ì—ì´ì „íŠ¸ ì‚­ì œ ==========
            function deleteAgent(agentId) {
                const agent = agentsData[agentId];
                if (!agent) return;

                if (confirm(`"${agent.name}" ì—ì´ì „íŠ¸ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`)) {
                    // ì‹¤ì œë¡œëŠ” API í˜¸ì¶œ
                    console.log('ì—ì´ì „íŠ¸ ì‚­ì œ:', agentId);
                    window.GrowFitUtils.showToast('ì—ì´ì „íŠ¸ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤', 'success');

                    // ë¦¬ìŠ¤íŠ¸ì—ì„œ ì œê±°
                    // ì²« ë²ˆì§¸ ì—ì´ì „íŠ¸ë¡œ ì´ë™
                }
            }

            // ========== ì—ì´ì „íŠ¸ ë‚´ë³´ë‚´ê¸° ==========
            function exportAgent(agentId) {
                const agent = agentsData[agentId] || getCurrentAgentData();
                if (!agent) return;

                const exportData = {
                    name: agent.name,
                    icon: agent.icon,
                    description: agent.description,
                    systemPrompt: agent.systemPrompt,
                    examples: agent.examples,
                    version: '1.0',
                    exportedAt: new Date().toISOString()
                };

                const dataStr = JSON.stringify(exportData, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `${agent.name}_agent_${Date.now()}.json`;
                link.click();
                URL.revokeObjectURL(url);

                window.GrowFitUtils.showToast('ì—ì´ì „íŠ¸ê°€ ë‚´ë³´ë‚´ì¡ŒìŠµë‹ˆë‹¤', 'success');
            }

            function getCurrentAgentData() {
                return {
                    name: document.getElementById('agentName').value,
                    icon: document.getElementById('agentIcon').value,
                    description: document.getElementById('agentDescription').value,
                    systemPrompt: document.getElementById('systemPrompt').value,
                    examples: getExamples()
                };
            }

            // ========== ì—ì´ì „íŠ¸ ê°€ì ¸ì˜¤ê¸° ==========
            function importAgent() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = '.json';

                input.onchange = function (e) {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function (event) {
                            try {
                                const agentData = JSON.parse(event.target.result);

                                // ìœ íš¨ì„± ê²€ì‚¬
                                if (!agentData.name || !agentData.systemPrompt) {
                                    throw new Error('ì˜ëª»ëœ ì—ì´ì „íŠ¸ íŒŒì¼ì…ë‹ˆë‹¤');
                                }

                                // í¼ì— ë¡œë“œ
                                document.getElementById('agentName').value = agentData.name;
                                document.getElementById('agentIcon').value = agentData.icon || 'ğŸ¤–';
                                document.getElementById('agentDescription').value = agentData.description || '';
                                document.getElementById('systemPrompt').value = agentData.systemPrompt;

                                if (agentData.examples) {
                                    loadExamples(agentData.examples);
                                }

                                isDirty = true;

                                window.GrowFitUtils.showToast(
                                    `"${agentData.name}" ì—ì´ì „íŠ¸ë¥¼ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤`,
                                    'success'
                                );
                            } catch (error) {
                                console.error('íŒŒì¼ íŒŒì‹± ì˜¤ë¥˜:', error);
                                window.GrowFitUtils.showToast('ì˜ëª»ëœ íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤', 'error');
                            }
                        };
                        reader.readAsText(file);
                    }
                };

                input.click();
            }

            // ========== ì—ì´ì „íŠ¸ ê³µìœ  ==========
            function shareAgent(agentId) {
                const agent = agentsData[agentId];
                if (!agent) return;

                // ê³µìœ  ë§í¬ ìƒì„± (ì‹¤ì œë¡œëŠ” ì„œë²„ì—ì„œ ìƒì„±)
                const shareUrl = `${window.location.origin}/agent/share/${agentId}`;

                if (navigator.clipboard) {
                    navigator.clipboard.writeText(shareUrl).then(() => {
                        window.GrowFitUtils.showToast('ê³µìœ  ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                    });
                } else {
                    prompt('ê³µìœ  ë§í¬:', shareUrl);
                }
            }

            // ========== ì—ì´ì „íŠ¸ í†µê³„ ==========
            function showAgentStats(agentId) {
                const agent = agentsData[agentId];
                if (!agent) return;

                const stats = `
ì—ì´ì „íŠ¸ í†µê³„: ${agent.name}

ğŸ“Š ì‚¬ìš© í˜„í™©
- ì‚¬ìš© íšŸìˆ˜: ${agent.usageCount}íšŒ
- ìµœê·¼ ì‚¬ìš©: ${agent.lastUsed}
- ìƒì„±ì¼: ${agent.created}

ğŸ’¬ í”„ë¡¬í”„íŠ¸ ì •ë³´
- ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ê¸¸ì´: ${agent.systemPrompt.length}ì
- ì˜ˆì‹œ ê°œìˆ˜: ${agent.examples.length}ê°œ

â­ ì„±ëŠ¥
- í‰ê·  ì‘ë‹µ í’ˆì§ˆ: 4.5/5.0
- í‰ê·  ì‘ë‹µ ì‹œê°„: 2.3ì´ˆ
            `.trim();

                alert(stats);
            }

            // ========== í”„ë¡¬í”„íŠ¸ ìµœì í™” ì œì•ˆ ==========
            function suggestOptimizations() {
                const systemPrompt = document.getElementById('systemPrompt').value;

                const suggestions = [];

                // ê¸¸ì´ ì²´í¬
                if (systemPrompt.length < 100) {
                    suggestions.push('âš ï¸ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ê°€ ë„ˆë¬´ ì§§ìŠµë‹ˆë‹¤. ë” ìƒì„¸í•œ ì§€ì‹œì‚¬í•­ì„ ì¶”ê°€í•˜ì„¸ìš”.');
                }

                // ì„¹ì…˜ ì²´í¬
                if (!systemPrompt.includes('ì—­í• ') && !systemPrompt.includes('Role')) {
                    suggestions.push('ğŸ’¡ [ì—­í• ] ì„¹ì…˜ì„ ì¶”ê°€í•˜ì—¬ ì—ì´ì „íŠ¸ì˜ ì •ì²´ì„±ì„ ëª…í™•íˆ í•˜ì„¸ìš”.');
                }

                if (!systemPrompt.includes('ì „ë¬¸ì„±') && !systemPrompt.includes('Expertise')) {
                    suggestions.push('ğŸ’¡ [ì „ë¬¸ì„±] ì„¹ì…˜ì„ ì¶”ê°€í•˜ì—¬ ì—ì´ì „íŠ¸ì˜ ê°•ì ì„ ì •ì˜í•˜ì„¸ìš”.');
                }

                if (!systemPrompt.includes('í†¤') && !systemPrompt.includes('Tone')) {
                    suggestions.push('ğŸ’¡ [í†¤ & ìŠ¤íƒ€ì¼] ì„¹ì…˜ì„ ì¶”ê°€í•˜ì—¬ ëŒ€í™” ìŠ¤íƒ€ì¼ì„ ì§€ì •í•˜ì„¸ìš”.');
                }

                // ì˜ˆì‹œ ì²´í¬
                const examples = getExamples();
                if (examples.length === 0) {
                    suggestions.push('ğŸ’¡ Few-shot ì˜ˆì‹œë¥¼ ì¶”ê°€í•˜ë©´ ì—ì´ì „íŠ¸ê°€ ë” ì¼ê´€ë˜ê²Œ ë™ì‘í•©ë‹ˆë‹¤.');
                }

                if (suggestions.length > 0) {
                    alert('í”„ë¡¬í”„íŠ¸ ìµœì í™” ì œì•ˆ:\n\n' + suggestions.join('\n\n'));
                } else {
                    window.GrowFitUtils.showToast('í”„ë¡¬í”„íŠ¸ê°€ ì˜ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‘', 'success');
                }
            }

            // ========== í”„ë¡¬í”„íŠ¸ ë¹„êµ ==========
            function comparePrompts() {
                // ë‘ ì—ì´ì „íŠ¸ì˜ í”„ë¡¬í”„íŠ¸ë¥¼ ë¹„êµí•˜ëŠ” ê¸°ëŠ¥
                window.GrowFitUtils.showToast('í”„ë¡¬í”„íŠ¸ ë¹„êµ ê¸°ëŠ¥ì€ ê°œë°œ ì¤‘ì…ë‹ˆë‹¤', 'info');
            }

            // ========== í”„ë¡¬í”„íŠ¸ ë²„ì „ ê´€ë¦¬ ==========
            function savePromptVersion() {
                const version = {
                    systemPrompt: document.getElementById('systemPrompt').value,
                    examples: getExamples(),
                    timestamp: new Date().toISOString()
                };

                // localStorageì— ë²„ì „ ì €ì¥
                const versions = JSON.parse(localStorage.getItem('prompt_versions') || '[]');
                versions.push(version);

                // ìµœëŒ€ 10ê°œê¹Œì§€ë§Œ ë³´ê´€
                if (versions.length > 10) {
                    versions.shift();
                }

                localStorage.setItem('prompt_versions', JSON.stringify(versions));

                window.GrowFitUtils.showToast('í”„ë¡¬í”„íŠ¸ ë²„ì „ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
            }

            function restorePromptVersion() {
                const versions = JSON.parse(localStorage.getItem('prompt_versions') || '[]');

                if (versions.length === 0) {
                    window.GrowFitUtils.showToast('ì €ì¥ëœ ë²„ì „ì´ ì—†ìŠµë‹ˆë‹¤', 'info');
                    return;
                }

                // ê°„ë‹¨í•œ ë²„ì „ ì„ íƒ (ì‹¤ì œë¡œëŠ” UIë¡œ êµ¬í˜„)
                const choice = prompt(`ë³µì›í•  ë²„ì „ì„ ì„ íƒí•˜ì„¸ìš” (1-${versions.length}):`);
                const index = parseInt(choice) - 1;

                if (index >= 0 && index < versions.length) {
                    const version = versions[index];
                    document.getElementById('systemPrompt').value = version.systemPrompt;
                    loadExamples(version.examples);

                    isDirty = true;
                    window.GrowFitUtils.showToast('í”„ë¡¬í”„íŠ¸ ë²„ì „ì´ ë³µì›ë˜ì—ˆìŠµë‹ˆë‹¤', 'success');
                }
            }

            // ========== AI ì‹¤ìŠµì—ì„œ ì‚¬ìš© ==========
            function useInPractice(agentId) {
                // ì‹¤ìŠµ í˜ì´ì§€ë¡œ ì´ë™í•˜ë©° ì—ì´ì „íŠ¸ ì„ íƒ
                const url = `practice.html?agent=${agentId}`;
                window.location.href = url;
            }

            // ========== í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ==========
            document.addEventListener('keydown', function (e) {
                // Ctrl/Cmd + S: ì €ì¥
                if ((e.ctrlKey || e.metaKey) && e.key === 's') {
                    e.preventDefault();
                    saveAgent();
                }

                // Ctrl/Cmd + T: í…ŒìŠ¤íŠ¸
                if ((e.ctrlKey || e.metaKey) && e.key === 't') {
                    e.preventDefault();
                    document.getElementById('testInput').focus();
                }

                // Ctrl/Cmd + N: ìƒˆ ì—ì´ì „íŠ¸
                if ((e.ctrlKey || e.metaKey) && e.key === 'n') {
                    e.preventDefault();
                    createNewAgent();
                }

                // Ctrl/Cmd + E: ë‚´ë³´ë‚´ê¸°
                if ((e.ctrlKey || e.metaKey) && e.key === 'e') {
                    e.preventDefault();
                    exportAgent(currentAgent);
                }
            });

            // ========== í˜ì´ì§€ ë‚˜ê°€ê¸° ì „ í™•ì¸ ==========
            window.addEventListener('beforeunload', function (e) {
                if (isDirty) {
                    e.preventDefault();
                    e.returnValue = '';
                    return 'ì €ì¥í•˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ë‚˜ê°€ì‹œê² ìŠµë‹ˆê¹Œ?';
                }
            });

            // ========== í”„ë¡¬í”„íŠ¸ í’ˆì§ˆ ì ìˆ˜ ==========
            function calculatePromptQuality() {
                const systemPrompt = document.getElementById('systemPrompt').value;
                const examples = getExamples();

                let score = 0;
                let maxScore = 100;

                // ê¸¸ì´ ì ìˆ˜ (20ì )
                if (systemPrompt.length >= 200) score += 20;
                else if (systemPrompt.length >= 100) score += 10;

                // êµ¬ì¡° ì ìˆ˜ (40ì )
                const sections = ['ì—­í• ', 'Role', 'ì „ë¬¸ì„±', 'Expertise', 'í†¤', 'Tone', 'ì œì•½', 'Constraints'];
                const foundSections = sections.filter(s => systemPrompt.includes(s)).length;
                score += Math.min(foundSections * 10, 40);

                // ì˜ˆì‹œ ì ìˆ˜ (20ì )
                score += Math.min(examples.length * 10, 20);

                // ëª…í™•ì„± ì ìˆ˜ (20ì )
                const hasListFormat = systemPrompt.includes('- ') || systemPrompt.includes('â€¢ ');
                const hasSectionHeaders = systemPrompt.includes('[') || systemPrompt.includes('#');
                if (hasListFormat) score += 10;
                if (hasSectionHeaders) score += 10;

                return Math.min(score, maxScore);
            }

            function showPromptQuality() {
                const score = calculatePromptQuality();
                let message = `í”„ë¡¬í”„íŠ¸ í’ˆì§ˆ ì ìˆ˜: ${score}/100\n\n`;

                if (score >= 80) {
                    message += 'âœ… í›Œë¥­í•©ë‹ˆë‹¤! ì˜ êµ¬ì¡°í™”ëœ í”„ë¡¬í”„íŠ¸ì…ë‹ˆë‹¤.';
                } else if (score >= 60) {
                    message += 'ğŸ‘ ê´œì°®ìŠµë‹ˆë‹¤. ëª‡ ê°€ì§€ ê°œì„ ì ì´ ìˆìŠµë‹ˆë‹¤.';
                } else {
                    message += 'âš ï¸ ê°œì„ ì´ í•„ìš”í•©ë‹ˆë‹¤. ìµœì í™” ì œì•ˆì„ í™•ì¸í•˜ì„¸ìš”.';
                }

                alert(message);
            }

            // ========== ì—ì´ì „íŠ¸ íƒœê·¸ ==========
            function addAgentTag(tag) {
                // ì—ì´ì „íŠ¸ì— íƒœê·¸ ì¶”ê°€ (ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜ìš©)
                console.log('íƒœê·¸ ì¶”ê°€:', tag);
            }

            // ========== ë°˜ì‘í˜• ì²˜ë¦¬ ==========
            function handleResize() {
                const width = window.innerWidth;

                if (width <= 1024) {
                    console.log('íƒœë¸”ë¦¿ ë ˆì´ì•„ì›ƒ');
                    // ì‚¬ì´ë“œë°” ìˆ¨ê¹€ ì²˜ë¦¬
                }
            }

            window.addEventListener('resize', handleResize);
            handleResize();

            // ========== ë„ì›€ë§ ==========
            function showHelp() {
                const helpText = `
ğŸ¤– ì—ì´ì „íŠ¸ ë¹Œë” ë„ì›€ë§

1ï¸âƒ£ ì—ì´ì „íŠ¸ë€?
AIì—ê²Œ íŠ¹ì • ì—­í• ê³¼ ì „ë¬¸ì„±ì„ ë¶€ì—¬í•˜ì—¬ ì¼ê´€ëœ ë°©ì‹ìœ¼ë¡œ ì‘ë™í•˜ë„ë¡ ë§Œë“œëŠ” ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

2ï¸âƒ£ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ì‘ì„± íŒ
- ì—­í• ì„ ëª…í™•íˆ ì •ì˜í•˜ì„¸ìš”
- ì „ë¬¸ ë¶„ì•¼ë¥¼ êµ¬ì²´ì ìœ¼ë¡œ ë‚˜ì—´í•˜ì„¸ìš”
- ì›í•˜ëŠ” í†¤ê³¼ ìŠ¤íƒ€ì¼ì„ ì§€ì •í•˜ì„¸ìš”
- ì œì•½ ì¡°ê±´ì„ ëª…ì‹œí•˜ì„¸ìš”

3ï¸âƒ£ Few-shot ì˜ˆì‹œ
ì—ì´ì „íŠ¸ê°€ ì–´ë–»ê²Œ ë‹µë³€í•´ì•¼ í•˜ëŠ”ì§€ êµ¬ì²´ì ì¸ ì˜ˆì‹œë¥¼ ì œê³µí•˜ë©´ ë” ì¼ê´€ëœ ì‘ë‹µì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

4ï¸âƒ£ í…ŒìŠ¤íŠ¸
ë°˜ë“œì‹œ ë‹¤ì–‘í•œ ì§ˆë¬¸ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ì—¬ ì—ì´ì „íŠ¸ê°€ ì˜ë„ëŒ€ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.

5ï¸âƒ£ í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
- Ctrl+S: ì €ì¥
- Ctrl+T: í…ŒìŠ¤íŠ¸
- Ctrl+N: ìƒˆ ì—ì´ì „íŠ¸
- Ctrl+E: ë‚´ë³´ë‚´ê¸°
            `.trim();

                alert(helpText);
            }

            // ========== ì˜ˆì œ í”„ë¡¬í”„íŠ¸ ê°¤ëŸ¬ë¦¬ ==========
            function showExampleGallery() {
                const examples = [
                    {
                        name: 'ì½”ë“œ ë¦¬ë·°ì–´',
                        icon: 'ğŸ‘¨â€ğŸ’»',
                        prompt: 'ë‹¹ì‹ ì€ ì‹œë‹ˆì–´ ê°œë°œìë¡œì„œ ì½”ë“œë¥¼ ê²€í† í•˜ê³  ê°œì„ ì ì„ ì œì•ˆí•©ë‹ˆë‹¤...'
                    },
                    {
                        name: 'ì´ë©”ì¼ ì‘ì„±ì',
                        icon: 'âœ‰ï¸',
                        prompt: 'ë‹¹ì‹ ì€ ì „ë¬¸ì ì´ê³  ì¹œê·¼í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ì´ë©”ì¼ì„ ì‘ì„±í•©ë‹ˆë‹¤...'
                    },
                    {
                        name: 'SQL ì „ë¬¸ê°€',
                        icon: 'ğŸ’¾',
                        prompt: 'ë‹¹ì‹ ì€ ë°ì´í„°ë² ì´ìŠ¤ ì „ë¬¸ê°€ë¡œì„œ ìµœì í™”ëœ SQL ì¿¼ë¦¬ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤...'
                    }
                ];

                console.log('ì˜ˆì œ ê°¤ëŸ¬ë¦¬:', examples);
                window.GrowFitUtils.showToast('ì˜ˆì œ ê°¤ëŸ¬ë¦¬ëŠ” ê°œë°œ ì¤‘ì…ë‹ˆë‹¤', 'info');
            }

            // ========== ì´ˆê¸°í™” ì™„ë£Œ ==========
            console.log('Agents í˜ì´ì§€ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì™„ë£Œ');
            console.log('ë‹¨ì¶•í‚¤: Ctrl+S(ì €ì¥), Ctrl+T(í…ŒìŠ¤íŠ¸), Ctrl+N(ìƒˆ ì—ì´ì „íŠ¸)');
        </script>

    <!-- ì¶”ê°€ ìŠ¤íƒ€ì¼: ì• ë‹ˆë©”ì´ì…˜ -->
    <style>
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ */
        .agents-sidebar::-webkit-scrollbar,
        .builder-content::-webkit-scrollbar {
            width: 6px;
        }

        .agents-sidebar::-webkit-scrollbar-thumb,
        .builder-content::-webkit-scrollbar-thumb {
            background: var(--gray-300);
            border-radius: var(--radius-full);
        }

        .agents-sidebar::-webkit-scrollbar-thumb:hover,
        .builder-content::-webkit-scrollbar-thumb:hover {
            background: var(--gray-400);
        }

        /* í”„ë¦°íŠ¸ ìŠ¤íƒ€ì¼ */
        @media print {
            .header,
            .sidebar,
            .agents-sidebar,
            .builder-footer,
            .test-section {
                display: none !important;
            }

            .agents-layout {
                grid-template-columns: 1fr;
            }

            .builder-content {
                overflow: visible;
            }
        }
    </style>
</body>
</html>